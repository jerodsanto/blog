<!DOCTYPE html>



 <html class="no-js"> 
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Jerod Santo">
    <meta property="og:site_name" content="Jerod Santo">
    
    <meta name="description" content="A great way to meet new people on Twitter is by checking out the people your friends are interacting with. We can assume that if many of your friends follow somebody, that person has a high likelihood of being interesting to you (or it is Ashton Kutcher). Let&rsquo;s use Ruby to generate a list of people highly followed by our friends.
The Flow

fetch the ids of all the people you follow
use those ids to fetch the ids of all the people they follow
remove any ids in both groups (sound familiar?)
tally the occurrences of each unique id in the list
sort them by most occurrences
iterate the top 10 and print the user information

The Script
require &#39;rubygems&#39;
require &#39;twitter&#39;

base        = Twitter::Base.new(Twitter::HTTPAuth.new(&#39;username&#39;, &#39;password&#39;))
my_friends  = base.friend_ids
candidates  = my_friends.inject(Array.new) { |array,id| array &#43;= Twitter.friend_ids(id); array }
candidates -= my_friends
tallied     = candidates.inject(Hash.new(0)) { |hash, can| hash[can] &#43;= 1; hash }
ordered     = tallied.sort { |x,y| y[1] &lt;=&gt; x[1] }

ordered[0..9].each do |array|
  user = base.user(array[0])
  puts &#34;#{user.screen_name} is followed by #{array[1]} of people you follow.&#34;
end
Some Explanation
The only &ldquo;tricky&rdquo; thing I&rsquo;m doing is making good use of Ruby&rsquo;s Enumerable#inject method. Twice. This method iterates an enumerable object similar to how each does except it takes an argument and passes it through the block with the object it is iterating. The variable passed can be modified and is returned by the method. For a good write-up on inject, see this blog post by The Budding Rubyist.">
    <meta property="st:title" content="Expand Your Twitter Network In Less Than 15 Lines of Ruby">
    <meta property="og:title" content="Expand Your Twitter Network In Less Than 15 Lines of Ruby">
    <meta property="og:description" content="A great way to meet new people on Twitter is by checking out the people your friends are interacting with. We can assume that if many of your friends follow somebody, that person has a high likelihood of being interesting to you (or it is Ashton Kutcher). Let&rsquo;s use Ruby to generate a list of people highly followed by our friends.
The Flow

fetch the ids of all the people you follow
use those ids to fetch the ids of all the people they follow
remove any ids in both groups (sound familiar?)
tally the occurrences of each unique id in the list
sort them by most occurrences
iterate the top 10 and print the user information

The Script
require &#39;rubygems&#39;
require &#39;twitter&#39;

base        = Twitter::Base.new(Twitter::HTTPAuth.new(&#39;username&#39;, &#39;password&#39;))
my_friends  = base.friend_ids
candidates  = my_friends.inject(Array.new) { |array,id| array &#43;= Twitter.friend_ids(id); array }
candidates -= my_friends
tallied     = candidates.inject(Hash.new(0)) { |hash, can| hash[can] &#43;= 1; hash }
ordered     = tallied.sort { |x,y| y[1] &lt;=&gt; x[1] }

ordered[0..9].each do |array|
  user = base.user(array[0])
  puts &#34;#{user.screen_name} is followed by #{array[1]} of people you follow.&#34;
end
Some Explanation
The only &ldquo;tricky&rdquo; thing I&rsquo;m doing is making good use of Ruby&rsquo;s Enumerable#inject method. Twice. This method iterates an enumerable object similar to how each does except it takes an argument and passes it through the block with the object it is iterating. The variable passed can be modified and is returned by the method. For a good write-up on inject, see this blog post by The Budding Rubyist.">
    <meta property="og:type" content="article">
    
    <meta property="og:image" content="/icon.png">
    
    
    <title>
      Expand Your Twitter Network In Less Than 15 Lines of Ruby | Jerod Santo
    </title>

    <link rel="icon" href="/icon.png" sizes="256x256" type="image/png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" media="all" href="/styles.css">
    <script>
       
      window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!(!t.document.createElementNS||!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),o=function(o){var r=t.document.createElement("link"),a=t.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=e[o&&n?0:o?1:2],a.parentNode.insertBefore(r,a)},r=new t.Image;r.onerror=function(){o(!1)},r.onload=function(){o(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}};
      grunticon(["/icons/icons.data.svg.css", "/icons/icons.data.png.css", "/icons/icons.fallback.css"]);
    </script>

    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400italic,400' rel='stylesheet' type='text/css'>
    <script src="//use.typekit.net/ozg5mvx.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
    <script src="/js/modernizr-custom.js"></script>

    

    <link rel="alternate" type="application/atom+xml" href="/index.xml" />
  </head>
  <body class="">
    
    <div class="main-header">
      <h1>
        <a href="/" title="Home">
          <span class="big-dot">&middot;</span> Jerod Santo <span class="big-dot">&middot;</span>
        </a>
      </h1>
      <a href="javascript:void(0);" title="Moar" class="main-header-more">+</a>
      <a href="/archives/" title="View Blog Archives" class="main-header-archive">Archives</a>
      <a href="mailto:jerod.santo@gmail.com" title="Contact Jerod" class="main-header-contact">Contact</a>
      <a href="/search/" title="Search the site" class="main-header-search">Search</a>
    </div>
    

    
<article class="post">
  <header class="post-header">
    <h1>Expand Your Twitter Network In Less Than 15 Lines of Ruby</h1>
    
    <p class="post-date">
      May 17, 2009
    </p>
  </header>

  

  <div class="post-content">
    <p>A great way to meet new people on Twitter is by checking out the people your friends are interacting with. We can assume that if many of your friends follow somebody, that person has a high likelihood of being interesting to you (or it is <a href="http://twitter.com/aplusk">Ashton Kutcher</a>). Let&rsquo;s use Ruby to generate a list of people highly followed by our friends.</p>
<h2 id="the-flow">The Flow</h2>
<ol>
<li>fetch the ids of all the people you follow</li>
<li>use those ids to fetch the ids of all the people they follow</li>
<li>remove any ids in both groups (sound familiar?)</li>
<li>tally the occurrences of each unique id in the list</li>
<li>sort them by most occurrences</li>
<li>iterate the top 10 and print the user information</li>
</ol>
<h2 id="the-script">The Script</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#6639ba">require</span> <span style="color:#0a3069">&#39;rubygems&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#6639ba">require</span> <span style="color:#0a3069">&#39;twitter&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>base        <span style="color:#0550ae">=</span> <span style="color:#0550ae">Twitter</span><span style="color:#0550ae">::</span><span style="color:#0550ae">Base</span><span style="color:#0550ae">.</span>new<span style="color:#1f2328">(</span><span style="color:#0550ae">Twitter</span><span style="color:#0550ae">::</span><span style="color:#0550ae">HTTPAuth</span><span style="color:#0550ae">.</span>new<span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;username&#39;</span><span style="color:#1f2328">,</span> <span style="color:#0a3069">&#39;password&#39;</span><span style="color:#1f2328">))</span>
</span></span><span style="display:flex;"><span>my_friends  <span style="color:#0550ae">=</span> base<span style="color:#0550ae">.</span>friend_ids
</span></span><span style="display:flex;"><span>candidates  <span style="color:#0550ae">=</span> my_friends<span style="color:#0550ae">.</span>inject<span style="color:#1f2328">(</span><span style="color:#6639ba">Array</span><span style="color:#0550ae">.</span>new<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span> <span style="color:#0550ae">|</span>array<span style="color:#1f2328">,</span><span style="color:#6639ba">id</span><span style="color:#0550ae">|</span> array <span style="color:#0550ae">+=</span> <span style="color:#0550ae">Twitter</span><span style="color:#0550ae">.</span>friend_ids<span style="color:#1f2328">(</span><span style="color:#6639ba">id</span><span style="color:#1f2328">);</span> array <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>candidates <span style="color:#0550ae">-=</span> my_friends
</span></span><span style="display:flex;"><span>tallied     <span style="color:#0550ae">=</span> candidates<span style="color:#0550ae">.</span>inject<span style="color:#1f2328">(</span><span style="color:#0550ae">Hash</span><span style="color:#0550ae">.</span>new<span style="color:#1f2328">(</span><span style="color:#0550ae">0</span><span style="color:#1f2328">))</span> <span style="color:#1f2328">{</span> <span style="color:#0550ae">|</span><span style="color:#6639ba">hash</span><span style="color:#1f2328">,</span> can<span style="color:#0550ae">|</span> <span style="color:#6639ba">hash</span><span style="color:#0550ae">[</span>can<span style="color:#0550ae">]</span> <span style="color:#0550ae">+=</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">;</span> <span style="color:#6639ba">hash</span> <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>ordered     <span style="color:#0550ae">=</span> tallied<span style="color:#0550ae">.</span>sort <span style="color:#1f2328">{</span> <span style="color:#0550ae">|</span>x<span style="color:#1f2328">,</span>y<span style="color:#0550ae">|</span> y<span style="color:#0550ae">[</span><span style="color:#0550ae">1</span><span style="color:#0550ae">]</span> <span style="color:#0550ae">&lt;=&gt;</span> x<span style="color:#0550ae">[</span><span style="color:#0550ae">1</span><span style="color:#0550ae">]</span> <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ordered<span style="color:#0550ae">[</span><span style="color:#0550ae">0</span><span style="color:#0550ae">..</span><span style="color:#0550ae">9</span><span style="color:#0550ae">].</span>each <span style="color:#cf222e">do</span> <span style="color:#0550ae">|</span>array<span style="color:#0550ae">|</span>
</span></span><span style="display:flex;"><span>  user <span style="color:#0550ae">=</span> base<span style="color:#0550ae">.</span>user<span style="color:#1f2328">(</span>array<span style="color:#0550ae">[</span><span style="color:#0550ae">0</span><span style="color:#0550ae">]</span><span style="color:#1f2328">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#6639ba">puts</span> <span style="color:#0a3069">&#34;</span><span style="color:#0a3069">#{</span>user<span style="color:#0550ae">.</span>screen_name<span style="color:#0a3069">}</span><span style="color:#0a3069"> is followed by </span><span style="color:#0a3069">#{</span>array<span style="color:#0550ae">[</span><span style="color:#0550ae">1</span><span style="color:#0550ae">]</span><span style="color:#0a3069">}</span><span style="color:#0a3069"> of people you follow.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">end</span>
</span></span></code></pre></div><h2 id="some-explanation">Some Explanation</h2>
<p>The only &ldquo;tricky&rdquo; thing I&rsquo;m doing is making good use of Ruby&rsquo;s <a href="http://www.ruby-doc.org/core/classes/Enumerable.html#M003171">Enumerable#inject</a> method. Twice. This method iterates an enumerable object similar to how <code>each</code> does except it takes an argument and passes it through the block with the object it is iterating. The variable passed can be modified and is returned by the method. For a good write-up on <code>inject</code>, <a href="http://buddingrubyist.com/2008/02/05/why-i-like-to-inject/">see this blog post by The Budding Rubyist.</a></p>
<h2 id="a-limitation">A Limitation</h2>
<p>Unfortunately, this script is hindered by Twitter&rsquo;s 100 API calls per hour. If you follow more than 100 people on Twitter you&rsquo;re going to need a workaround. I&rsquo;ll leave these as an exercise for whoever is interested, but a few ideas are:</p>
<ol>
<li>sleep the script between API hits</li>
<li>toggle between multiple accounts for requests</li>
<li><a href="http://twitter.com/help/request_whitelisting">request whitelisting</a> from Twitter</li>
</ol>
<h2 id="a-challenge">A Challenge</h2>
<p>Can you can make this script smaller, more readable, or more robust? I put it on <a href="http://github.com">GitHub</a> so you can <a href="http://gist.github.com/113270">fork my gist</a> and put a link to your version in the comments!</p>

  </div>

  <ul class="post-share-buttons">
    <li class="service_twitter post-share-1">
      <a class="icon-twitter" href="https://twitter.com/intent/tweet?url=http%3a%2f%2flocalhost%3a1313%2f2009%2f05%2fexpand-your-twitter-network-in-less-than-15-lines-of-ruby%2f&via=jerodsanto&text=Expand%20Your%20Twitter%20Network%20In%20Less%20Than%2015%20Lines%20of%20Ruby" title="Tweet">
        <span>Tweet</span>
      </a>
    </li>
    <li class="service_rss post-share-2">
      <a class="icon-rss" href="/index.xml" title="Subscribe to the feed!">
        <span>RSS</span>
      </a>
    </li>
    <li class="service_hackernews post-share-3">
      <a class="icon-hackernews" href="http://news.ycombinator.com/submitlink?u=http%3a%2f%2flocalhost%3a1313%2f2009%2f05%2fexpand-your-twitter-network-in-less-than-15-lines-of-ruby%2f&t=Expand%20Your%20Twitter%20Network%20In%20Less%20Than%2015%20Lines%20of%20Ruby" title="Post to Hacker News">
        <span>Hacker News</span>
      </a>
    </li>
    <li class="service_instapaper post-share-4">
      <a class="icon-instapaper" href="http://www.instapaper.com/hello2?url=http%3a%2f%2flocalhost%3a1313%2f2009%2f05%2fexpand-your-twitter-network-in-less-than-15-lines-of-ruby%2f&title=Expand%20Your%20Twitter%20Network%20In%20Less%20Than%2015%20Lines%20of%20Ruby" title="Read later">
        <span>Instapaper</span>
      </a>
    </li>
  </ul>

  
  

  <div id="disqus_thread"></div>
  <script>
    var disqus_url   = "http:\/\/localhost:1313\/2009\/05\/expand-your-twitter-network-in-less-than-15-lines-of-ruby\/";
    var disqus_title = "Expand Your Twitter Network In Less Than 15 Lines of Ruby";
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'https://blogt0sk1.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script src="//platform.twitter.com/widgets.js"></script>
</article>


    <footer class="main-footer">
  <p>
    Copyright &copy; 2008&mdash;2025 Jerod Santo
  </p>
</footer>

    
    <script src="/js/compiled.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-3287978-16', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>