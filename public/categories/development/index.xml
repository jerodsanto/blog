<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Development Posts on Jerod Santo</title>
  <link href="http://localhost:1313/categories/development/" rel="alternate" type="text/html" />
  <link href="http://localhost:1313/categories/development/index.xml" rel="self" type="application/rss+xml" />
  <description>On software, life, &amp; the space between</description>
  <generator>Hugo -- gohugo.io</generator>
  <language>en-us</language>
  <lastBuildDate>Thu, 22 Dec 2016 00:00:00 +0000</lastBuildDate><atom:link href="http://localhost:1313/categories/development/index.xml" rel="self" type="application/rss+xml" />
  <entry>
    <title>5 Answers For Coder Catchup Episode 100</title>
    <link href="http://localhost:1313/2016/12/5-answers-for-coder-catchup-episode-100/"/>
    <id>http://localhost:1313/2016/12/5-answers-for-coder-catchup-episode-100/</id>
    <updated>2016-12-22T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;To celebrate episode 100 of Jaymie Jones&amp;amp;rsquo; &amp;lt;a href=&amp;#34;http://codercatchup.com&amp;#34;&amp;gt;Coder Catchup&amp;lt;/a&amp;gt; podcast, Jaymie reached out to a handful of people and asked us 5 questions about web development, which he then read on the show.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I was honored to be on the show alongside such great web folks as Chris Coyier, Wes Bos, Adam Stacoviak, Sarah Allen, and more.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Since I wrote my answers to Jaymie in Markdown and shipped them off for him to read, I figured I&amp;amp;rsquo;d also post them here as well.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;But still, you should &amp;lt;a href=&amp;#34;http://codercatchup.com/episodes/55598-episode-100-one-hundred&amp;#34;&amp;gt;listen to his Episode 100&amp;lt;/a&amp;gt; since there are many great answers to the questions below. Enjoy!&amp;lt;/p&amp;gt;
&amp;lt;h3 id=&amp;#34;1-if-you-were-starting-fresh-what-would-you-primarily-focus-on-eg-as-a-new-web-designerdeveloper&amp;#34;&amp;gt;1. If you were starting fresh, what would you primarily focus on? (e.g. as a new web designer/developer)&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;Beginners &amp;lt;em&amp;gt;shouldn&amp;amp;rsquo;t focus&amp;lt;/em&amp;gt; much, I don&amp;amp;rsquo;t think. This is why many 101 level courses are surveys of an entire field. It&amp;amp;rsquo;s important to get the lay of the land before focusing in on one or a few things. How else can you get a sense of what&amp;amp;rsquo;s worth focusing on?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In web development, I think that means learning how the web works as a system. Clients, servers, DNS, HTTP(s), and HTML are the underpinnings of the web that should be understood first. Then, I&amp;amp;rsquo;d try to use that knowledge to publish a website, soup-to-nuts. Once you can do that on your own, the opportunities really open up for you.&amp;lt;/p&amp;gt;
&amp;lt;h3 id=&amp;#34;2-what-is-one-piece-of-advice-you-think-is-most-important-for-web-developersdesigners-going-forward&amp;#34;&amp;gt;2. What is one piece of advice you think is most important for web developers/designers going forward?&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;Generalize. Technologies come to fame then fall from favor faster than boy bands. If you gained expertise in Thing A by burying your head in it and ignoring Things B, C, and D, your skills may be quite marketable today and &amp;lt;em&amp;gt;completely irrelevant&amp;lt;/em&amp;gt; tomorrow. On the other hand, if you keep your eyes on Things A through D while working with maybe B and C, you stand a much better chance of remaining valuable as things change.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;If we look at our ongoing education in terms of breadth and depth, my advice (and practice) is to go for breadth habitually and go for depth when the need arises.&amp;lt;/p&amp;gt;
&amp;lt;h3 id=&amp;#34;3-what-would-you-do-to-get-out-of-a-slump-or-plateau-with-your-web-career&amp;#34;&amp;gt;3. What would you do to get out of a slump or plateau with your web career?&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;This depends on what you mean by slump, but I&amp;amp;rsquo;ll assume it means waning interest in the web and my work on it. In this case, I&amp;amp;rsquo;ve found that side projects are great slump busters. Working on a side project that I care about energizes me and helps me power through times of low motivation, especially if they&amp;amp;rsquo;re challenging and push me outside of my comfort zone. Frankly, that&amp;amp;rsquo;s one of my favorite things about working on Changelog. Producing awesome content for developers is an entirely different challenge from writing software itself. Plus, it usually means hacking on a few things along the way!&amp;lt;/p&amp;gt;
&amp;lt;h3 id=&amp;#34;4-what-is-1-thing-you-would-like-to-see-web-developersdesigners-doing-more-of&amp;#34;&amp;gt;4. What is 1 thing you would like to see web developers/designers doing more of?&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;d love to see web developers and designers focus more on the fundamentals and less on bleeding edge features and new techniques. Get the basics right: quality content, ease of use, and speed of delivery. The rest is just icing on the cake.&amp;lt;/p&amp;gt;
&amp;lt;h3 id=&amp;#34;5-one-piece-of-advice-of-your-choosing&amp;#34;&amp;gt;5. One piece of advice of your choosing&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;Listen to &amp;lt;a href=&amp;#34;https://changelog.com&amp;#34;&amp;gt;more podcasts&amp;lt;/a&amp;gt;. :)&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Safari does not trigger click events on anchors or buttons containing SVG elements</title>
    <link href="http://localhost:1313/2015/08/safari-does-not-trigger-click-events-on-anchors-or-buttons-containing-svg-elements/"/>
    <id>http://localhost:1313/2015/08/safari-does-not-trigger-click-events-on-anchors-or-buttons-containing-svg-elements/</id>
    <updated>2015-08-18T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;This fact will ruin your day if, for instance, you are expecting Rails&amp;amp;rsquo; jQuery UJS to Just Work when you add a &amp;lt;code&amp;gt;remote: true&amp;lt;/code&amp;gt; or &amp;lt;code&amp;gt;method: :post&amp;lt;/code&amp;gt; to that &amp;lt;code&amp;gt;link_to&amp;lt;/code&amp;gt; helper. You know, something like this:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;It&amp;amp;rsquo;ll work in Chrome. It&amp;amp;rsquo;ll work in Firefox. But Safari on the other hand&amp;amp;hellip;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Safari will not trigger a &amp;lt;code&amp;gt;click&amp;lt;/code&amp;gt; event and whatever JavaScript you were expecting to fire will not. How to fix? In your CSS:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-css&amp;#34; data-lang=&amp;#34;css&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;svg&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  pointer-events&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;none&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This took me way too long to diagnose. Hopefully this post saves you some time/money!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Trailing Conditionals Considered Harmful Unless Used Sparingly</title>
    <link href="http://localhost:1313/2015/03/trailing-conditionals-considered-harmful-unless-used-sparingly/"/>
    <id>http://localhost:1313/2015/03/trailing-conditionals-considered-harmful-unless-used-sparingly/</id>
    <updated>2015-03-08T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;One Ruby feature that I fell in love with back in the day is the ability to tack conditionals on at the end of a line. For example, this bit of code:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; some_condition?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  object&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;perform_some_action
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Can be expressed as a one-liner, like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;object&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;perform_some_action &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; some_condition?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;It&amp;amp;rsquo;s a small difference, but the latter form often maps more directly to how the author thinks about the problem. It feels even better when teamed with the &amp;lt;code&amp;gt;unless&amp;lt;/code&amp;gt; keyword:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;object&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;perform_some_action &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; some_condition?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;After years of writing and reading code like this, I&amp;amp;rsquo;ve slowly grown cold on the style.&amp;lt;/p&amp;gt;
&amp;lt;h1 id=&amp;#34;why&amp;#34;&amp;gt;Why&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;The reason why I&amp;amp;rsquo;m bearish on trailing conditionals may best be expressed by a road sign I saw on a recent road trip down Interstate 80:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/i-80-closed.jpg&amp;#34; alt=&amp;#34;Not the actual sign I saw, but close enough&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Notice the trailing conditional? A lot can go wrong with signs like these if the driver doesn&amp;amp;rsquo;t make it to the final line of the text. Why might that happen?&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;The sign could be blocked by some obstruction until the last second&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;The driver could be distracted by kids, the radio, their phone, etc. until it&amp;amp;rsquo;s too late&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;A sign-related exit could be imminent with the driver in the wrong lane&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;p&amp;gt;In this case, &amp;lt;strong&amp;gt;WHEN FLASHING&amp;lt;/strong&amp;gt; is the key indicator on the sign. Why is it the last thing mentioned? In the world of journalism they call this &amp;lt;a href=&amp;#34;http://en.wiktionary.org/wiki/bury_the_lead&amp;#34;&amp;gt;burying the lead&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;If the sign designer place &amp;lt;strong&amp;gt;WHEN FLASHING&amp;lt;/strong&amp;gt; first, the driver could often skip the rest of the text altogether&amp;lt;sup id=&amp;#34;fnref:2&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:2&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;2&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;. This saves cognitive overhead that the driver can use elsewhere and avoids potential disasters that might occur if the conditional isn&amp;amp;rsquo;t understood in time.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In a slightly-tangential way, trailing conditionals violate the &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Principle_of_least_astonishment&amp;#34;&amp;gt;Principle of Least Surprise&amp;lt;/a&amp;gt;. This principle — as most important things in life — made its way in to a Mitch Hedberg joke, in which he picks a fight with the phrase &amp;amp;ldquo;Do Not Disturb&amp;amp;rdquo;:&amp;lt;/p&amp;gt;
&amp;lt;iframe width=&amp;#34;100%&amp;#34; height=&amp;#34;166&amp;#34; scrolling=&amp;#34;no&amp;#34; frameborder=&amp;#34;no&amp;#34; src=&amp;#34;https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/194783967&amp;amp;amp;color=ff5500&amp;amp;amp;auto_play=false&amp;amp;amp;hide_related=false&amp;amp;amp;show_comments=false&amp;amp;amp;show_user=false&amp;amp;amp;show_reposts=false&amp;#34;&amp;gt;&amp;lt;/iframe&amp;gt;
&amp;lt;p&amp;gt;The problem is exacerbated when driving 80 MPH on the interstate, but it exists in our code as well. The trailing conditional feels great when you&amp;amp;rsquo;re &amp;lt;em&amp;gt;writing&amp;lt;/em&amp;gt; the code, but it often makes it harder to &amp;lt;em&amp;gt;read&amp;lt;/em&amp;gt;. This is most obvious when the operation that precedes the conditional is verbose. Take this fake code, for instance:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;call_this_really_long_method_that_is_probably_too_long_but_that_will_not_stop_us &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; some_condition?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;What if you didn&amp;amp;rsquo;t scroll over to see the &amp;lt;code&amp;gt;unless&amp;lt;/code&amp;gt; at the end? You wouldn&amp;amp;rsquo;t know what&amp;amp;rsquo;s going on at all. Admittedly, method names of this length are rare, but &amp;lt;em&amp;gt;it is&amp;lt;/em&amp;gt; common to have trailing conditionals nested inside other control structures that have the same effect&amp;lt;sup id=&amp;#34;fnref:3&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:3&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;3&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://blogs.msdn.com/b/oldnewthing/archive/2007/04/06/2036150.aspx&amp;#34;&amp;gt;Code is read much more often than it is written&amp;lt;/a&amp;gt;, so we need to optimize for readability over writeability&amp;lt;sup id=&amp;#34;fnref:4&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:4&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;4&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;. Trailing conditionals tend to do the opposite.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;but&amp;#34;&amp;gt;But&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;As with most things in software (and writing), there are exceptions. Some uses of trailing conditionals improve readability. The best case for them in my experience is with &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Guard_(computer_science)&amp;#34;&amp;gt;guard clauses&amp;lt;/a&amp;gt;. Guard clauses have a few characteristics that make them quite readable with trailing conditionals:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;They occur at the top of a method, so they are rarely nested themselves&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;They often return or raise an error, which are brief statements&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;There are often a few guard clauses together, so vertical brevity aides reading&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;p&amp;gt;Take a look at this method which returns a &amp;lt;code&amp;gt;price_range&amp;lt;/code&amp;gt; string for a given object that responds to &amp;lt;code&amp;gt;price_minimum&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;price_maximum&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;price_range&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; defined? &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; price_minimum
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; price_maximum
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# ... code to determine `minimum` and `maximum` ...&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;minimum&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;maximum&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The first line &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Memoization&amp;#34;&amp;gt;memoizes&amp;lt;/a&amp;gt; the &amp;lt;code&amp;gt;price_range&amp;lt;/code&amp;gt;, since this is apparently an expensive computation. Lines 2 and 3 are guard clauses. What would this look like with traditional conditionals?&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;price_range&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; defined? &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; price_minimum
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; price_maximum
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# ... code to determine `minimum` and `maximum` ...&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;minimum&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;maximum&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This code requires more vertical work to parse. There&amp;amp;rsquo;s a 3rd form it could take, which is to put the conditionals first and still keep each one a one-liner:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;price_range&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; defined? &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!&amp;lt;/span&amp;gt;price_minimum &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!&amp;lt;/span&amp;gt;price_maximum &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# ... code to determine `minimum` and `maximum` ...&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@price_range&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;minimum&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;maximum&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This works for me, but I prefer the return-first form because any time a method returns early we want to know about that &amp;lt;em&amp;gt;ASAP&amp;lt;/em&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;so&amp;#34;&amp;gt;So&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Think twice before slinging around trailing conditionals. They put the cart before the horse and in extreme cases they cause the reader to miss the horse altogether. This makes them often less readable than the traditional form.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Or maybe Mitch was right and we all just need to read faster!&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;This is actually what happened to me. I barely deciphered the correct meaning in time.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:2&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;The road being closed is the exception, not the common case. This means the lights will rarely flash and the sign is most often irrelevant.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:2&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:3&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;This is &amp;lt;a href=&amp;#34;http://stackoverflow.com/a/578318&amp;#34;&amp;gt;yet another reason&amp;lt;/a&amp;gt; that I advocate for 80-characters or less per line.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:3&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:4&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;The two are often coupled, but are sometimes at odds.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:4&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Art-directed, data-driven image files to accompany your website</title>
    <link href="http://localhost:1313/2015/01/art-directed-data-driven-image-files-to-accompany-your-website/"/>
    <id>http://localhost:1313/2015/01/art-directed-data-driven-image-files-to-accompany-your-website/</id>
    <updated>2015-01-19T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://codyjamespeterson.com&amp;#34;&amp;gt;Cody&amp;lt;/a&amp;gt; and I recently added a subtle feature&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt; to &amp;lt;a href=&amp;#34;http://omahype.com&amp;#34;&amp;gt;Oma&amp;lt;/a&amp;gt;/&amp;lt;a href=&amp;#34;http://outwithsprout.com&amp;#34;&amp;gt;Sprout&amp;lt;/a&amp;gt; that we think is pretty neat. I haven&amp;amp;rsquo;t seen other people doing this, so I thought I&amp;amp;rsquo;d publish the idea and how we pulled it off.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-problem&amp;#34;&amp;gt;The Problem&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Much of our recurring traffic comes from social media&amp;lt;sup id=&amp;#34;fnref:2&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:2&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;2&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;. To foster this flow of traffic, we post our sites&amp;amp;rsquo; daily event pages to Facebook and Twitter on a regular basis.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The web in general — and social media in particular — is a fight for attention. What makes it worse is that &amp;lt;a href=&amp;#34;http://www.nngroup.com/articles/how-users-read-on-the-web/&amp;#34;&amp;gt;people don&amp;amp;rsquo;t read words&amp;lt;/a&amp;gt;. What they do do&amp;lt;sup id=&amp;#34;fnref:3&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:3&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;3&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt; is look at pictures. Disagree with that? Just ask Instagram or Pinterest about it.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Social media posts that include imagery out-perform posts that don&amp;amp;rsquo;t. Any Social Media Guru worth her weight in Likes will tell you that. Because of this, we include our site&amp;amp;rsquo;s logo with each post. (Posts promoting specific events often have better images that we use, but our logo is the fallback.)&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/oma-sprout.png&amp;#34; alt=&amp;#34;Omahype / Out with Sprout logos&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;An image of our logo is better than nothing. It makes our posts immediatey recognizable, but it&amp;amp;rsquo;s also &amp;lt;em&amp;gt;boring&amp;lt;/em&amp;gt;. In a zero-sum fight for attention, boring loses every time. What can we do to improve our reach?&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-solution&amp;#34;&amp;gt;The Solution&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Each day&amp;amp;rsquo;s events are unique. If we could somehow reflect that uniqueness in the imagery that gets posted to social media, then we would have de facto fresh image content each day&amp;lt;sup id=&amp;#34;fnref:4&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:4&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;4&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Enter our art-directed, data-driven image files. Check out the day view for Saturday, January 17th.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.outwithsprout.com/2015/01/17&amp;#34;&amp;gt;http://www.outwithsprout.com/2015/01/17&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.outwithsprout.com/2015/01/17&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/ows-day-view.png&amp;#34; alt=&amp;#34; &amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;You will notice:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;3 &amp;lt;a href=&amp;#34;http://www.outwithsprout.com/category/explore&amp;#34;&amp;gt;Explore&amp;lt;/a&amp;gt; events (highlighted in red)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;1 &amp;lt;a href=&amp;#34;http://www.outwithsprout.com/category/experience&amp;#34;&amp;gt;Experience&amp;lt;/a&amp;gt; event (yellow highlighted in yellow)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;1 &amp;lt;a href=&amp;#34;http://www.outwithsprout.com/category/play&amp;#34;&amp;gt;Play&amp;lt;/a&amp;gt; event (highlighted in green)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;2 &amp;lt;a href=&amp;#34;http://www.outwithsprout.com/category/create&amp;#34;&amp;gt;Create&amp;lt;/a&amp;gt; events (highlighted in pink)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;1 &amp;lt;a href=&amp;#34;http://www.outwithsprout.com/category/cheer&amp;#34;&amp;gt;Cheer&amp;lt;/a&amp;gt; event (highlighted in blue)&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;p&amp;gt;Now, append a &amp;lt;code&amp;gt;.png&amp;lt;/code&amp;gt; to the end of that URL:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.outwithsprout.com/2015/01/17.png&amp;#34;&amp;gt;http://www.outwithsprout.com/2015/01/17.png&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;You get this instead:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.outwithsprout.com/2015/01/17&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://www.outwithsprout.com/2015/01/17.png&amp;#34; alt=&amp;#34; &amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Pretty cool, right? Not only is the day&amp;amp;rsquo;s date presented in a little calendar widget, but each event for that day is represented by a color-coordinated circle. It&amp;amp;rsquo;s a subtle-but-unique way to re-enforce how color plays a role in our sites&amp;amp;rsquo; content.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Next, check out the &amp;lt;a href=&amp;#34;http://www.outwithsprout.com/2015/01/18&amp;#34;&amp;gt;18th&amp;lt;/a&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.outwithsprout.com/2015/01/18&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://www.outwithsprout.com/2015/01/18.png&amp;#34; alt=&amp;#34;Saturday is king for kids events. Sunday, not so much.&amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;There are only 3 events on the 18th. Hence, 3 colored circles on its image. Each image is generated &amp;lt;em&amp;gt;on request&amp;lt;/em&amp;gt; and represents the current state of our database of events. We use these images in place of our logo on social media.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/ows-fb-post.png&amp;#34; alt=&amp;#34;A familiar, branded, &amp;amp;amp; unique image for each day&amp;amp;rsquo;s post&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;how-we-pull-it-off&amp;#34;&amp;gt;How We Pull it Off&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;There&amp;amp;rsquo;s an awesome gem called &amp;lt;a href=&amp;#34;https://github.com/csquared/IMGKit&amp;#34;&amp;gt;IMGKit&amp;lt;/a&amp;gt; — which wraps &amp;lt;a href=&amp;#34;https://github.com/wkhtmltopdf/wkhtmltopdf&amp;#34;&amp;gt;wkhtmltoimage&amp;lt;/a&amp;gt; — that we use to pull this all off. The gem takes our authored HTML and converts it in to an image.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;This app is on Rails, so these setup instructions are specific to that environment, but the concept itself can easily be ported to other stacks.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;Rails is designed to handle alternate MIME types — via the &amp;lt;a href=&amp;#34;http://api.rubyonrails.org/classes/ActionController/MimeResponds.html#method-i-respond_to&amp;#34;&amp;gt;respond_to&amp;lt;/a&amp;gt; API — really well. We already have a controller action that fetches the day&amp;amp;rsquo;s events, so all we have to do is tell it to respond to &amp;lt;code&amp;gt;png&amp;lt;/code&amp;gt; requests:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;respond_to &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;html
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;png &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    kit &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;IMGKit&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new render_to_string&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;width&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;300&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;height&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;300&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    send_data kit&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_png&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;type&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;image/png&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;disposition&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;inline&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Requests for &amp;lt;code&amp;gt;html&amp;lt;/code&amp;gt; will render the &amp;lt;code&amp;gt;app/views/events/day.html.erb&amp;lt;/code&amp;gt; view, just like always. Requests for &amp;lt;code&amp;gt;png&amp;lt;/code&amp;gt; will render the &amp;lt;code&amp;gt;app/views/events/day.png.erb&amp;lt;/code&amp;gt; view. Now we add a view that includes the HTML to be converted in to the image and we&amp;amp;rsquo;re done!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here&amp;amp;rsquo;s the guts of the view (sans CSS):&amp;lt;/p&amp;gt;
&amp;lt;pre tabindex=&amp;#34;0&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-erb&amp;#34; data-lang=&amp;#34;erb&amp;#34;&amp;gt;&amp;amp;lt;body class=&amp;amp;#34;&amp;amp;lt;%= Omahype.theme %&amp;amp;gt;&amp;amp;#34;&amp;amp;gt;
  &amp;amp;lt;div class=&amp;amp;#34;calendar&amp;amp;#34;&amp;amp;gt;
    &amp;amp;lt;h1 class=&amp;amp;#34;calendar-month&amp;amp;#34;&amp;amp;gt;&amp;amp;lt;%= day.to_s :month %&amp;amp;gt;&amp;amp;lt;/h1&amp;amp;gt;
    &amp;amp;lt;h2 class=&amp;amp;#34;calendar-day&amp;amp;#34;&amp;amp;gt;&amp;amp;lt;%= day.to_s :day_number %&amp;amp;gt;&amp;amp;lt;/h2&amp;amp;gt;
    &amp;amp;lt;ul class=&amp;amp;#34;event-dots&amp;amp;#34;&amp;amp;gt;
      &amp;amp;lt;% day.events.each do |event| %&amp;amp;gt;
        &amp;amp;lt;li class=&amp;amp;#34;&amp;amp;lt;%= event.event_classes %&amp;amp;gt;&amp;amp;#34;&amp;amp;gt;&amp;amp;lt;/li&amp;amp;gt;
      &amp;amp;lt;% end %&amp;amp;gt;
    &amp;amp;lt;/li&amp;amp;gt;
  &amp;amp;lt;/div&amp;amp;gt;
&amp;amp;lt;/body&amp;amp;gt;
&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;p&amp;gt;Pretty simple, huh? One thing to note: you cannot easily reference external style sheets from your image views. We inline everything in a &amp;lt;code&amp;gt;style&amp;lt;/code&amp;gt; tag to get around this limitation.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Finally, we point the social medias at this new &amp;lt;code&amp;gt;.png&amp;lt;/code&amp;gt; URL so they grab it instead of the logo image. Here&amp;amp;rsquo;s the meta tags generated to handle this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-html&amp;#34; data-lang=&amp;#34;html&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;meta&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;property&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;og:image&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;content&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://www.outwithsprout.com/2015/01/17.png&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;meta&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;property&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;og:image&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;content&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://ows-production.s3.amazonaws.com/assets/ows/fb-og-8eb228bfcc6eebb2397df92c5ccf3b3d.png&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;meta&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;property&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;twitter:image:src&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;content&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://www.outwithsprout.com/2015/01/17.png&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;/&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Why two &amp;lt;code&amp;gt;og:image&amp;lt;/code&amp;gt; tags, you wonder? Because Facebook will accept a cascade of images and use the first (or best) one by default. We want to use our custom day view image, but if something goes wrong we fall back to our logo image instead.&amp;lt;/p&amp;gt;
&amp;lt;h3 id=&amp;#34;caching&amp;#34;&amp;gt;Caching&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;Generating these images isn&amp;amp;rsquo;t the fastest process in the world. It generally takes between 500ms and 1800ms per request. We don&amp;amp;rsquo;t need them to be &amp;lt;em&amp;gt;up-to-the-moment&amp;lt;/em&amp;gt; fresh, so we add a &amp;lt;a href=&amp;#34;https://github.com/mperham/dalli&amp;#34;&amp;gt;cache&amp;lt;/a&amp;gt; and only regenerate them once every 24 hours. This is just a single line of code added to the &amp;lt;code&amp;gt;respond_to&amp;lt;/code&amp;gt; block:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;png &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  expires_in &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;24&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;hours&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;public&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  kit &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;IMGKit&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new render_to_string&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;width&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;612&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;height&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;612&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  send_data kit&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_png&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;type&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;image/png&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;disposition&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;inline&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;other-uses&amp;#34;&amp;gt;Other Uses&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Once we went through all the work of setting up the dynamic images, we started to think of other ways we could reuse them. Our newsletter lists the upcoming week&amp;amp;rsquo;s events day-by-day, so that was a natural fit. We link the day images in to it via a good ole&amp;amp;rsquo; &amp;lt;code&amp;gt;img&amp;lt;/code&amp;gt; tag. No extra coding necessary!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://eepurl.com/NRfgD&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/weekly-images.png&amp;#34; alt=&amp;#34; &amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Caching plays a huge role in this use case because each person that opens the email will hit our server for five day images.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We&amp;amp;rsquo;ve been experimenting with another use for these images which could be awesome (especially for Omahype).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We could just as easily design a custom &amp;lt;em&amp;gt;event&amp;lt;/em&amp;gt; image. It would frame in the event&amp;amp;rsquo;s artwork and overlay it with date/time/location info. Then these event images could be made available for download so others can use them to promote the event.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We made a few steps down that road, but haven&amp;amp;rsquo;t fully fleshed the idea out yet.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;all-the-small-things&amp;#34;&amp;gt;All The Small Things&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;This is a minor feature that many people will never even notice. Why all the fuss? Because it&amp;amp;rsquo;s small details like these that surprise and delight people.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;If your website has unique and interesting content, I&amp;amp;rsquo;m sure you can come up with some rad uses for art-directed, data-driven image files. It&amp;amp;rsquo;ll set you apart from the crowd.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;The beauty of side projects — especially those with active users — is that you can use them as playgrounds for trying out new things.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:2&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;A fact that I loathe. We&amp;amp;rsquo;re trying to break free of Facebook&amp;amp;rsquo;s shackles with a &amp;lt;a href=&amp;#34;http://eepurl.com/NRfgD&amp;#34;&amp;gt;newsletter&amp;lt;/a&amp;gt;. So far that strategy is working just OK.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:2&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:3&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;Snicker at this and you&amp;amp;rsquo;re as juvenile as I am.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:3&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:4&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;Cody gets full credit for this idea. I just made it happen.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:4&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>List all Git commits that are on one branch, but aren&#39;t on the other</title>
    <link href="http://localhost:1313/2014/09/list-all-git-commits-that-are-on-one-branch-but-arent-on-the-other/"/>
    <id>http://localhost:1313/2014/09/list-all-git-commits-that-are-on-one-branch-but-arent-on-the-other/</id>
    <updated>2014-09-06T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Common need: show me all the comits that branch &amp;lt;code&amp;gt;X&amp;lt;/code&amp;gt; has, but branch &amp;lt;code&amp;gt;Y&amp;lt;/code&amp;gt; doesn&amp;amp;rsquo;t.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Why is this need common? Because Heroku-style deployment environments are increasingly common and it&amp;amp;rsquo;s super handy to quickly see which commits you haven&amp;amp;rsquo;t pushed to production.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here is the Git command in all its glory&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;git log --left-right --graph --cherry-pick --oneline X...Y
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Hopefully obvious, but worth a mention: replace &amp;lt;code&amp;gt;X&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;Y&amp;lt;/code&amp;gt; above with the names of the branches you want to compare.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This is nice, but that doesn&amp;amp;rsquo;t mean we have to memorize it. Aliases to the rescue! Add the following to your &amp;lt;code&amp;gt;.gitconfig&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[alias]
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;  compare = log --left-right --graph --cherry-pick --oneline
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now if you want to see the commits on your master branch that aren&amp;amp;rsquo;t on Heroku&amp;amp;rsquo;s master branch:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;git compare master...heroku/master
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Admittedly, &amp;lt;code&amp;gt;compare&amp;lt;/code&amp;gt; is a pretty generic name for this alias. Naming things is &amp;lt;a href=&amp;#34;2014/08/naming-things-is-hard-lets-go-shopping/&amp;#34;&amp;gt;hard&amp;lt;/a&amp;gt;. Let me know if you have a better one!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>A step by step guide to bulletproof 404s on Rails</title>
    <link href="http://localhost:1313/2014/06/a-step-by-step-guide-to-bulletproof-404s-on-rails/"/>
    <id>http://localhost:1313/2014/06/a-step-by-step-guide-to-bulletproof-404s-on-rails/</id>
    <updated>2014-06-20T00:00:00Z</updated>
    <content type="html">
      &amp;lt;h2 id=&amp;#34;step-1-configure-your-router-as-the-exceptions-app&amp;#34;&amp;gt;Step 1: Configure your router as the exceptions app&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Since Rails 3 you&amp;amp;rsquo;ve been able to configure an app to handle exceptions, which you want to point right at your router. To do this, add the following to &amp;lt;code&amp;gt;config/application.rb&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;exceptions_app &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;routes
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;step-2-add-a-catch-all-route&amp;#34;&amp;gt;Step 2: Add a catch-all route&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Make sure this is the last rule in &amp;lt;code&amp;gt;config/routes.rb&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;routes&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;draw &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  get &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;*any&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;via&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:all&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;to&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;errors#not_found&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;With this, any requested path — whatever the request type — that doesn&amp;amp;rsquo;t match the previous routing rules will match this rule. The &amp;lt;code&amp;gt;*any&amp;lt;/code&amp;gt; path starts with the &amp;lt;code&amp;gt;*&amp;lt;/code&amp;gt; wildcard, so it will match anything. The &amp;lt;code&amp;gt;any&amp;lt;/code&amp;gt; part is arbitrary, but you have to put &amp;lt;em&amp;gt;something&amp;lt;/em&amp;gt; after the &amp;lt;code&amp;gt;*&amp;lt;/code&amp;gt; to make it work. I&amp;amp;rsquo;m sure there&amp;amp;rsquo;s a good reason why, but somebody else will have to explain it.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;step-3-implement-errorscontrollernot_found&amp;#34;&amp;gt;Step 3: Implement ErrorsController#not_found&amp;lt;/h2&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ErrorsController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;not_found&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    respond_to &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;html &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; render &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;status&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;404&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;rescue&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActionController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;UnknownFormat&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    render &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;status&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;404&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;nope&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;You may be wondering why I suggest rescuing &amp;lt;code&amp;gt;ActionController::UnknownFormat&amp;lt;/code&amp;gt; instead of adding a &amp;lt;code&amp;gt;format.any&amp;lt;/code&amp;gt; block to handle any non-html request types. The problem with &amp;lt;code&amp;gt;format.any&amp;lt;/code&amp;gt; is that it will only handle &amp;lt;em&amp;gt;known&amp;lt;/em&amp;gt; mime types. This is a-okay for 404&amp;amp;rsquo;ing &amp;lt;code&amp;gt;.png&amp;lt;/code&amp;gt;s, &amp;lt;code&amp;gt;.json&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;.xml&amp;lt;/code&amp;gt;, etc., but it doesn&amp;amp;rsquo;t handle the real crazy stuff, like &amp;lt;code&amp;gt;wp-login.php&amp;lt;/code&amp;gt;. In other words, when it comes to catch-alls, &amp;lt;code&amp;gt;ActionController::UnknownFormat&amp;lt;/code&amp;gt; has a bigger glove than &amp;lt;code&amp;gt;format.any&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;step-4-add-a-view&amp;#34;&amp;gt;Step 4: Add a view&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Create &amp;lt;code&amp;gt;app/views/errors/not_found.html.erb&amp;lt;/code&amp;gt; and put your 404 page&amp;amp;rsquo;s markup in there. This will use the application layout by default, so your 404 page will fit in with the rest of your site&amp;amp;rsquo;s style.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;step-5-have-a-moscow-mule&amp;#34;&amp;gt;Step 5: Have a Moscow Mule&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Or an iced tea. Or some lemonade. Your call.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Rails 4: let specific actions be embedded as iframes</title>
    <link href="http://localhost:1313/2013/12/rails-4-let-specific-actions-be-embedded-as-iframes/"/>
    <id>http://localhost:1313/2013/12/rails-4-let-specific-actions-be-embedded-as-iframes/</id>
    <updated>2013-12-04T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Rails 4 added a default &amp;lt;code&amp;gt;X-Frame-Options&amp;lt;/code&amp;gt; HTTP header value of &amp;lt;code&amp;gt;SAMEORIGIN&amp;lt;/code&amp;gt;. This is good &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Clickjacking&amp;#34;&amp;gt;for security&amp;lt;/a&amp;gt;, because browsers use this header to decide whether or not your site can be &amp;lt;code&amp;gt;iframe&amp;lt;/code&amp;gt;d by other sites.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;However, sometimes you &amp;lt;em&amp;gt;do&amp;lt;/em&amp;gt; want a particular action to be embeddable in another site. If you know the site which embeds the action, you can simply change the header to explicitly allow it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;MyController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;my_embeddable_widget&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    response&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;headers&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;X-FRAME-OPTIONS&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;ALLOW-FROM http://example.com&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    render
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;If, instead, you want the action to be embeddable by any site on the web, just delete the header:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;MyController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;my_embeddable_widget&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    response&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;headers&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;delete &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;X-Frame-Options&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    render
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;For a single controller action, inlining these changes makes sense. If you&amp;amp;rsquo;re gonna allow multiple actions to be &amp;lt;code&amp;gt;iframe&amp;lt;/code&amp;gt;d, you can put the logic in a method and call it from an &amp;lt;code&amp;gt;after_filter&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActionController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;private&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;allow_iframe&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    response&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;headers&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;delete &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;X-Frame-Options&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;MyController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  after_filter &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:allow_iframe&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;only&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:my_embeddable_widget&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;my_embeddable_widget&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    render
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;You can get even fancier if you want, but in my experience YAGNI.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Make ActiveAdmin and FriendlyId play nice</title>
    <link href="http://localhost:1313/2013/11/make-activeadmin-and-friendlyid-play-nice/"/>
    <id>http://localhost:1313/2013/11/make-activeadmin-and-friendlyid-play-nice/</id>
    <updated>2013-11-15T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://activeadmin.info&amp;#34;&amp;gt;ActiveAdmin&amp;lt;/a&amp;gt; and &amp;lt;a href=&amp;#34;https://github.com/norman/friendly_id&amp;#34;&amp;gt;FriendlyId&amp;lt;/a&amp;gt; are both handy gems, but they don&amp;amp;rsquo;t play nice together out of the box.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This is because &amp;lt;code&amp;gt;FriendlyId&amp;lt;/code&amp;gt;&amp;amp;rsquo;d models don&amp;amp;rsquo;t follow the default &amp;lt;code&amp;gt;to_param&amp;lt;/code&amp;gt; style of id-based lookups which ActiveAdmin expects.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;However, the two are easily reconciled by changing how ActiveAdmin fetches resources. Throw this in your ActiveAdmin initializer:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# config/initializers/active_admin.rb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveAdmin&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ResourceController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;class_eval &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;find_resource&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    id_field &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;id&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; scoped_collection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;is_a? &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;FriendlyId&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      id_field &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; scoped_collection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;friendly_id_config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;query_field
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    scoped_collection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;find_by! id_field &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; params&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That&amp;amp;rsquo;ll do it. You can alternatively define &amp;lt;code&amp;gt;find_resource&amp;lt;/code&amp;gt; inside each registered resource&amp;amp;rsquo;s &amp;lt;code&amp;gt;controller&amp;lt;/code&amp;gt; block if you want to be picky.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;There may be a better way to derive the &amp;lt;code&amp;gt;id_field&amp;lt;/code&amp;gt;, but I don&amp;amp;rsquo;t know it. Let me know if you do.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Your dev user should be really crazy</title>
    <link href="http://localhost:1313/2013/11/your-dev-user-should-be-really-crazy/"/>
    <id>http://localhost:1313/2013/11/your-dev-user-should-be-really-crazy/</id>
    <updated>2013-11-08T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Up until now, my dev user on systems I&amp;amp;rsquo;m building has been pretty predictable. Something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;User&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;create &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;first_name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Jerod&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;last_name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Santo&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;There are other attributes like email, password, etc., but you get the point.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This is convenient, but pretty short sighted. I&amp;amp;rsquo;ll use this account for the duration of development. Why not make it more useful by populating its attributes with crazy data?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This user is much more useful:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;User&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;create &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;first_name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;lt;script&amp;amp;gt;alert(&amp;amp;#39;OHAI!&amp;amp;#39;);&amp;amp;lt;/script&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;last_name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;朋美&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now we&amp;amp;rsquo;re talking! This user will help catch any &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Cross-site_scripting&amp;#34;&amp;gt;XSS&amp;lt;/a&amp;gt; vulnerabilities and ensure that unicode text is rendered properly.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I know, I know. Your apps are never subject to such fails because you&amp;amp;rsquo;re smart and good looking to boot. But why not?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Ruby Quick Tip: Easily Count Occurrences of Array Elements</title>
    <link href="http://localhost:1313/2013/10/ruby-quick-tip-easily-count-occurrences-of-array-elements/"/>
    <id>http://localhost:1313/2013/10/ruby-quick-tip-easily-count-occurrences-of-array-elements/</id>
    <updated>2013-10-24T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Have you ever needed to see how many times each element occurs in an array? Perhaps sort the elements by occurrence? Using an awesome feature of &amp;lt;code&amp;gt;Hash.new&amp;lt;/code&amp;gt; makes this task quick and easy.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;Hash.new&amp;lt;/code&amp;gt; takes an argument that will be returned when a key that doesn&amp;amp;rsquo;t correspond to a hash entry is accessed. Basically, a default value for all hash keys.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;With that knowledge in hand, we can take our array of elements and easily get occurrence counts for each unique element. We just need to initialize each key to 0 and then increment the count each time the element appears.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Let&amp;amp;rsquo;s trump up an array of words, shall we?&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;words &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%w(how much wood would a wood chuck chuck)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Good enough. Now, we want to know how many times each word occurs:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;counts &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Hash&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;words&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;word&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  counts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;word&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# {&amp;amp;#34;how&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;much&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;wood&amp;amp;#34;=&amp;amp;gt;2, &amp;amp;#34;could&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;a&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;chuck&amp;amp;#34;=&amp;amp;gt;2}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Isn&amp;amp;rsquo;t that easy? Here&amp;amp;rsquo;s a bonus tip. If we use &amp;lt;code&amp;gt;each_with_object&amp;lt;/code&amp;gt; we can turn that baby into a one-liner:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;words&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each_with_object&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Hash&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;word&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;counts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; counts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;word&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# {&amp;amp;#34;how&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;much&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;wood&amp;amp;#34;=&amp;amp;gt;2, &amp;amp;#34;could&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;a&amp;amp;#34;=&amp;amp;gt;1, &amp;amp;#34;chuck&amp;amp;#34;=&amp;amp;gt;2}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;From this point sorting or filtering our elements by occurrence count should be a breeze. Enjoy!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>You don&#39;t have to annotate your AngularJS injections anymore</title>
    <link href="http://localhost:1313/2013/08/you-dont-have-to-annotate-your-angularjs-injections-anymore/"/>
    <id>http://localhost:1313/2013/08/you-dont-have-to-annotate-your-angularjs-injections-anymore/</id>
    <updated>2013-08-02T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;One unfortunate drawback of how &amp;lt;a href=&amp;#34;http://angularjs.org&amp;#34;&amp;gt;AngularJS&amp;amp;rsquo;s&amp;lt;/a&amp;gt; dependency injection works is that it breaks when your code is minified. The reason it fails is that minification renames variables that Angular uses to resolve the dependencies.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So the natural way of injecting dependencies into a controller doesn&amp;amp;rsquo;t work:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-js&amp;#34; data-lang=&amp;#34;js&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;controller&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;MyCtrl&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$scope&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$http&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;MyService&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The minifier renames &amp;lt;code&amp;gt;$scope&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;$http&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;MyService&amp;lt;/code&amp;gt; (in order to, ahem, minify them) and the injection breaks.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The old answer to this problem (which you will still see people promoting) is to &amp;amp;ldquo;annotate&amp;amp;rdquo; your injections. At every injection point you pass in an array that resolves the variable/injection pair manually.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The above code changes to this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-js&amp;#34; data-lang=&amp;#34;js&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;controller&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;MyCtrl&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;$scope&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;$http&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;MyService&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$scope&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$http&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;MyService&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{}]);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;I&amp;amp;rsquo;m sorry but that code is just crazy town.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Thankfully, there is no longer a good reason to manually annotate your injections. Just make the computer do it for you by utilizing Brian Ford&amp;amp;rsquo;s excellent &amp;lt;a href=&amp;#34;https://github.com/btford/ngmin&amp;#34;&amp;gt;ngmin&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The tool is available as a grunt task via &amp;lt;a href=&amp;#34;https://github.com/btford/grunt-ngmin&amp;#34;&amp;gt;grunt-ngmin&amp;lt;/a&amp;gt; and in Rails&amp;amp;rsquo; asset pipeline via &amp;lt;a href=&amp;#34;http://rubygems.org/gems/ngmin-rails&amp;#34;&amp;gt;ngmin-rails&amp;lt;/a&amp;gt; so you can integrate it easily into your build process and avoid the headache and ugliness that is manual dependency injection annotations.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So please do.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>CoffeeScript Classes Play Nicely with AngularJS Factories</title>
    <link href="http://localhost:1313/2013/07/coffeescript-classes-play-nicely-with-angularjs-factories/"/>
    <id>http://localhost:1313/2013/07/coffeescript-classes-play-nicely-with-angularjs-factories/</id>
    <updated>2013-07-28T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;One of CoffeeScript&amp;amp;rsquo;s many virtues is built-in support for &amp;lt;a href=&amp;#34;http://coffeescript.org/#classes&amp;#34;&amp;gt;classes, inheritance, and super&amp;lt;/a&amp;gt; via the &amp;lt;code&amp;gt;class&amp;lt;/code&amp;gt; keyword. One of AngularJS&amp;amp;rsquo;s many virtues is built-in &amp;lt;a href=&amp;#34;http://docs.angularjs.org/guide/dev_guide.services.creating_services&amp;#34;&amp;gt;dependency injection of services&amp;lt;/a&amp;gt; via factory functions.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;How do you use CoffeeScript classes and AngularJS factories together? There is no trickery needed at all. You just define your class like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-coffeescript&amp;#34; data-lang=&amp;#34;coffeescript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;factory&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Ticket&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Ticket&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;constructor: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;(@price, @count) -&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;amount: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;            &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;@price&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;parseInt&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;@count&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;10&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now you can inject a &amp;lt;code&amp;gt;Ticket&amp;lt;/code&amp;gt; factory into, for instance, your controller context and use it like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-coffeescript&amp;#34; data-lang=&amp;#34;coffeescript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;app&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;controller&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;MainCtrl&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;($scope, Ticket) -&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$scope.ticket = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;new&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Ticket&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;100&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;And use it in a template if you like:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-html&amp;#34; data-lang=&amp;#34;html&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;{% raw %}
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ng-controller&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;MainCtrl&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;p&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;That&amp;amp;#39;ll be {{ticket.amount()}} pesos, amigo&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;p&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;{% endraw %}
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Thanks for playing nice, you two.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Easy &#39;Share-Nothing&#39; WordPress Blog Syndication on Rails</title>
    <link href="http://localhost:1313/2013/03/easy-share-nothing-wordpress-blog-syndication-on-rails/"/>
    <id>http://localhost:1313/2013/03/easy-share-nothing-wordpress-blog-syndication-on-rails/</id>
    <updated>2013-03-01T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;The new &amp;lt;a href=&amp;#34;http://omahype.com&amp;#34;&amp;gt;Omahype&amp;lt;/a&amp;gt;, which is a custom Rails-based CMS centered around Omaha-area events, has a separate blog that runs on WordPress.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This is not all that uncommon. WordPress is great for blogging. Developing (or extending) a custom Rails blogging solution is of little value unless you&amp;amp;rsquo;re doing some crazy custom stuff.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Despite the blog and main site being on different platforms, there was still the need to integrate the blog content into every page of the Rails site.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/omahype-blog.jpg&amp;#34; alt=&amp;#34;&amp;amp;lsquo;From the blog&amp;amp;rsquo; is in the footer of every page&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;There are a handful of ways to skin this cat, but most of them require WordPress and Rails to have things in common: share a database, share a server, and/or share a domain.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Share-Something.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Omahype is hosted on a &amp;lt;a href=&amp;#34;http://heroku.com&amp;#34;&amp;gt;&amp;amp;lsquo;Share-Nothing&amp;amp;rsquo; platfom&amp;lt;/a&amp;gt; and the WordPress blog was already up and running on Media Temple, so we needed an easy &amp;amp;lsquo;Share-Nothing&amp;amp;rsquo; solution.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here&amp;amp;rsquo;s how we do it:&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-syndication&amp;#34;&amp;gt;The Syndication&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;This part is the easiest. WordPress provides syndicated content out of the box via &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/RSS&amp;#34;&amp;gt;RSS&amp;lt;/a&amp;gt; which means we don&amp;amp;rsquo;t have to resort to page scraping or the like.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Omahype&amp;amp;rsquo;s standard RSS feed is located &amp;lt;a href=&amp;#34;http://blog.omahype.com/feed/&amp;#34;&amp;gt;here&amp;lt;/a&amp;gt;, but we had some simplifications and customizations of the feed&amp;amp;rsquo;s content in mind, so we created a special one just for Rails to consume.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://blog.omahype.com/recent/&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/omahype-rss-pic.jpg&amp;#34; alt=&amp;#34;&amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This &amp;lt;a href=&amp;#34;http://blog.omahype.com/recent/&amp;#34;&amp;gt;special feed&amp;lt;/a&amp;gt; provides exactly what we need and nothing else: The 4 most recent posts in a format that is easier to repurpose than the main feed.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;pulling-it-in&amp;#34;&amp;gt;Pulling It In&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;The syndicated blog content is a value-add to the core features of Omahype&amp;amp;rsquo;s event calendars so we definitely don&amp;amp;rsquo;t want it to slow down page loads.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Because of this, we decided to pull the content in outside of Rails&amp;amp;rsquo; main request / response lifecycle. This is done via jQuery&amp;amp;rsquo;s &amp;lt;code&amp;gt;$.get&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;$.parseXML&amp;lt;/code&amp;gt;&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here&amp;amp;rsquo;s our CoffeeScript source which generates the requisite JavaScript to pull in the content and add it to the DOM:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-coffeescript&amp;#34; data-lang=&amp;#34;coffeescript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;loadBlogPosts: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;get&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://blog.omahype.com/recent/&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;(data) -&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;doc = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;parseXML&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;data&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;doc&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;item&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;            &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;each&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$item = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;this&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;title = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$item&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;title&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;link = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$item&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;link&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;image = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$item&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;image&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;description = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$item&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;description&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;categories = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$item&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;category&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;map&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;this&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;().&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;toLowerCase&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;classes = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;makeArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;categories&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;join&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34; &amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;image&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;length&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;classes&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34; hasImage&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;description = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;lt;img src=&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;image&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;&amp;amp;gt;&amp;amp;lt;/img&amp;amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;description&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;html = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;lt;a href=&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;link&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39; title=&amp;amp;#39;Read Article&amp;amp;#39;&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                    &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;lt;article class=&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;classes&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;&amp;amp;gt;&amp;amp;lt;h1&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;title&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;/h1&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                    &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;lt;p&amp;amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;description&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;/p&amp;amp;gt;&amp;amp;lt;/article&amp;amp;gt;&amp;amp;lt;/a&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;#blog&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;append&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;html&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;            &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;promise&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;().&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;done&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;                &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Omahype&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;equalHeight&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;section#blog article&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Much of that is implementation details specific to how we want the content formatted, but the gist of it is you:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;make the &amp;lt;code&amp;gt;GET&amp;lt;/code&amp;gt; request for the content,&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;parse the raw data into &amp;lt;code&amp;gt;doc&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;find the &amp;lt;code&amp;gt;item&amp;lt;/code&amp;gt; elements in the &amp;lt;code&amp;gt;doc&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;loop over them, extracting their contents and putting them in the page&amp;lt;sup id=&amp;#34;fnref:2&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:2&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;2&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;If you&amp;amp;rsquo;ve been reading closely, and you&amp;amp;rsquo;ve noticed that our &amp;amp;lsquo;Share-Nothing&amp;amp;rsquo; scenario means that Rails and WordPress don&amp;amp;rsquo;t event share a domain, then you&amp;amp;rsquo;ll notice a problem with the code above.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;GET&amp;lt;/code&amp;gt; request will fail due to JavaScript&amp;amp;rsquo;s &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Same_origin_policy&amp;#34;&amp;gt;Same origin policy&amp;lt;/a&amp;gt;. Bummer.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;There are two ways to get around this problem.&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;We could configure &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Cross-origin_resource_sharing&amp;#34;&amp;gt;CORS&amp;lt;/a&amp;gt; on the WordPress server to allow requests from omahype.com&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;We could introduce a proxy on the Rails side and serve the feed from there&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;I chose the latter option because it brings with it an easy win: caching.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-middle-man&amp;#34;&amp;gt;The Middle Man&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;We need the &amp;lt;code&amp;gt;$.get&amp;lt;/code&amp;gt; to hit a URL on the Rails side, so we add a &amp;lt;code&amp;gt;ProxyController&amp;lt;/code&amp;gt; and route to it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# config/routes.rb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;get &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/proxy&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;to&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;proxy#index&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;as&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:proxy&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# app/controllers/proxy_controller.rb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;open-uri&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ProxyController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;index&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    feed &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;open&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://blog.omahype.com/recent/&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;read
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    render &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; feed
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;With this in hand, we just change the &amp;lt;code&amp;gt;$.get&amp;lt;/code&amp;gt; to point to our middle man:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-coffeescript&amp;#34; data-lang=&amp;#34;coffeescript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;loadBlogPosts: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;get&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/proxy&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;(data) -&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;            &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# ... snip ...
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Bada boom bada bing. The recent posts now load into our footer.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;However, every single page load will now make a subsequent request to the blog&amp;amp;rsquo;s RSS feed. That seems excessive since we&amp;amp;rsquo;re loading content that changes maybe a few times a day, maybe less.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Remember above when I said a proxy gives us an easy win? Here it is.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We can use Rails&amp;amp;rsquo; built-in cache to only fetch new content from WordPress at a set interval.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;To accomplish this, we change the &amp;lt;code&amp;gt;ProxyController&amp;lt;/code&amp;gt;&amp;amp;rsquo;s index action to look like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;index&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  feed &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;cache&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;fetch &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;blog-posts&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;expires_in&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;minutes &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;open&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://blog.omahype.com/recent/&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;read
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  render &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; feed
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now it&amp;amp;rsquo;s super fast when it hits the cache and doesn&amp;amp;rsquo;t have to hit WordPress all the time!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;And there you have it. Easy &amp;amp;lsquo;Share-Nothing&amp;amp;rsquo; WordPress blog syndication on Rails.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Wow, this post&amp;amp;rsquo;s title is extremely accurate ;)&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;Did you know jQuery has had built-in XML parsing since version 1.5? Seems like it should be a plugin to me (whereas $.parseJSON makes complete sense in core), but nevertheless it is exactly what we need for parsing RSS.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:2&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;This part is specifically messy and was &amp;lt;em&amp;gt;almost&amp;lt;/em&amp;gt; means for a templating solution, but I decided it wasn&amp;amp;rsquo;t worth it for this  single use.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:2&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>The Curious Case of ActiveRecord Matching Yesterday&#39;s Events Even Though I Told it Not To</title>
    <link href="http://localhost:1313/2013/02/the-curious-case-of-activerecord-matching-yesterdays-events-even-though-i-told-it-not-to/"/>
    <id>http://localhost:1313/2013/02/the-curious-case-of-activerecord-matching-yesterdays-events-even-though-i-told-it-not-to/</id>
    <updated>2013-02-19T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;We uncovered a Strange Thing when working on &amp;lt;a href=&amp;#34;http://omahype.com&amp;#34;&amp;gt;Omahype&amp;amp;rsquo;s&amp;lt;/a&amp;gt; event listings.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;Omahype is a curated events calendar helping to foster art and culture in Omaha and the surrounding areas. If you&amp;amp;rsquo;re in the area, you should definitely check it out!&amp;lt;/div&amp;gt;
&amp;lt;h2 id=&amp;#34;the-strange-thing&amp;#34;&amp;gt;The Strange Thing&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Omahype&amp;amp;rsquo;s &amp;lt;code&amp;gt;Event&amp;lt;/code&amp;gt;s, which are ActiveRecord models, have a &amp;lt;code&amp;gt;start_time&amp;lt;/code&amp;gt; field which we use to show people when the event starts.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We also use this field to distinguish past events from upcoming ones. The site&amp;amp;rsquo;s &amp;lt;a href=&amp;#34;http://omahype.com/category/music&amp;#34;&amp;gt;category views&amp;lt;/a&amp;gt; call &amp;lt;code&amp;gt;Event.upcoming&amp;lt;/code&amp;gt; to get only events from today and into the future. It looks something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;upcoming&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  where&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;start_time &amp;amp;gt;= ?&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Date&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;today&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;order&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;start_time asc&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That looked pretty good to me, but once the site was in production we noticed a problem.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/test-in-production.png&amp;#34; alt=&amp;#34;&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The category views were displaying last night&amp;amp;rsquo;s events in addition to the ones we wanted. Troublesome. I added a test case&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt; which reproduces the behavior:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;describe &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Event&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  describe &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;.upcoming&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    it &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;doesn&amp;amp;#39;t match events from last night&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        last_night &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Time&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;now&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;beginning_of_day &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;hours
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        create &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:event&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;start_time&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; last_night
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        expect&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Event&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;upcoming&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;count&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to eq &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That test failed, but why is that?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The query says that the start time must be greater than or equal to today&amp;amp;rsquo;s date and that&amp;amp;rsquo;s surely not the case with last night&amp;amp;rsquo;s events. Or is it?&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-reason&amp;#34;&amp;gt;The Reason&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;ActiveRecord stores all timestamps in the database as &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Coordinated_Universal_Time&amp;#34;&amp;gt;UTC&amp;lt;/a&amp;gt; and converts back and forth between the applicable time zone in Ruby land before executing queries.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Usually this works just fine with timestamp comparisons because the offsets are adjusted before the database makes the comparison, but it doesn&amp;amp;rsquo;t work so well when you are comparing against just a date.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Omahype only tracks events in Omaha so we have Rails configured to use US Central Time (CST):&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# config/application.rb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;Omahype&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;time_zone &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Central Time (US &amp;amp;amp; Canada)&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The problem is that CST is UTC-6 (or -5 during daylight savings), so any event created with a &amp;lt;code&amp;gt;start_time&amp;lt;/code&amp;gt; of 6pm or later will be stored in the database as bright and early on the following morning.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;To be clear, when we do this in Ruby:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Event&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;create &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;start_time&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Time&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;parse&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;2013-02-19 20:00:00&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;In the database (Postgres, in our case), it will be stored as a &amp;lt;a href=&amp;#34;http://www.postgresql.org/docs/9.2/static/datatype-datetime.html&amp;#34;&amp;gt;timestamp without time zone&amp;lt;/a&amp;gt; of &amp;amp;ldquo;2013-02-20 02:00:00&amp;amp;rdquo;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;See the problem?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In UTC that event does start today even though in CST it starts last night. ActiveRecord can adjust the right-hand side of the comparison to UTC before executing the query, but it can&amp;amp;rsquo;t do anything about the left-hand side.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Converting the right-hand side to UTC doesn&amp;amp;rsquo;t help us because the date remain the same.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Bummer.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-not-so-great-solution&amp;#34;&amp;gt;The (not so great) Solution&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;We decided to convert the left-hand side of our comparison from UTC to CST.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In Postgres you can use &amp;lt;code&amp;gt;AT TIME ZONE&amp;lt;/code&amp;gt; to explicitly set the time zone which applies to a timestamp column. With this in hand, I adjusted the method to look like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;upcoming&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  where&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;start_time at time zone &amp;amp;#39;CST&amp;amp;#39; &amp;amp;gt;= ?&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Date&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;today&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;order&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;start_time asc&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Unfortunately, my test was still red.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This confused me to no end, but it turns out that &amp;lt;code&amp;gt;AT TIME ZONE&amp;lt;/code&amp;gt; only converts the time value when it is applied to a &amp;lt;code&amp;gt;timestamp with time zone&amp;lt;/code&amp;gt; field not a &amp;lt;code&amp;gt;timestamp without time zone&amp;lt;/code&amp;gt; field, which &amp;lt;code&amp;gt;start_time&amp;lt;/code&amp;gt; is.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here&amp;amp;rsquo;s &amp;lt;a href=&amp;#34;http://www.postgresql.org/docs/9.2/static/functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT&amp;#34;&amp;gt;their chart&amp;lt;/a&amp;gt; of how it works for different field types:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.postgresql.org/docs/9.2/static/functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/pg-at-time-zone-chart.jpg&amp;#34; alt=&amp;#34;Click to see actual docs if it is too squished for your eyes&amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So I had to first convert &amp;lt;code&amp;gt;start_time&amp;lt;/code&amp;gt; to a &amp;lt;code&amp;gt;timestamp with time zone&amp;lt;/code&amp;gt; of UTC and then convert it from UTC to CST. Like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;upcoming&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  where&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;start_time at time zone &amp;amp;#39;UTC&amp;amp;#39; at time zone &amp;amp;#39;CST&amp;amp;#39; &amp;amp;gt;= ?&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Date&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;today&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;order&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;start_time asc&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That is pretty ugly if you ask me, but the test was green.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Finally.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-alternatives-&amp;#34;&amp;gt;The Alternatives (?)&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;There are a bevy of problems that I have with this solution.&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;
&amp;lt;p&amp;gt;I hardcoded &amp;amp;lsquo;CST&amp;amp;rsquo; into the query, which is okay for this app but would not work if we were switching time zones based on user location or any other criteria.&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;
&amp;lt;p&amp;gt;The two calls to &amp;lt;code&amp;gt;at time zone&amp;lt;/code&amp;gt; slow down the query by a smidgeon. Not much, but enough to not like it.&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;
&amp;lt;p&amp;gt;Other finder methods will have to also use this workaround or they, too, will return bad results.&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;d love to hear of others way to tackle this problem. One thing I thought of would be to store a separate &amp;lt;code&amp;gt;start_date&amp;lt;/code&amp;gt; field alongside the &amp;lt;code&amp;gt;start_time&amp;lt;/code&amp;gt;. That would make all comparisons apples-to-apples (dates-to-dates), but that is inelegant because it requires us to manage the two fields in the code and ensure they aren&amp;amp;rsquo;t different.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Perhaps there is a smarter way to perform the same type of query? Or maybe I&amp;amp;rsquo;m missing some obvious time zone conversion thing in ActiveRecord that obviates the need for db-side conversions?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Please let me know if you have any insight on this curious case!&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;I would have caught it sooner, but my original tests didn&amp;amp;rsquo;t cover the edges well enough. They used events from 10 days ago instead of last night.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Rate Limit POST Requests with Rack::Throttle</title>
    <link href="http://localhost:1313/2013/02/rate-limit-post-requests-with-rackthrottle/"/>
    <id>http://localhost:1313/2013/02/rate-limit-post-requests-with-rackthrottle/</id>
    <updated>2013-02-03T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/datagraph/rack-throttle&amp;#34;&amp;gt;Rack::Throttle&amp;lt;/a&amp;gt; is an awesome piece of Rack middleware for rate limiting your Rails / Sinatra / Rack app&amp;amp;rsquo;s clients.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;It ships with three rate limiting strategies out of the box: &amp;lt;a href=&amp;#34;https://github.com/datagraph/rack-throttle/blob/master/lib/rack/throttle/interval.rb&amp;#34;&amp;gt;Interval&amp;lt;/a&amp;gt;, &amp;lt;a href=&amp;#34;https://github.com/datagraph/rack-throttle/blob/master/lib/rack/throttle/hourly.rb&amp;#34;&amp;gt;Hourly&amp;lt;/a&amp;gt;, and &amp;lt;a href=&amp;#34;https://github.com/datagraph/rack-throttle/blob/master/lib/rack/throttle/daily.rb&amp;#34;&amp;gt;Daily&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;These strategies will serve 95% of people&amp;amp;rsquo;s needs, but you can also write your own strategy from scratch by subclassing the &amp;lt;a href=&amp;#34;https://github.com/datagraph/rack-throttle/blob/master/lib/rack/throttle/limiter.rb&amp;#34;&amp;gt;Limiter&amp;lt;/a&amp;gt; and implementing an &amp;lt;code&amp;gt;allowed?&amp;lt;/code&amp;gt; method.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In my experience, writing a strategy from scratch has not been necessary, but I have needed to extend the provided strategies a bit.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;For instance, I have an app where we want to limit writes per hour, but we don&amp;amp;rsquo;t care about reads. In this case, I just subclassed the &amp;lt;a href=&amp;#34;https://github.com/datagraph/rack-throttle/blob/master/lib/rack/throttle/hourly.rb&amp;#34;&amp;gt;Hourly&amp;lt;/a&amp;gt; strategy and made mine allow anything that isn&amp;amp;rsquo;t a POST request.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;My subclass is crazy simple:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;Rack&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;Throttle&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;HourlyPosts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Hourly&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;allowed?&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;request&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; request&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;request_method &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;POST&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;super&amp;lt;/span&amp;gt; request
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Then I invoke it just like I&amp;amp;rsquo;d invoke the default hourly strategy:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;use &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rack&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Throttle&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;HourlyPosts&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;max&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;10&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;My app doesn&amp;amp;rsquo;t allow updating (PUT) or destroying (DELETE) records, but it&amp;amp;rsquo;d be trivial to modify the subclass to account for them as well.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I love libraries like Rack::Throttle with small, simple interfaces that are easily extended. It also provides a plethora of options for storage, such as in-memory, gdbm, Memcache, or Redis.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Highly recommended!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Fix Rails-API Oauth2 CSRF Errors On Rails 3.2.9&#43;</title>
    <link href="http://localhost:1313/2013/02/fix-rails-api-oauth2-csrf-errors-on-rails-3.2.9-/"/>
    <id>http://localhost:1313/2013/02/fix-rails-api-oauth2-csrf-errors-on-rails-3.2.9-/</id>
    <updated>2013-02-01T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;If you &amp;lt;em&amp;gt;happen&amp;lt;/em&amp;gt; to find yourself using &amp;lt;a href=&amp;#34;https://github.com/rails-api/rails-api&amp;#34;&amp;gt;Rails-API&amp;lt;/a&amp;gt;, as I am. And you &amp;lt;em&amp;gt;happen&amp;lt;/em&amp;gt; to be interacting with sundry &amp;lt;a href=&amp;#34;https://github.com/intridea/omniauth-oauth2&amp;#34;&amp;gt;Oauth2&amp;lt;/a&amp;gt; providers via &amp;lt;a href=&amp;#34;https://github.com/intridea/omniauth&amp;#34;&amp;gt;Omniauth&amp;lt;/a&amp;gt;, as I am. And you &amp;lt;em&amp;gt;happen&amp;lt;/em&amp;gt; to be getting CSRF errors in your callback phase after upgrading Rails to anything higher than 3.2.8, as I was&amp;amp;hellip;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Boy do I have the post for you!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Rails-API excludes the session and cookie middleware by default&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;, but Omniauth needs them&amp;lt;sup id=&amp;#34;fnref:2&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:2&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;2&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;. In Rails 3.2.8 and below, you can get both working by picking a session store middleware and &amp;lt;code&amp;gt;use&amp;lt;/code&amp;gt;ing it in &amp;lt;code&amp;gt;config/application.rb&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# ... snip ... #&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;middleware&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;use &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;SessionStore&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;In Rails 3.2.9&#43;, however, this is insufficient. A change to how cookies are set in Rails 3.2.9 means you have to explicitly enable the &amp;lt;code&amp;gt;ActionDispatch::Cookies&amp;lt;/code&amp;gt; middleware as well in order to use session storage.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The reason it works in 3.2.8 is because that version relies on Rack&amp;amp;rsquo;s cookie setting code (which is always available), but in 3.2.9 it switched to using ActionDispatch&amp;amp;rsquo;s cookie setting code (which is not there unless using the middleware) instead.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So, you need to make your config look like this if you&amp;amp;rsquo;re using 3.2.9&#43;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# ... snip ... #&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;middleware&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;use &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActionDispatch&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Cookies&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# order matters!&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;middleware&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;use &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;SessionStore&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Oh, and don&amp;amp;rsquo;t forget to also pick the appropriate store in &amp;lt;code&amp;gt;config/initializers/session_store.rb&amp;lt;/code&amp;gt; or it still won&amp;amp;rsquo;t work:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;session_store &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:active_record_store&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;But I think that advice applies to &amp;lt;em&amp;gt;all&amp;lt;/em&amp;gt; versions of Rails :)&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;You can get all the Rails middleware by setting &amp;lt;code&amp;gt;config.api_only = false&amp;lt;/code&amp;gt;, but this kind of defeats the purpose of Rails-API, imo.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:2&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;It uses the session to store the &amp;lt;code&amp;gt;state&amp;lt;/code&amp;gt; param sent from the provider to ensure no CSRF tomfoolery.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:2&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Configuring redis-store / redis-rails on Heroku</title>
    <link href="http://localhost:1313/2013/01/configuring-redis-store-/-redis-rails-on-heroku/"/>
    <id>http://localhost:1313/2013/01/configuring-redis-store-/-redis-rails-on-heroku/</id>
    <updated>2013-01-23T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/jodosha/redis-store&amp;#34;&amp;gt;redis-store&amp;amp;rsquo;s&amp;lt;/a&amp;gt; redis-rails &amp;lt;a href=&amp;#34;http://rubygems.org/gems/redis-rails&amp;#34;&amp;gt;gem&amp;lt;/a&amp;gt; is awesome, but it can be a pain in the buttox to get configured on Heroku.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;That&amp;amp;rsquo;s because Heroku&amp;amp;rsquo;s ever-growing &amp;lt;a href=&amp;#34;https://addons.heroku.com/?q=redis&amp;#34;&amp;gt;list of Redis providers&amp;lt;/a&amp;gt; all use &amp;lt;a href=&amp;#34;https://devcenter.heroku.com/articles/config-vars&amp;#34;&amp;gt;config vars&amp;lt;/a&amp;gt; to set the Redis URL and redis-rails expects you to hook up the cache store and session store during the Rails application boot process, during which the config vars are unavailable.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here&amp;amp;rsquo;s how I got it working:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;First, delete &amp;lt;code&amp;gt;config/initializers/session_store.rb&amp;lt;/code&amp;gt;. It&amp;amp;rsquo;s not needed because we&amp;amp;rsquo;ll initialize the session store and the cache store in the same place.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Next, create &amp;lt;code&amp;gt;config/initializers/redis_store.rb&amp;lt;/code&amp;gt; and put this in it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;redis_url &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ENV&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;REDISCLOUD_URL&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;redis://127.0.0.1:6379/0/myapp&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;cache_store &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:redis_store&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; redis_url
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;session_store &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:redis_store&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;redis_server&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; redis_url
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That&amp;amp;rsquo;s all there is to it! A few notes:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;initializers are executed &amp;lt;em&amp;gt;after&amp;lt;/em&amp;gt; &amp;lt;code&amp;gt;application.rb&amp;lt;/code&amp;gt;, at which point Heroku&amp;amp;rsquo;s config vars are available&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;when the config var URL is nil, like in dev mode, it will revert to your local Redis server&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;I&amp;amp;rsquo;m using &amp;lt;a href=&amp;#34;https://addons.heroku.com/rediscloud&amp;#34;&amp;gt;RedisCloud&amp;lt;/a&amp;gt; as a Redis provider, but you&amp;amp;rsquo;ll need to adjust the config var to match whichever provider you choose&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Be sure to replace &amp;lt;code&amp;gt;MyApp&amp;lt;/code&amp;gt; with the name of your app ;)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;The &amp;lt;code&amp;gt;/myapp&amp;lt;/code&amp;gt; at the end of the fallback URL is optional. It adds a namespace to all Redis keys. I like this in dev mode because I can see all of my app&amp;amp;rsquo;s keys by doing a &amp;lt;code&amp;gt;keys myapp*&amp;lt;/code&amp;gt; in the Redis CLI. Feel free to omit&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;Happy caching!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Dynamic Routes to Static Pages on Rails</title>
    <link href="http://localhost:1313/2013/01/dynamic-routes-to-static-pages-on-rails/"/>
    <id>http://localhost:1313/2013/01/dynamic-routes-to-static-pages-on-rails/</id>
    <updated>2013-01-07T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;There&amp;amp;rsquo;s one thing that almost every web app and web site needs: &amp;lt;strong&amp;gt;static pages&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Many Rails users turn to a gem like Thoughtbot&amp;amp;rsquo;s &amp;lt;a href=&amp;#34;https://github.com/thoughtbot/high_voltage&amp;#34;&amp;gt;High Voltage&amp;lt;/a&amp;gt; to address this need. I tend not to do that for a few reasons:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;Size matters. When it comes to Gemfiles, smaller is better.&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Customization is inevitable, which often obviates any wins from going 3rd party&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;This is a trivial problem to solve&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;p&amp;gt;Having cleared that, how do we go about creating static pages in Rails?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Each static page needs 3 things:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;A controller action&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;A view&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;A route&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;Let&amp;amp;rsquo;s step through the process of providing these things for a static FAQ page.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Step 1&amp;lt;/strong&amp;gt; is easy peasy. Create a &amp;lt;code&amp;gt;PagesController&amp;lt;/code&amp;gt; and add an action method to it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;PagesController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;faq&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    render
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That call to &amp;lt;code&amp;gt;render&amp;lt;/code&amp;gt; is optional, but I think it&amp;amp;rsquo;s clearer than just leaving the method empty.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;Step 2&amp;lt;/strong&amp;gt; is required for any static page because it has to have &amp;lt;em&amp;gt;some&amp;lt;/em&amp;gt; content. Create a view file:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;$ touch app/views/pages/faq.html.erb
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The brute force way to handle &amp;lt;strong&amp;gt;Step 3&amp;lt;/strong&amp;gt; would be to manually add a &amp;lt;code&amp;gt;get&amp;lt;/code&amp;gt; route&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt; to &amp;lt;code&amp;gt;config/routes.rb&amp;lt;/code&amp;gt;, like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;routes&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;draw &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# other routes ...&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  get &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/faq&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;to&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;pages#faq&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;as&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:faq_page&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That works, but gets pretty un-DRY as we add more static pages. Instead, we can dynamically generate the routes based on the controller&amp;amp;rsquo;s action methods.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We put this in our routes in place of the manual route:&amp;lt;sup id=&amp;#34;fnref:2&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:2&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;2&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;routes&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;draw &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# other routes ...&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PagesController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;action_methods&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;action&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    get &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;action&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;to&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;pages#&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;action&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;as&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;action&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;_page&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;From now on we can skip &amp;lt;strong&amp;gt;Step 3&amp;lt;/strong&amp;gt; when adding new static pages!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We are also dynamically naming these routes so we can use all of the related helper methods, like &amp;lt;code&amp;gt;faq_page_path&amp;lt;/code&amp;gt; and friends.&amp;lt;/p&amp;gt;
&amp;lt;h3 id=&amp;#34;good-not-great&amp;#34;&amp;gt;Good, not great&amp;lt;/h3&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;ve found this to be a &amp;lt;em&amp;gt;pretty good&amp;lt;/em&amp;gt; solution, but it&amp;amp;rsquo;s not ideal.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Ideally, we&amp;amp;rsquo;d be able to sniff out the view files and generate action methods for them, but this has never been enough of a pain point for me to dig in and come up with a solution.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;If you know how to get that done in an elegant fashion, please let me know!&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;you can also use &amp;lt;code&amp;gt;matches&amp;lt;/code&amp;gt;, but Rails 4 and beyond prefer &amp;lt;code&amp;gt;get&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;post&amp;lt;/code&amp;gt;, etc.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:2&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;Rails puts controllers&amp;amp;rsquo; &amp;lt;em&amp;gt;public&amp;lt;/em&amp;gt; instance methods into &amp;lt;code&amp;gt;action_methods&amp;lt;/code&amp;gt;, so any methods that you don&amp;amp;rsquo;t want having routes generated for need to be &amp;lt;code&amp;gt;protected&amp;lt;/code&amp;gt; or &amp;lt;code&amp;gt;private&amp;lt;/code&amp;gt;.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:2&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>A Handy Method to Share Data From Rails Controllers to Views Without Requiring Direct Instance Variable Access</title>
    <link href="http://localhost:1313/2012/12/a-handy-method-to-share-data-from-rails-controllers-to-views-without-requiring-direct-instance-variable-access/"/>
    <id>http://localhost:1313/2012/12/a-handy-method-to-share-data-from-rails-controllers-to-views-without-requiring-direct-instance-variable-access/</id>
    <updated>2012-12-18T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Rails&amp;amp;rsquo; method of sharing data between controllers and views via instance variables bothers many developers. For the uninitiated, a Rails controller method like this one&amp;amp;hellip;&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;EventsController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;index&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@events&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Event&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;scoped
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;&amp;amp;hellip; makes the &amp;lt;code&amp;gt;@events&amp;lt;/code&amp;gt; instance variable accessible to the rendered view.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This bugs me, too. My beefs with it are:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;It is counterintuitive. Why would an &amp;lt;em&amp;gt;instance&amp;lt;/em&amp;gt; variable be how you make something available &amp;lt;em&amp;gt;outside&amp;lt;/em&amp;gt; the instance?&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;It couples the view and the controller more than necessary, shedding Ruby&amp;amp;rsquo;s encapsulation strength of having method calls and ivar accessors identical.&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Views and partials have varying access to the instance variable, which is confusing.&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;p&amp;gt;Better would be explicitly exposing the events collection to views via a reader and helper method, like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;EventsController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;index&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@events&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Event&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;scoped
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;attr_reader&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:events&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  helper_method &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:events&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now all views can just call the &amp;lt;code&amp;gt;events&amp;lt;/code&amp;gt; method and not worry about the ivar.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This becomes cumbersome when you do it across many controllers and actions, so I use this handy method to &amp;amp;ldquo;automate&amp;amp;rdquo; the process to expose certain ivars to views:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActionController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# short hand for exposing a list of ivars to view objects&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;exposes&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;ivars&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    ivars&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;ivar&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;attr_reader&amp;lt;/span&amp;gt; ivar&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_sym
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      helper_method ivar&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_sym
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The method takes an arbitrary list of ivar names. Using it, the example  controller class looks like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;EventsController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  exposes &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:events&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;index&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@events&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Event&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;scoped
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Unfortunately, the view &amp;lt;strong&amp;gt;can&amp;lt;/strong&amp;gt; still access &amp;lt;code&amp;gt;@events&amp;lt;/code&amp;gt;, but it&amp;amp;rsquo;s a step in the right direction.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;m sure there are ways to stop direct access of instance variables from views, but I haven&amp;amp;rsquo;t gotten that drastic yet.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;ve gotten a lot of mileage out of this method. Perhaps you will too.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Capybara and Poltergeist: Snap!</title>
    <link href="http://localhost:1313/2012/12/capybara-and-poltergeist-snap/"/>
    <id>http://localhost:1313/2012/12/capybara-and-poltergeist-snap/</id>
    <updated>2012-12-11T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I&amp;amp;rsquo;ve gotten a lot of mileage out of &amp;lt;a href=&amp;#34;rspec.info&amp;#34;&amp;gt;RSpec&amp;lt;/a&amp;gt; plus &amp;lt;a href=&amp;#34;http://jnicklas.github.com/capybara/&amp;#34;&amp;gt;Capybara&amp;lt;/a&amp;gt; for integration testing my Ruby apps lately.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.flickr.com/photos/gseloff/4661719163/&amp;#34; title=&amp;#34;unNative Texan by gseloff, on Flickr&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://farm5.staticflickr.com/4036/4661719163_8668525d0f.jpg&amp;#34; width=&amp;#34;500&amp;#34; height=&amp;#34;393&amp;#34; alt=&amp;#34;obligatory Capybara pic&amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Executing JavaScript with Capybara used to be a pain, but I recently switched from &amp;lt;a href=&amp;#34;https://github.com/thoughtbot/capybara-webkit&amp;#34;&amp;gt;capybara-webkit&amp;lt;/a&amp;gt; to &amp;lt;a href=&amp;#34;https://github.com/jonleighton/poltergeist&amp;#34;&amp;gt;Poltergeist&amp;lt;/a&amp;gt; as my JS test driver.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Poltergeist uses &amp;lt;a href=&amp;#34;http://phantomjs.org/&amp;#34;&amp;gt;PhantomJS&amp;lt;/a&amp;gt;, which in my experience is faster than capybara-webkit and easier to install.&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/poltergeist.png&amp;#34; alt=&amp;#34;Sadly, Sam Raimi will be subjecting Poltergeist to the ole&amp;amp;rsquo; Hollywood remake&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Poltergeist supports the required Capybara driver API as well as a few additional features such as taking screenshots.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I wrote a little helper method around taking screenshots, which:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;generates a name for the output file (because I usually don&amp;amp;rsquo;t care)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;puts the file in the trash for me (or in /tmp if there is no trash)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;renders the entire page (overridable when I just want the viewport)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;opens it in Preview (or whatever the default app for .png is)&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;Not ground breaking, but pretty cool in practice. I call it &amp;lt;code&amp;gt;snap!&amp;lt;/code&amp;gt;.&amp;lt;sup id=&amp;#34;fnref:2&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:2&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;2&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt; Here&amp;amp;rsquo;s the method:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;snap!&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;options&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{})&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  path &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; options&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;fetch &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:path&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;~/.Trash&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  file &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; options&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;fetch &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:file&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Time&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;now&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_i&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;.png&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  full &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; options&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;fetch &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:full&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  path &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;expand_path path
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  path &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/tmp&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;exists?&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;path&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  uri &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;join path&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; file
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  page&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;driver&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;render uri&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;full&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; full
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;system&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;open &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;uri&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Drop it anywhere that RSpec will load it&amp;lt;sup id=&amp;#34;fnref:3&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:3&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;3&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt; and use it in your integration tests when your JavaScript is misbehaving:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;feature &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;search autocomplete&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  scenario &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;from the homepage&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;js&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    visit &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    fill_in &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;search&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;with&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Jero&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    snap!
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    expect&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;page&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to have_content &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Jerod Santo&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;In this example, you could visually inspect whether the autocomplete is just not showing up at all or if it &amp;lt;em&amp;gt;is&amp;lt;/em&amp;gt; showing up and just has the wrong content in it.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;A fringe benefit of using the &amp;lt;code&amp;gt;snap!&amp;lt;/code&amp;gt; method is that it calls &amp;lt;code&amp;gt;page.driver.render&amp;lt;/code&amp;gt;, which will raise an error when the active driver doesn&amp;amp;rsquo;t have the method.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Capybara&amp;amp;rsquo;s default driver, RackTest, doesn&amp;amp;rsquo;t have it so you&amp;amp;rsquo;ll know right away if your test is just failing because you forgot the &amp;lt;code&amp;gt;js: true&amp;lt;/code&amp;gt; flag in the enclosing block.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;That one has bit me more than once!&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;PhantomJS bundles Qt so you don&amp;amp;rsquo;t have to install it yourself&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:2&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;m using the &amp;lt;code&amp;gt;!&amp;lt;/code&amp;gt; bang suffix for no other reason then it makes the method more fun to call&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:2&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:3&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;when using rspec-rails you can just drop it in &amp;lt;code&amp;gt;spec/support&amp;lt;/code&amp;gt;&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:3&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>A Domainr CLI in Less Than 15 Lines of Ruby</title>
    <link href="http://localhost:1313/2012/11/a-domainr-cli-in-less-than-15-lines-of-ruby/"/>
    <id>http://localhost:1313/2012/11/a-domainr-cli-in-less-than-15-lines-of-ruby/</id>
    <updated>2012-11-27T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;In 2009 I wrote a brief &amp;lt;a href=&amp;#34;/2009/05/see-which-twitterers-dont-follow-youback-in-less-than-15-lines-of-ruby/&amp;#34;&amp;gt;series&amp;lt;/a&amp;gt; &amp;lt;a href=&amp;#34;/2009/05/expand-your-twitter-network-in-less-than-15-lines-of-ruby/&amp;#34;&amp;gt;of&amp;lt;/a&amp;gt; &amp;lt;a href=&amp;#34;/2009/05/create-arbitrarily-sized-files-in-less-than-15-lines-of-ruby/&amp;#34;&amp;gt;posts&amp;lt;/a&amp;gt; where I&amp;amp;rsquo;d implement something in less than 15 lines of Ruby.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Yesterday I took &amp;lt;a href=&amp;#34;https://github.com/zachwill/dom&amp;#34;&amp;gt;Dom&amp;lt;/a&amp;gt;, a Python-based tool for accessing the &amp;lt;a href=&amp;#34;http://domai.nr&amp;#34;&amp;gt;Domainr&amp;lt;/a&amp;gt; API, and rewrote it as a tiny Ruby script&amp;lt;sup id=&amp;#34;fnref:1&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:1&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;. The script turned out to be so small that I thought I could squeeze it down to less than 15 lines. I was right&amp;lt;sup id=&amp;#34;fnref:2&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;#fn:2&amp;#34; class=&amp;#34;footnote-ref&amp;#34; role=&amp;#34;doc-noteref&amp;#34;&amp;gt;2&amp;lt;/a&amp;gt;&amp;lt;/sup&amp;gt;!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here it is, complete with colored output!&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# encoding: utf-8&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%w(json open-uri)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;lib&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; lib &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;abort&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Usage: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;basename &amp;lt;span style=&amp;#34;color:#6a737d&amp;#34;&amp;gt;__FILE__&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; [query]&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ARGV&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;first
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;response &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;open&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://domai.nr/api/json/search?q=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ARGV&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;first&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;read
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;JSON&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;parse&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;response&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;results&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;].&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;domain&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  symbol &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; domain&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;availability&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;available&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;\e&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;[32m✓&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;\e&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;[0m&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# 32 = green&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;else&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;\e&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;[31m✗&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;\e&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;[0m&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# 31 = red&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;symbol&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;domain&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;domain&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Drop that baby in your &amp;lt;code&amp;gt;PATH&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;chmod &#43;x&amp;lt;/code&amp;gt; it for all of your domain name reconnaissance needs.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/dom-example.png&amp;#34; alt=&amp;#34;&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The last time around I dropped the series because I ran out of ideas. I probably won&amp;amp;rsquo;t pick it back up again for real unless I have a good list of things to implement. Let me know if you have any ideas :)&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;footnotes&amp;#34; role=&amp;#34;doc-endnotes&amp;#34;&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li id=&amp;#34;fn:1&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;Dom is really cool, but Apple keeps breaking my Python install on OS upgrades. Also, one less dependency is one less dependency.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:1&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li id=&amp;#34;fn:2&amp;#34;&amp;gt;
&amp;lt;p&amp;gt;I had to reduce whitespace to an uncomfortable level to hit the 14 line threshold, but that includes the encoding comment, which is necessary to use the ✓ and ✗ symbols in the output.&amp;amp;#160;&amp;lt;a href=&amp;#34;#fnref:2&amp;#34; class=&amp;#34;footnote-backref&amp;#34; role=&amp;#34;doc-backlink&amp;#34;&amp;gt;&amp;amp;#x21a9;&amp;amp;#xfe0e;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;/div&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>An Algorithm to Reliably Identify Nested Substrings</title>
    <link href="http://localhost:1313/2012/11/an-algorithm-to-reliably-identify-nested-substrings/"/>
    <id>http://localhost:1313/2012/11/an-algorithm-to-reliably-identify-nested-substrings/</id>
    <updated>2012-11-12T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Regular expressions are great for matching many patterns, but they are usually not ideal when matching nested structures (recursive matching).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Most&amp;lt;/em&amp;gt; regular expression engines can handle a known level of recursion and &amp;lt;em&amp;gt;some&amp;lt;/em&amp;gt; engines can even handle arbitrary recursion, but the required expressions are often quite complex, which makes them difficult to read, modify, and extend.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Instead, you can use this simple algorithm to identify nested substrings.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-algorithm&amp;#34;&amp;gt;The Algorithm&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Traverse the string&amp;amp;rsquo;s characters one by one, applying the following logic:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;When a &amp;lt;strong&amp;gt;start delimiter&amp;lt;/strong&amp;gt; is met and there is not already a &amp;lt;strong&amp;gt;start index&amp;lt;/strong&amp;gt;, mark its index and increment the &amp;lt;strong&amp;gt;depth counter&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;When a &amp;lt;strong&amp;gt;start delimiter&amp;lt;/strong&amp;gt; is met and there is already a &amp;lt;strong&amp;gt;start index&amp;lt;/strong&amp;gt;, just increment the &amp;lt;strong&amp;gt;depth counter&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;When an &amp;lt;strong&amp;gt;end delimiter&amp;lt;/strong&amp;gt; is met and the &amp;lt;strong&amp;gt;start index&amp;lt;/strong&amp;gt; isn&amp;amp;rsquo;t marked, do nothing&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;When an &amp;lt;strong&amp;gt;end delimiter&amp;lt;/strong&amp;gt; is met and the &amp;lt;strong&amp;gt;start index&amp;lt;/strong&amp;gt; is marked, decrement the &amp;lt;strong&amp;gt;depth counter&amp;lt;/strong&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;When an &amp;lt;strong&amp;gt;end delimiter&amp;lt;/strong&amp;gt; is met, the &amp;lt;strong&amp;gt;start index&amp;lt;/strong&amp;gt; is marked, and the &amp;lt;strong&amp;gt;depth counter&amp;lt;/strong&amp;gt; is 0, store current &amp;lt;strong&amp;gt;start index&amp;lt;/strong&amp;gt; and &amp;lt;strong&amp;gt;end index&amp;lt;/strong&amp;gt;, then reset both indexes&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;p&amp;gt;The result is a series of start/end position tuples which are used to identify and return the nested substrings. How about an example?&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;an-example&amp;#34;&amp;gt;An Example&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Let&amp;amp;rsquo;s say that you want to take a string of text and remove any asides in it. An aside is defined as any text inside parantheses. Asides can be nested inside one another, but the goal is to remove them all.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So, this string of text:&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;ohai there (friend), do we (that&amp;amp;rsquo;s the royal we (duh!)) know what&amp;amp;rsquo;s up?&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;Would need to match:&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;(friend)&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;and&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;(that&amp;amp;rsquo;s the royal we (duh!))&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;Additionally, this string of text:&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;Well, 1) we should go to the store (grocery (not Hy-Vee)), and 2) we should buy stuff&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;Would need to match:&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;(grocery (not Hy-Vee))&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;Finally, this string of text:&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;This is, literally, an improper use of &amp;amp;ldquo;literally&amp;amp;rdquo;. Or is it?&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;Would need to not match anything. Let&amp;amp;rsquo;s implement the algorithm in Ruby. We&amp;amp;rsquo;ll call the method &amp;lt;code&amp;gt;asides&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;a-ruby-implementation&amp;#34;&amp;gt;A Ruby Implementation&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;First, we turn the spec above into executable RSpec code:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;describe &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;asides&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  it &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;matches multiple, nested substrings&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; asides &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;ohai there (friend), do we (that&amp;amp;#39;s the royal we (duh!)) know what&amp;amp;#39;s up?&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;first&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;(friend)&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;last&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;(that&amp;amp;#39;s the royal we (duh!))&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  it &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;does not match partial substrings&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; asides &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Well, 1) we should go to the store (grocery (not Hy-Vee)), and 2) we should buy stuff&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;first&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;(grocery (not Hy-Vee))&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;size&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  it &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;has no matches when there are no substrings&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; asides &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;This is, literally, an improper use of &amp;amp;#39;literally&amp;amp;#39;. Or is it?&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    matches&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;size&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Next, we write the &amp;lt;code&amp;gt;asides&amp;lt;/code&amp;gt; method, which implements the algorithm above, to make all three of these tests pass:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;asides&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;text&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; start_delimiter&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;(&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; end_delimiter&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;)&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  depth &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; index &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  asides &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;while&amp;lt;/span&amp;gt; index &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; text&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;length
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    char &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; text&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;index&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; char &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; start_delimiter
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      start &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; index
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      depth &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;elsif&amp;lt;/span&amp;gt; char &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; end_delimiter &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;amp;&amp;amp;amp;&amp;lt;/span&amp;gt; start
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      depth &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; depth &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        asides &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;amp;lt;&amp;lt;/span&amp;gt; text&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;start&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;..&amp;lt;/span&amp;gt;index&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        start &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;nil&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    index &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  asides
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;using-the-method&amp;#34;&amp;gt;Using The Method&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Now that the &amp;lt;code&amp;gt;asides&amp;lt;/code&amp;gt; method is returning a list of substrings, we just need to loop over them and remove them from the original text. This will achieve our original goal of removing all asides. Let&amp;amp;rsquo;s spec and write a &amp;lt;code&amp;gt;sans_asides&amp;lt;/code&amp;gt; method to do just that:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;describe &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;sans_asides&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  let&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:desired_text&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;well isn&amp;amp;#39;t that neat?&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  it &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;creates a string with all asides removed from the original&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    text &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;well (now) isn&amp;amp;#39;t that neat (if I do say so myself (and I do))?&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    sans_asides&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;text&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; desired_text
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  it &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;creates an identical string when original string has no asides&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    sans_asides&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;desired_text&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; desired_text
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;And the implementation:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;sans_asides&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;text&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  asides&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;text&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;aside&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; text&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;gsub! &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/\s?&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Regexp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;quote&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;aside&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  text
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Two things to note in this code:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;We&amp;amp;rsquo;re using the returned asides in a regular expression to also remove any leading whitespaces&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;We use &amp;lt;code&amp;gt;Regexp.quote&amp;lt;/code&amp;gt; so that any special characters in the aside are properly escaped&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;h2 id=&amp;#34;other-solutions&amp;#34;&amp;gt;Other Solutions&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;I think this mehod of nested substring identification is pretty solid. It is relatively easy to read and it decouples the identification step from the manipulation step.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;But surely there are other (better?) ways to skin this cat. How would you tackle it?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>A Common Gotcha When Using Ruby Regexps For Input Validation</title>
    <link href="http://localhost:1313/2012/10/a-common-gotcha-when-using-ruby-regexps-for-input-validation/"/>
    <id>http://localhost:1313/2012/10/a-common-gotcha-when-using-ruby-regexps-for-input-validation/</id>
    <updated>2012-10-19T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;One difficulty of using &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Regular_expression&amp;#34;&amp;gt;Regular Expressions&amp;lt;/a&amp;gt; effectively is that each language has their own little idiosyncrasies that can get you in to trouble.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Ruby has a particularly nasty Regexp foible around start-of-string and end-of-string anchors that confuses many of us, my-previous-self included.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In most languages, the &amp;lt;code&amp;gt;^&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;$&amp;lt;/code&amp;gt; special characters match the start and end of a &amp;lt;em&amp;gt;string&amp;lt;/em&amp;gt;, respectively. You can also opt in to multi-line mode where they will instead match the start and end of a &amp;lt;em&amp;gt;line&amp;lt;/em&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In Ruby, these characters start off in multi-line mode. This is not unknown. In fact, the Rails documentation &amp;lt;a href=&amp;#34;http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_format_of&amp;#34;&amp;gt;states this&amp;lt;/a&amp;gt; loud and clear:&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;Note: use \A and \Z to match the start and end of the string, ^ and $ match the start/end of a line.&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;Unfortunately, I still see this advice ignored in many codebases. Let&amp;amp;rsquo;s use an ActiveRecord validation example to see why this is so dangerous.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I present to you a recipes web app that lets users create and share dishes. Each dish has a name, which can be a string of alphanumeric characters. The model might look like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Dish&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  validates &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/^[\sa-z0-9]&#43;$/i&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;You may think that is Regexp says:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;start of string&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;one or more spaces or alphas or numerics&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;end of string&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;case insensitive&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;In Perl you would be correct. In Ruby; not so much. Let&amp;amp;rsquo;s give this a test drive and see if we can break it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dish&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Best Pizza Evar&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;valid?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# =&amp;amp;gt; true&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;So far so good, but that &amp;lt;code&amp;gt;$&amp;lt;/code&amp;gt; only matches to the end of a line. This also works:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dish&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Best Pizza Evar&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;\n&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; just kidding&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;valid?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# =&amp;amp;gt; true&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That&amp;amp;rsquo;s not good. Users can bypass our validation by inserting arbitrary &amp;lt;code&amp;gt;\n&amp;lt;/code&amp;gt; characters followed by whatever else they want. You know, like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dish&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Best Pizza Evar&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;\n&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;script&amp;amp;gt;alert(&amp;amp;#39;pwned!&amp;amp;#39;);&amp;amp;lt;/script&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;valid?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# =&amp;amp;gt; true&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Thankfully, modern versions of Rails will auto-escape the dish name on its way out of the database before sending it down the wire, but we still don&amp;amp;rsquo;t want it in our database for obvious reasons.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This gotcha can be easily avoided if we just follow the note in the Rails docs and use &amp;lt;code&amp;gt;\A&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;\Z&amp;lt;/code&amp;gt; instead:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Dish&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  validates &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/\A[\sa-z0-9]&#43;\Z/i&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now let&amp;amp;rsquo;s see if the same hack will subvert our validations:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dish&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Best Pizza Evar&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;\n&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;script&amp;amp;gt;alert(&amp;amp;#39;pwned!&amp;amp;#39;);&amp;amp;lt;/script&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;valid?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# =&amp;amp;gt; false&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Crisis averted!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Some White Spaces are More Equal Than Others</title>
    <link href="http://localhost:1313/2012/07/some-white-spaces-are-more-equal-than-others/"/>
    <id>http://localhost:1313/2012/07/some-white-spaces-are-more-equal-than-others/</id>
    <updated>2012-07-23T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Let&amp;amp;rsquo;s not argue about tabs vs. spaces. Let&amp;amp;rsquo;s argue about spaces vs. spaces!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Some developers use four spaces to represent one unit of indentation. Others prefer two spaces instead. Which is better? Is there such a thing as better, or is it &amp;lt;em&amp;gt;just&amp;lt;/em&amp;gt; a matter of taste?&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;I&amp;amp;rsquo;ve heard rumor of some crazies who use eight spaces for indentation, but I&amp;amp;rsquo;m fortunate enough not to have encounterd one in the wild.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;I submit that the correct answer is almost always two spaces, with one exception where four spaces wins out. Here&amp;amp;rsquo;s why.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;common-ground&amp;#34;&amp;gt;Common ground&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;The underlying principle is that code is written once and read many times, therefore the goal of the writer is to optimize for legibility.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;If you don&amp;amp;rsquo;t share this goal with the rest of us, you can stop reading and go back to your day job. Also, I hope your day job does not involve writing code!&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-de-facto-is-two-spaces&amp;#34;&amp;gt;The de facto is two spaces&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;We all learned in Legibility 101 that there is a point at which squeezing more characters on the same line makes the text harder to read. If you played hookie that day, just find a fluid width website and stretch your browser horizontally as far as you can. Now try to read the text. Harder, huh?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The form factor of printed books has been optimized for decades and the verdict is in: ~60 characters per line is the sweet spot.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This reason — not the oft cited reason of accounting for legacy technologies — is why I believe that having an 80 character per line limit on your code is a good idea.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;This constraint introduces other benefits, such as 1) easily fitting two columns of code side-by-side in your editor and 2) providing a nice warning sign of code complexity.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;But we need to be able to express ourselves inside those 80 characters and indentation takes up precious real estate. Therefore, the ideal number of white spaces used for indentation is the minimum number that we can get away with while still being recognizable: hence, two spaces for indentation is my de facto standard.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;No standard would be de facto if there weren&amp;amp;rsquo;t exceptions, and I believe we have one exception to carefully consider.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-exception-is-four-spaces&amp;#34;&amp;gt;The exception is four spaces&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;When it comes to white space, there are two kinds of programming languages: ones in which white space is insignificant and ones in which white space is significant.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;Okay, so there&amp;amp;rsquo;s a third kind too. &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Whitespace_(programming_language)&amp;#34;&amp;gt;Whitespace&amp;lt;/a&amp;gt;, in which the white spaces &amp;lt;em&amp;gt;are&amp;lt;/em&amp;gt; the programming language. But when cheese stands all alone it&amp;amp;rsquo;s usually because it smells funky.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;Popular languages with significant white space include &amp;lt;a href=&amp;#34;http://www.python.org/&amp;#34;&amp;gt;Python&amp;lt;/a&amp;gt;, &amp;lt;a href=&amp;#34;http://www.haskell.org/haskellwiki/Haskell&amp;#34;&amp;gt;Haskell&amp;lt;/a&amp;gt;, &amp;lt;a href=&amp;#34;http://coffeescript.org/&amp;#34;&amp;gt;CoffeeScript&amp;lt;/a&amp;gt;, and &amp;lt;a href=&amp;#34;http://sass-lang.com/&amp;#34;&amp;gt;Sass&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;These languages rely on white space in their very syntaxes and don&amp;amp;rsquo;t have other means of indentation. This makes it very reasonable, and even preferrable, to let their significant white space be more &amp;lt;em&amp;gt;significant&amp;lt;/em&amp;gt; in form than in other languages.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;White space significant languages get four spaces per unit of indentation.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;painting-the-ole-bike-shed&amp;#34;&amp;gt;Painting the ole&amp;amp;rsquo; bike shed?&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Yeah, maybe so. But it&amp;amp;rsquo;s one of those decisions that all developers have to deal with so it&amp;amp;rsquo;s nice to have a system that makes sense. Your proverbial mileage may vary.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Oh, and one more thing. When you are contributing to somebody else&amp;amp;rsquo;s project, just swallow your pride and adopt whatever style they prefer. It could be the difference in getting your contributions accepted or not.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>My Favorite Bundler Feature</title>
    <link href="http://localhost:1313/2012/07/my-favorite-bundler-feature/"/>
    <id>http://localhost:1313/2012/07/my-favorite-bundler-feature/</id>
    <updated>2012-07-03T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;If you&amp;amp;rsquo;re a Ruby developer — and you haven&amp;amp;rsquo;t been too busy starring in &amp;lt;a href=&amp;#34;http://www.youtube.com/watch?v=cvXqm0RdJms&amp;#34;&amp;gt;Geico commercials&amp;lt;/a&amp;gt; — you are familiar with &amp;lt;a href=&amp;#34;http://gembundler.com/&amp;#34;&amp;gt;Bundler&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Bundler solved a real pain point in the lives of Ruby devs: dependency management. It was a rocky road, but we eventually got there and I think it&amp;amp;rsquo;s safe to say that we&amp;amp;rsquo;re all better off with Bundler than we were without it.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;I&amp;amp;rsquo;d like to thank everybody who has contributed to Bundler. Your work is much appreciated.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;Having used Bundler long enough to take its dependency management feature for granted (&amp;lt;em&amp;gt;snark&amp;lt;/em&amp;gt;), I&amp;amp;rsquo;ve come to know and love another feature of Bundler: &amp;lt;code&amp;gt;bundle open&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;What does &amp;lt;code&amp;gt;open&amp;lt;/code&amp;gt; do? It opens a bundled gem in your editor. Simple as that.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Why is that awesome? Because it is now easier than ever to go code spelunking inside your project&amp;amp;rsquo;s dependencies.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/spelunking-20120703-073554.png&amp;#34; alt=&amp;#34;Where did I put that stack trace?&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Need to know which methods &amp;lt;a href=&amp;#34;https://github.com/ryanb/cancan/&amp;#34;&amp;gt;CanCan&amp;lt;/a&amp;gt; adds to ActionController?&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;bundle open cancan
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Want to toss some debug output inside an ActiveRecord query chain?&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;bundle open activerecord
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Would it just be easier to throw a &amp;lt;code&amp;gt;binding.pry&amp;lt;/code&amp;gt; right inside &amp;lt;a href=&amp;#34;http://mongoid.org&amp;#34;&amp;gt;Mongoid&amp;amp;rsquo;s&amp;lt;/a&amp;gt; call chain? (Pro tip: yes, yes it would)&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;bundle open mongoid
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;In a perfect world, third party libraries that our projects depend upon would be like little black boxes that Just Work™ as advertised. In real life, we often need to rip open those black boxes and tinker with their innards.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;bundle open&amp;lt;/code&amp;gt; reduces the friction of diving into my dependencies, which means I do it sooner and more often.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;And &amp;lt;em&amp;gt;THAT&amp;lt;/em&amp;gt;&amp;amp;rsquo;s why it&amp;amp;rsquo;s my favorite feature in Bundle (besides the whole dependency management feature… that&amp;amp;rsquo;s great too).&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Enumerable&#39;s *ect Methods Reimplemented Using `each_with_object`</title>
    <link href="http://localhost:1313/2012/05/enumerables-ect-methods-reimplemented-using-each_with_object/"/>
    <id>http://localhost:1313/2012/05/enumerables-ect-methods-reimplemented-using-each_with_object/</id>
    <updated>2012-05-20T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;On episode &amp;lt;a href=&amp;#34;http://rubyrogues.com/054-rr-coding-exercises-quizzes-and-katas/&amp;#34;&amp;gt;54&amp;lt;/a&amp;gt; of the Ruby Rogues podcast, &amp;lt;a href=&amp;#34;http://twitter.com/joshsusser&amp;#34;&amp;gt;Josh Susser&amp;lt;/a&amp;gt; mentioned an interview question he used to use where he would ask interviewees to reimplement &amp;lt;a href=&amp;#34;http://ruby-doc.org/core-1.9.3/Enumerable.html&amp;#34;&amp;gt;Enumerable&amp;amp;rsquo;s&amp;lt;/a&amp;gt; *ect methods (&amp;lt;code&amp;gt;collect&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;select&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;reject&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;detect&amp;lt;/code&amp;gt;) using &amp;lt;code&amp;gt;inject&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;On the same show, &amp;lt;a href=&amp;#34;http://twitter.com/jeg2&amp;#34;&amp;gt;James Edward Gray&amp;lt;/a&amp;gt; aptly pointed out that Ruby 1.9 has a new method that works a lot like &amp;lt;code&amp;gt;inject&amp;lt;/code&amp;gt;, but has a more meaningul name and removes the need to expliticly return the passed object during each pass: &amp;lt;a href=&amp;#34;http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_object&amp;#34;&amp;gt;&amp;lt;code&amp;gt;each_with_object&amp;lt;/code&amp;gt;&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I thought it&amp;amp;rsquo;d be a fun exercise to give Josh&amp;amp;rsquo;s interview question a go, but using &amp;lt;code&amp;gt;each_with_object&amp;lt;/code&amp;gt; instead of &amp;lt;code&amp;gt;inject&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;tests-first&amp;#34;&amp;gt;Tests First&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;We&amp;amp;rsquo;ll be monkey patching the Enumerable module, but first let&amp;amp;rsquo;s get some tests in place so we know if our overrides actually work. Here&amp;amp;rsquo;s a quick test suite, which could definitely be more thorough, but oh well this is just for fun anyhow:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;minitest/autorun&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;StarEctTest&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MiniTest&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Unit&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;TestCase&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;setup&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;3&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;4&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;test_collect&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    assert_equal &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;4&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;6&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;8&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;10&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;collect &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;test_detect&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    assert_equal &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;3&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;detect &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    assert_nil &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;detect &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;test_select&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    assert_equal &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;select &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;3&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    assert_equal &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;select &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;test_reject&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    assert_equal &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;3&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;4&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;reject &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;3&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    assert_equal &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;reject &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;At this point we&amp;amp;rsquo;re just testing Ruby&amp;amp;rsquo;s imlpementation so it&amp;amp;rsquo;s no surprise that they&amp;amp;rsquo;re all green. Now we&amp;amp;rsquo;ll re-open the Enumerable module and define our methods inside.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;My full source code is &amp;lt;a href=&amp;#34;https://gist.github.com/2759931&amp;#34;&amp;gt;here&amp;lt;/a&amp;gt;, in case you want to follow along at home.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;collect&amp;#34;&amp;gt;Collect&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-collect&amp;#34;&amp;gt;&amp;lt;code&amp;gt;collect&amp;lt;/code&amp;gt;&amp;lt;/a&amp;gt; invokes the given block on each item and returns a new array with the results. If you&amp;amp;rsquo;ve never heard of &amp;lt;code&amp;gt;collect&amp;lt;/code&amp;gt;, you may know it as &amp;lt;code&amp;gt;map&amp;lt;/code&amp;gt;. Implementing it using &amp;lt;code&amp;gt;each_with_object&amp;lt;/code&amp;gt; is pretty trivial. You just pass in an array and push processed items on to it.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;collect&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;amp;&amp;lt;/span&amp;gt;block&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  each_with_object&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; obj&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; obj &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;amp;lt;&amp;lt;/span&amp;gt; block&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;call&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;select&amp;#34;&amp;gt;Select&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-select&amp;#34;&amp;gt;&amp;lt;code&amp;gt;select&amp;lt;/code&amp;gt;&amp;lt;/a&amp;gt; returns a new array holding just the items for which the given block returned &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt;. This one is also pretty easy.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;select&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;amp;&amp;lt;/span&amp;gt;block&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  each_with_object&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; obj&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; obj &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;amp;lt;&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; block&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;call&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;reject&amp;#34;&amp;gt;Reject&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reject&amp;#34;&amp;gt;&amp;lt;code&amp;gt;reject&amp;lt;/code&amp;gt;&amp;lt;/a&amp;gt; is just like &amp;lt;code&amp;gt;select&amp;lt;/code&amp;gt;, only the opposite: it returns a new array holding only the items for which the given block returned &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;reject&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;amp;&amp;lt;/span&amp;gt;block&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  each_with_object&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; obj&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; obj &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;amp;lt;&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; block&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;call&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;detect&amp;#34;&amp;gt;Detect&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Here&amp;amp;rsquo;s where it gets tricky. &amp;lt;a href=&amp;#34;http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-detect&amp;#34;&amp;gt;&amp;lt;code&amp;gt;detect&amp;lt;/code&amp;gt;&amp;lt;/a&amp;gt; (a.k.a &amp;lt;code&amp;gt;find&amp;lt;/code&amp;gt;) returns the first item for which the given block returns true. If no items fit the bill, it returns &amp;lt;code&amp;gt;nil&amp;lt;/code&amp;gt;. Easy, right? Just pass &amp;lt;code&amp;gt;nil&amp;lt;/code&amp;gt; into &amp;lt;code&amp;gt;each_with_object&amp;lt;/code&amp;gt; and set it to an item when applicable:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;detect&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;amp;&amp;lt;/span&amp;gt;block&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  each_with_object&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;nil&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; obj&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; obj &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; block&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;call&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;?&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;nil&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;I expected that to work, but sadly it does not. It turns out that you can&amp;amp;rsquo;t mutate &amp;lt;code&amp;gt;nil&amp;lt;/code&amp;gt; using &amp;lt;code&amp;gt;each_with_object&amp;lt;/code&amp;gt;. That actually makes sense, because you can&amp;amp;rsquo;t normally assign to &amp;lt;code&amp;gt;nil&amp;lt;/code&amp;gt;, but it sure isn&amp;amp;rsquo;t very useful. No matter what you do inside the block, it just returns &amp;lt;code&amp;gt;nil&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So for this particular method, I reverted to &amp;lt;code&amp;gt;inject&amp;lt;/code&amp;gt;, which does allow you to pass &amp;lt;code&amp;gt;nil&amp;lt;/code&amp;gt; into it and come out with something else:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;detect&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;amp;&amp;lt;/span&amp;gt;block&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  inject&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;nil&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;obj&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; i&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; obj &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; block&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;call&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;i&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;?&amp;lt;/span&amp;gt; i &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;nil&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt; obj &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;So that works, but it feels a bit like a fail. If you can think of a way to implement &amp;lt;code&amp;gt;detect&amp;lt;/code&amp;gt; using &amp;lt;code&amp;gt;each_with_object&amp;lt;/code&amp;gt;, please do let me know.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;takeaways&amp;#34;&amp;gt;Takeaways&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Putting yourself through these little challenges — no matter how silly they seem — is a great way to level up your skills. This was fun and I learned a little something along the way.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Plus, if I ever want to work for/with Josh, I&amp;amp;rsquo;ll be ready for at least one of his questions ;)&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;(&amp;lt;a href=&amp;#34;https://gist.github.com/2759931&amp;#34;&amp;gt;source code&amp;lt;/a&amp;gt;)&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Confessions of a Meteor Newb</title>
    <link href="http://localhost:1313/2012/04/confessions-of-a-meteor-newb/"/>
    <id>http://localhost:1313/2012/04/confessions-of-a-meteor-newb/</id>
    <updated>2012-04-23T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I recently took part in the first (annual, I hope) &amp;lt;a href=&amp;#34;http://hackomaha.com&amp;#34;&amp;gt;Hack Omaha&amp;lt;/a&amp;gt; competition. I teamed up with the ridiculously talented &amp;lt;a href=&amp;#34;http://www.zachleat.com/web/&amp;#34;&amp;gt;Zach Leatherman&amp;lt;/a&amp;gt; to create &amp;lt;a href=&amp;#34;http://www.omahabountyhunter.com&amp;#34;&amp;gt;Omaha Bounty Hunter&amp;lt;/a&amp;gt;, a web-based The-Price-is-Right-style game using the provided &amp;lt;a href=&amp;#34;https://hackomaha.socrata.com/Government/CRIME_property/3nfn-ev8i&amp;#34;&amp;gt;Property Crime&amp;lt;/a&amp;gt; data set.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.omahabountyhunter.com&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://www.omahabountyhunter.com/obh-logo.png&amp;#34; alt=&amp;#34;Omaha Bounty Hunter&amp;#34; style=&amp;#34;background: black&amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;As Zach and I were getting started, we were lamenting how timed coding competitions rarely provide opportunity to learn new tricks or try new tech. That&amp;amp;rsquo;s when one of us (I can&amp;amp;rsquo;t recall who) had a crazy idea&amp;amp;hellip; let&amp;amp;rsquo;s build this thing with the just-released &amp;lt;a href=&amp;#34;http://meteor.com&amp;#34;&amp;gt;Meteor&amp;lt;/a&amp;gt; JavaScript framework!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;And that&amp;amp;rsquo;s exactly what we did. Well, kind of&amp;amp;hellip;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here&amp;amp;rsquo;s how it went down, from a total Meteor Newb&amp;amp;rsquo;s perspective.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;getting-started&amp;#34;&amp;gt;Getting Started&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Congrats to the Meteor team for making getting started a breeze. You literally just run:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;curl install.meteor.com | /bin/sh
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;and you can start coding a Meteor app. I figured that I&amp;amp;rsquo;d at least have to have &amp;lt;a href=&amp;#34;http://www.mongodb.org/&amp;#34;&amp;gt;MongoDB&amp;lt;/a&amp;gt; installed on my machine (this is the default — and currently only — persistence mechanism) before I could start. Nope. They bundle it up and manage the MongoDB server for you seamlessly. Very nice.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;Newb tip: You can hop right into the Mongo shell by typing &amp;lt;code&amp;gt;meteor mongo&amp;lt;/code&amp;gt; inside your app&amp;amp;rsquo;s root directory.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;The provided &amp;lt;code&amp;gt;meteor&amp;lt;/code&amp;gt; command has many features right out of the gate, most importantly a &amp;lt;code&amp;gt;--help&amp;lt;/code&amp;gt; flag for general help and a &amp;lt;code&amp;gt;meteor help &amp;amp;lt;command&amp;amp;gt;&amp;lt;/code&amp;gt; to learn more about each specific command.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I was excited to see &amp;lt;code&amp;gt;meteor update&amp;lt;/code&amp;gt; which brings your Meteor install up to the latest release. A young project having an easy update feature baked right in says to me that the devs really thought this through.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I think it&amp;amp;rsquo;s safe to say that Zach and I were both up and running with Meteor in about 15 minutes.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;packages&amp;#34;&amp;gt;Packages&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;One big piece of Meteor is the package system. The good news is that for us the package system just worked. The bad news is that there aren&amp;amp;rsquo;t very many packages in the directory yet. This wouldn&amp;amp;rsquo;t be a probem if Meteor just directly integrated &amp;lt;a href=&amp;#34;http://npmjs.org/&amp;#34;&amp;gt;npm&amp;lt;/a&amp;gt;, therefore inheriting its large package index, but I&amp;amp;rsquo;m sure they had their reasons.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The packages employed by any given Meteor app are listed in &amp;lt;code&amp;gt;.meteor/packages&amp;lt;/code&amp;gt; and can be installed via:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;meteor add &amp;amp;lt;package_name&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;We used the &amp;lt;em&amp;gt;less&amp;lt;/em&amp;gt; and &amp;lt;em&amp;gt;underscore&amp;lt;/em&amp;gt; packages, but I couldn&amp;amp;rsquo;t talk Zach into using the &amp;lt;em&amp;gt;coffeescript&amp;lt;/em&amp;gt; package. Oh well, there&amp;amp;rsquo;s always next year&amp;amp;hellip;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;(&amp;lt;a href=&amp;#34;http://docs.meteor.com/#packages&amp;#34;&amp;gt;More info on packages&amp;lt;/a&amp;gt;)&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;getting-help&amp;#34;&amp;gt;Getting Help&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;The &amp;lt;a href=&amp;#34;http://docs.meteor.com/&amp;#34;&amp;gt;Meteor docs&amp;lt;/a&amp;gt; are surprisingly good. They definitely didn&amp;amp;rsquo;t answer all of our questions and they definitely need &amp;lt;em&amp;gt;more&amp;lt;/em&amp;gt; examples, but what is there is easy to read and organized really well. I can&amp;amp;rsquo;t even complain about the lack of search, because everything is on a single page. Chrome&amp;amp;rsquo;s inline search was sufficient to find anything we needed.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;But what happens when the docs aren&amp;amp;rsquo;t cutting it and you have like 30 hours to get this dog hunting? &amp;lt;a href=&amp;#34;http://meteor.com/irc&amp;#34;&amp;gt;IRC&amp;lt;/a&amp;gt;, that&amp;amp;rsquo;s what. I had two critical questions answered in #meteor AND they were answered swiftly AND it was a Saturday morning. That&amp;amp;rsquo;s pretty rad.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;autopublish-is-the-devil&amp;#34;&amp;gt;Autopublish is the Devil&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;It&amp;amp;rsquo;s a good thing that getting help was so painless, because boy did we need it! Everything was going peechy until I got the &amp;lt;a href=&amp;#34;https://github.com/jerodsanto/obh/blob/master/import/import.rb&amp;#34;&amp;gt;import script&amp;lt;/a&amp;gt; (Yes, Ruby) working and imported slightly over 30,000 records into our &amp;lt;code&amp;gt;Bounties&amp;lt;/code&amp;gt; collection.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This is where the S really hit the F.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.amazon.com/dp/B002AV8UH2/?tag=shoes4all-20&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://ecx.images-amazon.com/images/I/418FkFqBrPL.jpg&amp;#34; alt=&amp;#34;You gotta be kidding me&amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Meteor dutifully refreshed my browser for me and suddenly Chrome was crushing my CPU. I tried quitting Chrome. Nothing. I tried force quitting Chrome. Nothing. Tried again. Finally, it quit.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;What the what?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;After restarting Chrome and seeing my CPU spike again, I knew this was not a fluke. I managed to get the Dev Tools open this time to see a 7.8MB XHR request flying down the wire. Yup, the server was sending all 30k&#43; records down to my client.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;You see, one of the reasons that Meteor demos so well is that you can execute arbitrary Mongo queries right in the client. What they don&amp;amp;rsquo;t tell you in the demo (but they will tell you on SO or IRC) is that this works out of the box because of a feature called &amp;lt;code&amp;gt;autopublish&amp;lt;/code&amp;gt; which does pretty much what it sounds like. If you have more than a few documents in your database you need to disable &amp;lt;code&amp;gt;autopublish&amp;lt;/code&amp;gt; and you need to disable it right now.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;meteor remove autopublish
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;After disabling autopublish I could once again load our app without crashing my browser, but now then there were no items available in the client&amp;amp;rsquo;s representation of the Bounties collection.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;i-dont-think-that-word-means-what-you-think-it-means&amp;#34;&amp;gt;I don&amp;amp;rsquo;t think that word means what you think it means&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Once autopublish is out of the picture, you have to manually publish and subscribe in order to get data down to your clients. The way this works in Meteor is, to me, non-intuitive.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;First you have to set up a publish on a channel from your server and then you have to subscribe to that channel from your clients. Notice the order there: first you publish, then you subscribe.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This was super weird for us because we wanted to have 2 clients join the same &amp;amp;ldquo;room&amp;amp;rdquo; and then have the server publish 5 random bounties down to the clients (we never got this far and thus our game is single player). The way I tried to get this working — but eventually abandoned — was to define methods that clients could call to initiate a battle, get a UUID from the server, and then join the channel with that UUID. It looked something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-js&amp;#34; data-lang=&amp;#34;js&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Meteor&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;startup&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;// code to run on server at startup
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;WAITING&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;BOUNTY_COUNT&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Bounties&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;().&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;getRando&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;Math&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;floor&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;Math&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;random&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;BOUNTY_COUNT&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Meteor&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;methods&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;({&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;startSingle&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Meteor&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;},&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;startBattle&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;WAITING&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;length&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;WAITING&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;pop&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;else&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Meteor&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;WAITING&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;push&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;},&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;join&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;randos&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;_&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;times&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;randos&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;push&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;getRando&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;());&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Meteor&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;publish&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;bounties-&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;uuid&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Bounties&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;find&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;({&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;rando&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$in&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;randos&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The idea here is that when a user clicked the &amp;amp;ldquo;Battle Mode&amp;amp;rdquo; link then they would call &amp;lt;code&amp;gt;startBattle&amp;lt;/code&amp;gt;, get and store a UUID, and then call &amp;lt;code&amp;gt;join&amp;lt;/code&amp;gt; with the given UUID. This would subscribe them to a channel and they&amp;amp;rsquo;d be waiting for an opponent to join with the same UUID.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The two clients would play the game with their 5 bounties and then somehow trigger the server to republish 5 different bounties to play with. The problem with that is what I said before, you have to publish before you subscribe (which, again, doesn&amp;amp;rsquo;t make much sense to me) and you can&amp;amp;rsquo;t republish to the same channel. The server would just need to change the Bounties collection on the channel and both clients would get the new bounties, but how does the server get the handle to the unique channel id?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Now, I may have just been thinking too client-server-y, but I never did figure out how to accomplish this pretty trivial work flow. If any Meteor non-newbs are reading, please post answers in the comments!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;We ran out of time to figure out a good way to periodically fetch random bounties, so the end result of the server code is when somebody starts the game it just hands out 50 random bounties. If a user is wicked smart and gets all 50 bounties right, it creates a rift in the space-time continuum and a very naked Arnold Schwarzenegger shows up at their house looking for clothes, boots, and a motorcycle.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://www.imdb.com/title/tt0103064/&amp;#34;&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/terminator_528_poster-20120423-161807.png&amp;#34; alt=&amp;#34;T2&amp;#34;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;javascript-javascript-everywhere&amp;#34;&amp;gt;JavaScript, JavaScript Everywhere&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;One of the claimed advantages of using entirely JavaScript-based app stacks like Meteor is that you don&amp;amp;rsquo;t have to context switch between a server-side language and a client-side language. I don&amp;amp;rsquo;t think this is a much of a win for a couple of reasons:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;I find switching between Ruby and JavaScript (esp. CoffeeScript) pretty easy&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;You still have HTML, CSS, and some templating system in play so contexts still need switching quite often&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;Now, I could be totally wrong and never having to stop to think about which language your code is running in could be a huge win, but with Meteor I experienced a completely different disorienting effect: I kept forgetting &amp;lt;em&amp;gt;where&amp;lt;/em&amp;gt; my code was running. Is this the client? Is this the server? WHERE AM I?!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;It helped to split the implementations up into separate files, but even then there are some Meteor APIs exposed only in the client&amp;amp;rsquo;s context, some exposed only in the server&amp;amp;rsquo;s context, and some exposed in both contexts. Figuring out what stuff was available where was&amp;amp;hellip;odd.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;Newb tip: the docs says Client, Server, or Anywhere next to each method so it&amp;amp;rsquo;s not too much work to figure out&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;I have a feeling that this is something I&amp;amp;rsquo;d get used to pretty quickly, but it was frustrating nonetheless.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;meteor-and-mongo-sitting-in-a-tree&amp;#34;&amp;gt;Meteor and Mongo, sitting in a tree&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;MongoDB is tons of fun and I can&amp;amp;rsquo;t wait to use it again. One frustrating thing about using MongoDB from within Meteor is that only a subset of Mongo&amp;amp;rsquo;s JavaScript API is available from inside a Meteor collection. That said, I&amp;amp;rsquo;m no MongoDB pro so I&amp;amp;rsquo;m not sure how significant of a subset it is.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;(&amp;lt;a href=&amp;#34;http://docs.meteor.com/#meteor_collection&amp;#34;&amp;gt;More on Meteor Collections&amp;lt;/a&amp;gt;)&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;deploying&amp;#34;&amp;gt;Deploying&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Meteor provides free hosting on one of their subdomains (which is really awesome, btw), but we wanted to use our own domain so we deployed to Heroku instead. This was made relatively painless thanks to &amp;lt;a href=&amp;#34;https://github.com/jordansissel/heroku-buildpack-meteor&amp;#34;&amp;gt;this build pack&amp;lt;/a&amp;gt;. I had to make a few adjustments to deploy from a subdirectory instead of the root directory (so as to ignore our import script), but other than that it just worked. I&amp;amp;rsquo;ve been using Heroku for years and it still impresses me more every time I use it.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;conclusions-faq-style&amp;#34;&amp;gt;Conclusions, FAQ-style&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Did our Meteor app win the contest?&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Nope. &amp;lt;a href=&amp;#34;http://www.siliconprairienews.com/2012/04/food-fight-gamifies-restaurant-ratings-wins-hack-omaha-video&amp;#34;&amp;gt;This awesome app&amp;lt;/a&amp;gt; did.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Would our app have won if we built it on our bread-and-butter tools instead of Meteor?&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Nope. &amp;lt;a href=&amp;#34;http://www.siliconprairienews.com/2012/04/food-fight-gamifies-restaurant-ratings-wins-hack-omaha-video&amp;#34;&amp;gt;This awesome app&amp;lt;/a&amp;gt; would have.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Would I use Meteor for a production application?&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Not yet. I&amp;amp;rsquo;d wait until they have more security features and more example code is available. I&amp;amp;rsquo;m also concerned about how well Meteor will scale (code-wise) to a very complex application. Hopefully there will be an aggressive, complex, open source Meteor app soon.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Would I use Meteor for fun, hacks, tech demos, etc?&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Absolutely, but it might be worth checking out &amp;lt;a href=&amp;#34;http://derbyjs.com/&amp;#34;&amp;gt;Derby&amp;lt;/a&amp;gt; too.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Is everything in this blog post absolute truth?&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Absolutely not. When it comes to Meteor I&amp;amp;rsquo;m a total newb, remember!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Dead Simple Rails Config</title>
    <link href="http://localhost:1313/2012/04/dead-simple-rails-config/"/>
    <id>http://localhost:1313/2012/04/dead-simple-rails-config/</id>
    <updated>2012-04-04T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Your Rails app needs custom configuration so you run off to GitHub to find a gem for that. Stop.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;That would&amp;amp;rsquo;ve been prudent in the bad ole&amp;amp;rsquo; days, but Rails 3 makes adding custom configuration dead simple. You &amp;lt;strike&amp;gt;don&amp;amp;rsquo;t have to&amp;lt;/strike&amp;gt; shouldn&amp;amp;rsquo;t add a dependency. Here&amp;amp;rsquo;s how easy it is:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;This method provides custom configuration without checking it in to version control. It&amp;amp;rsquo;s even easier if your configuration settings do not need to be private.&amp;lt;/div&amp;gt;
&amp;lt;h2 id=&amp;#34;easy-access&amp;#34;&amp;gt;Easy Access&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;There are two ways to access our application&amp;amp;rsquo;s configuration object in Rails 3.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;config
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# or&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;application&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;config
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;In my opinion, both of these are too verbose, so I add a convenience method to &amp;lt;code&amp;gt;config/application.rb&amp;lt;/code&amp;gt; just inside my application&amp;amp;rsquo;s top-level module:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;config&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;config
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now we have easy access to the configuration object:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;config
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Right now that object is a bucket full of Rails configurations. How do we get our own settings in there?&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;just-add-yaml&amp;#34;&amp;gt;Just add Yaml&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Add a &amp;lt;code&amp;gt;config.yml&amp;lt;/code&amp;gt; file to our app&amp;amp;rsquo;s &amp;lt;code&amp;gt;config&amp;lt;/code&amp;gt; directory. Put some settings in there.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-yaml&amp;#34; data-lang=&amp;#34;yaml&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;site_name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;My Application&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;contact_email&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;email@myapp.com&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Copy the file to a new one called &amp;lt;code&amp;gt;config.yml.example&amp;lt;/code&amp;gt;. Gitignore the real one. Check the example in to version control.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;cp config/config.yml config/config.yml.example
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;echo &amp;amp;#34;config/config.yml&amp;amp;#34; &amp;amp;gt;&amp;amp;gt; .gitignore
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;load-it&amp;#34;&amp;gt;Load it&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;We can add custom settings to Rails&amp;amp;rsquo; configuration manually like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Application&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;site_name &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;My Application&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;But we want to load in all the settings from &amp;lt;code&amp;gt;config.yml&amp;lt;/code&amp;gt;, so manual ain&amp;amp;rsquo;t gonna cut it. Instead, load the Yaml file and send setter methods to the &amp;lt;code&amp;gt;Application&amp;lt;/code&amp;gt; object for each setting, like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# inside MyApp::Application class&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;YAML&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;load_file&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;root&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/config/config.yml&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;k&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;v&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; config&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;send &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;k&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;=&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; v &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;It&amp;amp;rsquo;s as simple as that.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;go-crazy&amp;#34;&amp;gt;Go Crazy&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;This probably solves only the most basic of needs, but at just one LOC it is quite easy to extend ;). A few things that might be worth adding:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;Environment separation&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Shared settings&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Nested settings&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;ll leave those as very easy exercises for the reader.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>A Simple Pattern to Namespace and Selectively Execute Certain Bits of JavaScript Depending on Which Rails Controller and Action are Active</title>
    <link href="http://localhost:1313/2012/02/a-simple-pattern-to-namespace-and-selectively-execute-certain-bits-of-javascript-depending-on-which-rails-controller-and-action-are-active/"/>
    <id>http://localhost:1313/2012/02/a-simple-pattern-to-namespace-and-selectively-execute-certain-bits-of-javascript-depending-on-which-rails-controller-and-action-are-active/</id>
    <updated>2012-02-08T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Rails 3.1&amp;amp;rsquo;s asset pipeline compiles all of our JavaScript into a single file which is executed on all pages which include the &amp;lt;code&amp;gt;javascript_include_tag&amp;lt;/code&amp;gt; method. Most of the time that method is in the layout, which means evey page gets the same bundle of JavaScript. This is great for caching, but not so great for selective code execution.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I developed a pretty simple pattern to namespace and selectively execute certain bits of JavaScript depending on which Rails controller action is active. Just do the following:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;I talk about JavaScript, but my code samples are all in CoffeeScript. That&amp;amp;rsquo;s because they&amp;amp;rsquo;re really the same thing. Aren&amp;amp;rsquo;t they?&amp;lt;/div&amp;gt;
&amp;lt;h2 id=&amp;#34;1-create-an-application-object&amp;#34;&amp;gt;1) Create an application object&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Let&amp;amp;rsquo;s write a Rails app for accurately predicting weather patterns. We&amp;amp;rsquo;ll call it &amp;lt;em&amp;gt;Elijah&amp;lt;/em&amp;gt;. The first step is to create a top-level JavaScript object named after our application.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Create &amp;lt;code&amp;gt;app/assets/javascripts/elijah.js.coffee&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;this&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Elijah&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;?=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This is also a nice place to define common methods that will be used all across the application.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;All controller-level objects will be namescaped inside this object, so it must be specified first in the application manifest. Edit &amp;lt;code&amp;gt;app/assets/javascripts/application.js&amp;lt;/code&amp;gt; like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;//= require jquery
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;//= require elijah
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;//= require_tree .
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;2-add-a-javascript-controller-for-each-rails-controller&amp;#34;&amp;gt;2) Add a JavaScript controller for each Rails controller&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Each Rails controller will have a matching JavaScript controller to manage code executed on the Rails controller&amp;amp;rsquo;s actions.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Elijah&amp;lt;/em&amp;gt; has a &amp;lt;code&amp;gt;TemperaturesController&amp;lt;/code&amp;gt;, so we need our JavaScript to follow suit. Create &amp;lt;code&amp;gt;app/assets/javascripts/temperatures.js.coffee&amp;lt;/code&amp;gt;. In it, define a class and instantiate an object of the class.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-coffeescript&amp;#34; data-lang=&amp;#34;coffeescript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;TemperaturesController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;init: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;log&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;temps init!&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;index: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;log&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;temps index!&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;this&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;Elijah.temperatures = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;new&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;TemperaturesController&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;init&amp;lt;/code&amp;gt; method is where to put any setup code that will be executed on before all actions for a given controller.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Each action can optionally have its own method which will be executed on it and no other actions owned by the controller.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This example will log &amp;amp;ldquo;temps init!&amp;amp;rdquo; followed by &amp;amp;ldquo;temps index!&amp;amp;rdquo; when a user visits the temperatures index.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;3-embed-the-current-controller-and-action-in-the-html&amp;#34;&amp;gt;3) Embed the current controller and action in the HTML&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Somehow we have to let our &amp;lt;em&amp;gt;Elijah&amp;lt;/em&amp;gt; JavaScript object know which controller/action pair are active for a given page request. I do this by adding &amp;lt;code&amp;gt;data-&amp;lt;/code&amp;gt; attributes to the &amp;lt;code&amp;gt;body&amp;lt;/code&amp;gt; element of the layout, like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-html&amp;#34; data-lang=&amp;#34;html&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;body&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;data-controller&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;lt;%= controller.controller_path %&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;data-action&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;lt;%= controller.action_name %&amp;amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;It&amp;amp;rsquo;s important to use &amp;lt;code&amp;gt;controller_path&amp;lt;/code&amp;gt; instead of &amp;lt;code&amp;gt;controller_name&amp;lt;/code&amp;gt; if you ever want to namespace your Rails controllers.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;4-auto-execute-the-matching-controlleraction-javascript&amp;#34;&amp;gt;4) Auto-execute the matching controller/action JavaScript&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;The last thing to do is make sure that the active Rails controller/action have their matching JavaScript controller/method executed when the page loads.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This can be set up right inside the application manifest file because code added there is executed &amp;lt;em&amp;gt;after&amp;lt;/em&amp;gt; all other compiled code. This way we&amp;amp;rsquo;re sure to have our JavaScript controller objects in place.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;It&amp;amp;rsquo;ll look something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;// - snipped -
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;//= require_tree .
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;undefined&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$body&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;body&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;controller&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$body&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;data&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;controller&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;replace&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/\//g&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;_&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;action&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$body&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;data&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;action&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;activeController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Elijah&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;controller&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;activeController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;undefined&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;isFunction&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;activeController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;init&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;activeController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;init&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;isFunction&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;activeController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;action&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;]))&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;activeController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;action&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;]();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;})(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;jQuery&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Nothing too crazy going on here. It just extracts the embedded controller/action combo and executes the matching JavaScript controller&amp;amp;rsquo;s &amp;lt;code&amp;gt;init&amp;lt;/code&amp;gt; method followed by the action method.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Ruby controller namespaces need to be replaced by underscores in JavaScript. For example, an &amp;lt;code&amp;gt;Admin::UsersController&amp;lt;/code&amp;gt; will require a JavaScript object called &amp;lt;code&amp;gt;Elijah.admin_users&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;5-there-is-no-step-5&amp;#34;&amp;gt;5) There is no step 5&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;That&amp;amp;rsquo;s all there is to it. So far, this has worked pretty well to keep my JavaScript organized.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Are there better paths to the same goal? How do you go about it?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Building Multi-tenant Rails Apps with PostgreSQL Schemas</title>
    <link href="http://localhost:1313/2011/07/building-multi-tenant-rails-apps-with-postgresql-schemas/"/>
    <id>http://localhost:1313/2011/07/building-multi-tenant-rails-apps-with-postgresql-schemas/</id>
    <updated>2011-07-18T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Many Rails apps need to accommodate multiple tenants. There are a few different ways to go about this, each with their set of pros and cons. Guy Naor did a great job of diving into the pros and cons of each strategy in his &amp;lt;a href=&amp;#34;http://confreaks.net/videos/111-aac2009-writing-multi-tenant-applications-in-rails&amp;#34;&amp;gt;2009 Acts As Conference talk&amp;lt;/a&amp;gt; (a must-watch).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;One of the multi-tenant strategies he presented takes advantage of a feature specific to &amp;lt;a href=&amp;#34;http://www.postgresql.org&amp;#34;&amp;gt;PostgreSQL&amp;lt;/a&amp;gt; called &amp;amp;ldquo;Schemas&amp;amp;rdquo;. His talk was technical, but didn&amp;amp;rsquo;t go in-depth into implementation details. There are a few blog posts, &amp;lt;a href=&amp;#34;http://stackoverflow.com/questions/2782758/creating-a-multi-tenant-application-using-postgresqls-schemas-and-rails&amp;#34;&amp;gt;Stack Overflow&amp;lt;/a&amp;gt; threads, and other semi-related flotsam around the tubes on how to actually accomplish a multi-tenant app using this strategy, but I still had to figure out many things on my own so I figured I&amp;amp;rsquo;d document the setup.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;why-postgresql-schemas&amp;#34;&amp;gt;Why PostgreSQL Schemas&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Guy laid out three basic strategies for multi-tenant Rails apps.&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;Separate databases for each tenant&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;One database with records scoped through a &amp;amp;ldquo;tenant&amp;amp;rdquo; relationship&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;One database with separate schemas for each tenant (PostgreSQL only)&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;I won&amp;amp;rsquo;t lay out all the factors in choosing a multi-tenant strategy, but I&amp;amp;rsquo;ll tell you when you might want to choose strategy #3. If your app has the following characteristics:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;Each tenant&amp;amp;rsquo;s data is private and should not be leaked across tenants&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;You have little or no need to run queries that aggregate across all tenants&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;You may have many tenants and can&amp;amp;rsquo;t handle high administration overhead&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;There are, of course, nuances to every application so, seriously, &amp;lt;a href=&amp;#34;http://confreaks.net/videos/111-aac2009-writing-multi-tenant-applications-in-rails&amp;#34;&amp;gt;go watch his talk&amp;lt;/a&amp;gt; and make the decision on your own. If you decide you&amp;amp;rsquo;d like to go the PostgreSQL Schema route, come back and finish reading this post.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;how-postgresql-schemas-work&amp;#34;&amp;gt;How PostgreSQL Schemas Work&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;&amp;amp;ldquo;Schema&amp;amp;rdquo; is such a terrible name for this feature. When most people hear the term &amp;amp;ldquo;schema&amp;amp;rdquo; they think of a data definition of some sort. This is not what &amp;lt;a href=&amp;#34;http://www.postgresql.org/docs/9.0/static/ddl-schemas.html&amp;#34;&amp;gt;PostgreSQL schemas&amp;lt;/a&amp;gt; are. I&amp;amp;rsquo;m sure the PostgreSQL devs had their reasons, but I really wish they would have named it more appropriately. &amp;amp;ldquo;Namespaces&amp;amp;rdquo; would have been apropos.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Anywho, the easiest way for me to describe PostgreSQL schemas (besides telling you that they are, indeed, namespaces for tables) is to relate them to the UNIX execution path. When you run a UNIX command without specifying its absolute path, your shell will work its way down the &amp;lt;code&amp;gt;$PATH&amp;lt;/code&amp;gt; until it finds an executable of the same name.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Given that your &amp;lt;code&amp;gt;$PATH&amp;lt;/code&amp;gt; looks like this:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;/usr/local/bin:/usr/bin&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;When you type &amp;lt;code&amp;gt;vim&amp;lt;/code&amp;gt; your shell will look for &amp;lt;code&amp;gt;vim&amp;lt;/code&amp;gt; in &amp;lt;code&amp;gt;/usr/local/bin&amp;lt;/code&amp;gt; and then in &amp;lt;code&amp;gt;/usr/bin&amp;lt;/code&amp;gt; before giving up.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;PostgreSQL schemas work pretty much the same way. Every table in a PostgreSQL database belongs to a schema. By default tables go in the &amp;lt;code&amp;gt;public&amp;lt;/code&amp;gt; schema. You can see the current schema search path in psql by executing:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-sql&amp;#34; data-lang=&amp;#34;sql&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;SHOW&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;search_path&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;If you haven&amp;amp;rsquo;t done any schema-related stuff yet, you&amp;amp;rsquo;ll see &amp;lt;code&amp;gt;&amp;amp;quot;$user&amp;amp;quot;,public&amp;lt;/code&amp;gt; as the search path. This means when you query a table without explicitly specifying the table&amp;amp;rsquo;s &amp;lt;strike&amp;gt;namespace&amp;lt;/strike&amp;gt; schema it will first look in your user&amp;amp;rsquo;s schema (every user gets one) and then in the public schema before giving up. That means that:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-sql&amp;#34; data-lang=&amp;#34;sql&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;SELECT&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;FROM&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;users&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Is functionally equivalent to:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-sql&amp;#34; data-lang=&amp;#34;sql&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;SELECT&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;FROM&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;public&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;users&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#fff&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;What does all this mean? It means you can have the same table many times in one database as long as they each live in their own schema and you can query those tables without having to explicitly state which schema they&amp;amp;rsquo;re in. You just have to set the schema search path appropriately and PostgreSQL will handle the rest.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In other words, you get data separation across tenants by modifying very little of your application logic!&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;setting-the-search-path&amp;#34;&amp;gt;Setting the Search Path&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;So how do you do all that in Rails?&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;NOTE: This implementation targets Rails 3.0.9 and PostgreSQL 9.0.4. YMMV&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;First, let&amp;amp;rsquo;s assume you have a &amp;lt;code&amp;gt;Tenant&amp;lt;/code&amp;gt; model which holds a unique subdomain string. When an HTTP request comes in with a subdomain in it, you find the appropriate tenant and use its primary key (&amp;lt;code&amp;gt;id&amp;lt;/code&amp;gt;) to set the search path (you could use the subdomain itself, but you may want to allow your users to change their subdomain).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This logic should happen on every request so put it in a &amp;lt;code&amp;gt;before_filter&amp;lt;/code&amp;gt; in your &amp;lt;code&amp;gt;ApplicationController&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ApplicationController&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActionController&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  before_filter &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:handle_subdomain&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;handle_subdomain&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@tenant&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Tenant&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;find_by_subdomain&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;request&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;subdomain&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;set_search_path &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@tenant&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;id
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;else&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;restore_default_search_path
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The logic isn&amp;amp;rsquo;t difficult to follow. You set the search path to the matched tenant if one is found. Otherwise you restore the default search path. The database bits are tucked away inside &amp;lt;code&amp;gt;PgTools&amp;lt;/code&amp;gt;, which is a very small module you can drop into &amp;lt;code&amp;gt;lib/&amp;lt;/code&amp;gt;. Here are the relevant methods:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;extend&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;search_path&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;connection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;schema_search_path
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;default_search_path&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@default_search_path&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%{&amp;amp;#34;$user&amp;amp;#34;, public}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;set_search_path&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; include_public &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    path_parts &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_s&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;public&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; include_public&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;].&amp;lt;/span&amp;gt;compact
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;connection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;schema_search_path &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; path_parts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;join&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;,&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;restore_default_search_path&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;connection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;schema_search_path &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; default_search_path
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;These methods are pretty self-explanatory, but I will point out that the &amp;lt;code&amp;gt;set_search_path&amp;lt;/code&amp;gt; method will include the public search path by default, but it can be disabled by passing &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; as a second parameter to the method. This will come into play a little further down.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In the case of a tenant with id of &amp;amp;ldquo;4&amp;amp;rdquo;, at the end of your &amp;lt;code&amp;gt;handle_subdomain&amp;lt;/code&amp;gt; method the PostgreSQL schema search path will look like: &amp;lt;code&amp;gt;4, public&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;For the remainder of the request all of your queries will be sent through the &amp;amp;ldquo;4&amp;amp;rdquo; schema first as long as you have tables in it to be used. So how do you get all the tables in each tenant&amp;amp;rsquo;s schema?&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;adding-new-tenants&amp;#34;&amp;gt;Adding New Tenants&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;The current database table definitions need to be loaded into the private schema of each new tenant of the system. You can perform this task in a callback after the tenant record has been created. Something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Tenant&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  after_create &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:prepare_tenant&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;private&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;prepare_tenant&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    create_schema
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    load_tables
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;create_schema&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;create_schema &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;id&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;schemas&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;include? &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_s
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;load_tables&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;env&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;test?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;set_search_path &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;false&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;load&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;root&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/db/schema.rb&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;restore_default_search_path
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;After the &amp;lt;code&amp;gt;create_schema&amp;lt;/code&amp;gt; method ensures that the new tenant has their own schema, the &amp;lt;code&amp;gt;load_tables&amp;lt;/code&amp;gt; method sets the search path to its schema and loads the &amp;amp;ldquo;schema.rb&amp;amp;rdquo; file. You may notice that this time &amp;lt;code&amp;gt;false&amp;lt;/code&amp;gt; is being sent to the &amp;lt;code&amp;gt;set_search_path&amp;lt;/code&amp;gt; method. That is because you only want the loaded &amp;amp;ldquo;schema.rb&amp;amp;rdquo; file to affect the tenant&amp;amp;rsquo;s schema, NOT the public schema.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;NOTE: This code may take awhile to execute and should be run in a background process.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;Here you&amp;amp;rsquo;re using two more methods from the &amp;lt;code&amp;gt;PgTools&amp;lt;/code&amp;gt; module. Here are their implementations:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;create_schema&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  sql &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%{CREATE SCHEMA &amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;connection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;execute sql
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;schemas&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  sql &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;SELECT nspname FROM pg_namespace WHERE nspname !~ &amp;amp;#39;^pg_.*&amp;amp;#39;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;connection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;query&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;sql&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;flatten
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;At this point you&amp;amp;rsquo;ve accomplished the bulk of the logic that goes into a multi-tenant Rails app with PostgreSQL schemas, but there are a few other things that you&amp;amp;rsquo;ll want to be aware of.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;migrating-tenants&amp;#34;&amp;gt;Migrating Tenants&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Since every tenant has their own set of tables, it is no longer good enough to just run &amp;lt;code&amp;gt;rake db:migrate&amp;lt;/code&amp;gt; to make database changes. Instead, each tenant must have its schema&amp;amp;rsquo;s tables migrated.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This isn&amp;amp;rsquo;t too bad, you just need a custom rake task which loops over the &amp;lt;code&amp;gt;tenants&amp;lt;/code&amp;gt; table, setting the schema search path and migrating the database. Add this to &amp;lt;code&amp;gt;lib/tasks/tenants.rake&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;namespace &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:tenants&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  namespace &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:db&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    desc &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;runs db:migrate on each tenant&amp;amp;#39;s private schema&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    task &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;migrate&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:environment&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      verbose &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ENV&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;VERBOSE&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ENV&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;VERBOSE&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;true&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Migration&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;verbose &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; verbose
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Tenant&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;all&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;tenant&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;migrating tenant &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;tenant&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;id&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; (&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;tenant&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;subdomain&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;)&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;set_search_path tenant&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;id&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;false&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        version &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ENV&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;VERSION&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ENV&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;VERSION&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;].&amp;lt;/span&amp;gt;to_i &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;nil&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Migrator&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;migrate&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;db/migrate/&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; version&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Be sure to run this in addition to &amp;lt;code&amp;gt;rake db:migrate&amp;lt;/code&amp;gt;. You may want to hook it in to the &amp;lt;code&amp;gt;db:migrate&amp;lt;/code&amp;gt; task somehow. If you do, please add your solution to the comments as I have not done this yet.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This should also be hooked into your deploy process. If you&amp;amp;rsquo;re using capistrano to deploy, you can add it like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;namespace &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:db&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  desc &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Runs rake task which migrates database tables for all tenants&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  task &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:migrate_tenants&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    env &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;RAILS_ENV=production&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;cd &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;release_path&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; &amp;amp;amp;&amp;amp;amp; bundle exec rake &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;env&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; tenants:db:migrate&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;after &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;deploy:migrate&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;db:migrate_tenants&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That should do it!&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;shared-tables&amp;#34;&amp;gt;Shared Tables&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;So far this post has just compiled and distilled information available from various sources, but one thing that nobody else seems to be talking about is that not &amp;lt;em&amp;gt;all&amp;lt;/em&amp;gt; of your application&amp;amp;rsquo;s tables will be private to each tenant.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;tenants&amp;lt;/code&amp;gt; table itself, for example, needs to be accessible to all tenants (how else will they edit their account settings?). Also, what if you want users to be able to log in to multiple tenants across the system (single sign-on)?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;One way to accomplish this is to have shared tables live in the public schema and private tables live in the tenant-specific schemas. Technically, all tables must exist in the public schema for Rails to boot properly. This is not a problem. Since the search path is being set to look in the private schemas first it will find the tables there and use the right table. However, if a private schema has a &amp;lt;code&amp;gt;tenants&amp;lt;/code&amp;gt; table and the public schema has the &amp;lt;code&amp;gt;tenants&amp;lt;/code&amp;gt; table with data in it, the wrong one will be used.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;One solution is to delete the shared tables from the private schemas. This will ensure that the search path won&amp;amp;rsquo;t find them in the private schemas and will find them in the public schema.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;To accomplish this, I maintain a list of shared tables (this is kind of hacky, but the list is short) and modify the &amp;lt;code&amp;gt;Tenant#load_tables&amp;lt;/code&amp;gt; method to look like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;load_tables&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;env&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;test?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;set_search_path &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;false&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;load&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Rails&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;root&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/db/schema.rb&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;MyApp&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;SHARED_TABLES&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; connection&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;execute &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%{drop table &amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;}&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;restore_default_search_path
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Imagine an application that has a shared &amp;lt;code&amp;gt;users&amp;lt;/code&amp;gt; table and private &amp;lt;code&amp;gt;posts&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;comments&amp;lt;/code&amp;gt; tables. With this setup the table list will looks like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;public.posts
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;public.comments
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;public.users
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;1.posts
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;1.comments
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;When the search path is set to &amp;lt;code&amp;gt;1, public&amp;lt;/code&amp;gt; the comments and posts will be fetched from the &amp;amp;ldquo;1&amp;amp;rdquo; schema and the users will be fetched from the public schema. That&amp;amp;rsquo;s pretty cool, if you ask me!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This does throw a wrench in one more area of development: migrating shared tables. The private schemas will not have the shared tables in them, so you will encounter errors when looping through them and running migrations. The fix to this is simple enough, but needs to be communicated to all developers on the project.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Any migration that operates on shared tables should be short-circuited if the current schema search path is private. Add this method to &amp;lt;code&amp;gt;PgTools&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;private_search_path?&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!&amp;lt;/span&amp;gt;search_path&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;match &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/public/&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Consider adding a boolean admin to the aforementioned shared &amp;lt;code&amp;gt;users&amp;lt;/code&amp;gt; table. The migration should looks like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;AddAdminToUsers&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Migration&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;up&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;private_search_path?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    add_column &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:users&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:admin&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:boolean&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;default&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;false&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;down&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PgTools&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;private_search_path?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    remove_column &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:users&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:admin&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This migration will run as normal during &amp;lt;code&amp;gt;rake db:migrate&amp;lt;/code&amp;gt; and get safely skipped during &amp;lt;code&amp;gt;rake tenants:db:migrate&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;good-luck&amp;#34;&amp;gt;Good luck!&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;I hope this post serves as a guide for your own adventure into multi-tenant Rails apps on PostgreSQL. I&amp;amp;rsquo;ve been using it for some time now and while there is a lot to wrap your head around and set up at the outset, it pays off in spades when you can ignore the entire problem for much of your application logic and have the peace of mind that a coding mistake won&amp;amp;rsquo;t accidentally expose your customers&amp;amp;rsquo; sensitive data.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Let me know how you get on!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>cap db:pull</title>
    <link href="http://localhost:1313/2011/06/cap-dbpull/"/>
    <id>http://localhost:1313/2011/06/cap-dbpull/</id>
    <updated>2011-06-29T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;If there&amp;amp;rsquo;s one thing I&amp;amp;rsquo;ve learned from &amp;lt;a href=&amp;#34;http://heroku.com&amp;#34;&amp;gt;Heroku&amp;lt;/a&amp;gt;, it&amp;amp;rsquo;s that grabbing a snapshot of your production database is incredibly handy for troubleshooting.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;heroku db:pull&amp;lt;/code&amp;gt; is so rad that I wanted to have it on other projects not hosted on their platform, so I wrote a &amp;lt;a href=&amp;#34;https://github.com/capistrano/capistrano/wiki&amp;#34;&amp;gt;Capistrano&amp;lt;/a&amp;gt; task which accomplishes the same goal.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This task is &amp;lt;a href=&amp;#34;http://www.postgresql.org&amp;#34;&amp;gt;PostgreSQL&amp;lt;/a&amp;gt; specific, but can be easily adapted to work with other datastores. Just replace the &amp;lt;code&amp;gt;pg_dump&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;pg_restore&amp;lt;/code&amp;gt; related commands with ones that your datastore provides. The process is still the same.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;namespace &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:db&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  desc &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Snapshots production db and dumps into local development db&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  task &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:pull&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;roles&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:db&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;only&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;primary&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# adjust prod_config to point to your database.yml&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    prod_config &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; capture &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;cat &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;shared_path&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/config/database.yml&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    prod &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;YAML&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;load&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;prod_config&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;production&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    dev  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;YAML&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;load_file&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;config/database.yml&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;development&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    dump &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/tmp/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Time&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;now&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_i&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;application&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;.psql&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%{pg_dump -x -Fc &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;prod&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;database&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; -f &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dump&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    get dump&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; dump
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;rm &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dump&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;system&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%{dropdb &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dev&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;database&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;system&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%{createdb &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dev&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;database&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; -O &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dev&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;username&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;system&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%{pg_restore -O -U &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dev&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;username&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; -d &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dev&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;database&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dump&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;system&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;rm &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;dump&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The reason that I&amp;amp;rsquo;m dropping and recreating the development database before running the restore is that I could not find an easier way to restore a database that has a different user and name in production than it does in development. If you know of a better way to accomplish, please let me know.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Now just run &amp;lt;code&amp;gt;cap db:pull&amp;lt;/code&amp;gt; and you&amp;amp;rsquo;re on your way!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Connecting Node.js to Redis To Go on Heroku</title>
    <link href="http://localhost:1313/2011/06/connecting-node.js-to-redis-to-go-on-heroku/"/>
    <id>http://localhost:1313/2011/06/connecting-node.js-to-redis-to-go-on-heroku/</id>
    <updated>2011-06-17T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Heroku&amp;amp;rsquo;s new &amp;lt;a href=&amp;#34;http://devcenter.heroku.com/articles/cedar&amp;#34;&amp;gt;Cedar stack&amp;lt;/a&amp;gt; is awesome for many reasons, one of which is first-class &amp;lt;a href=&amp;#34;http://nodejs.org&amp;#34;&amp;gt;Node.js&amp;lt;/a&amp;gt; hosting.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I&amp;amp;rsquo;m giving it a test run with an app that uses &amp;lt;a href=&amp;#34;http://redis.io&amp;#34;&amp;gt;Redis&amp;lt;/a&amp;gt; for data caching and I couldn&amp;amp;rsquo;t find any documentation on how to connect a Node app to the &amp;lt;a href=&amp;#34;http://redistogo.com&amp;#34;&amp;gt;Redis To Go&amp;lt;/a&amp;gt; add-on. Here&amp;amp;rsquo;s how I did it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;This assumes that you&amp;amp;rsquo;ve already created the Heroku app or don&amp;amp;rsquo;t need any help in doing so. Heroku has a &amp;lt;a href=&amp;#34;http://devcenter.heroku.com/articles/node-js&amp;#34;&amp;gt;great tutorial&amp;lt;/a&amp;gt; on how to deploy a Node app on Cedar.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;First, add the Redis To Go add-on via the &amp;lt;code&amp;gt;heroku&amp;lt;/code&amp;gt; command:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;heroku addons:add redistogo
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Installing the add-on will automatically add a &amp;lt;code&amp;gt;REDISTOGO_URL&amp;lt;/code&amp;gt; environment variable to your app. You can see its value with the &amp;lt;code&amp;gt;heroku config&amp;lt;/code&amp;gt; command.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The Redis client for Node that I use is &amp;lt;a href=&amp;#34;https://github.com/mranney/node_redis&amp;#34;&amp;gt;node_redis&amp;lt;/a&amp;gt;, so the following is specific it for it. If you use another client, adjust as necessary.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;When node_redis connects to a Redis instance on your local machine it assumes the default port and host information, so instantiating the client is as simple as this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;redis&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;redis&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;createClient&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That works just fine in development, but we need it to authenticate to Redis To Go in production. To handle both cases I just check for the existence of the &amp;lt;code&amp;gt;REDISTOGO_URL&amp;lt;/code&amp;gt;, like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;process&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;env&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;REDISTOGO_URL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;// TODO: redistogo connection
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;else&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;redis&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;redis&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;createClient&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Everything should still work fine in development, but we still need to implement the Redis To Go connection. To do this we need to extract the port, hostname, and authentication string from &amp;lt;code&amp;gt;REDISTOGO_URL&amp;lt;/code&amp;gt; using Node&amp;amp;rsquo;s built-in &amp;lt;code&amp;gt;url&amp;lt;/code&amp;gt; lib:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;// inside if statement
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;rtg&amp;lt;/span&amp;gt;   &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;url&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;parse&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;process&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;env&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;REDISTOGO_URL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;var&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;redis&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;redis&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;createClient&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;rtg&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;port&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;rtg&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;hostname&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;redis&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;auth&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;rtg&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;auth&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;split&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;:&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;]);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;For some reason Node&amp;amp;rsquo;s &amp;lt;code&amp;gt;url&amp;lt;/code&amp;gt; lib won&amp;amp;rsquo;t split up the auth section&amp;amp;rsquo;s username and password, so that&amp;amp;rsquo;s what is going on in the &amp;lt;code&amp;gt;rtg.auth.split(&amp;amp;quot;:&amp;amp;quot;)[1]&amp;lt;/code&amp;gt; that is passed to the auth command.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;That&amp;amp;rsquo;s all it took to get my app connected and running smoothly. I hope this helps you do the same!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Pow and Apache Side-by-Side</title>
    <link href="http://localhost:1313/2011/04/pow-and-apache-side-by-side/"/>
    <id>http://localhost:1313/2011/04/pow-and-apache-side-by-side/</id>
    <updated>2011-04-12T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;You&amp;amp;rsquo;ve probably heard of &amp;lt;a href=&amp;#34;http://pow.cx/&amp;#34;&amp;gt;Pow&amp;lt;/a&amp;gt;. It is awesome. However, it &amp;lt;a href=&amp;#34;https://github.com/37signals/pow/issues/48#issuecomment-973701&amp;#34;&amp;gt;doesn&amp;amp;rsquo;t play nice&amp;lt;/a&amp;gt; with Apache running on the same box. Pow redirects all localhost traffic on port 80 to its own application server listening on a different port. This sucks for anybody — myself included — who also develops non-Ruby web apps using Apache virtual hosts.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Thankfully there&amp;amp;rsquo;s an elegant workaround to this problem and it comes from the future: &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/IPv6&amp;#34;&amp;gt;IPv6&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;I&amp;amp;rsquo;m sure you know that IPv6 is not actually from the future, but its wide-spread adoption certainly is!&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;By configuring Apache to use IPv6 and Pow to use IPv4 they can both live in harmony and bind to port 80 to their heart&amp;amp;rsquo;s content. Pow is on IPv4 already, so we just have to get Apache on IPv6. Here&amp;amp;rsquo;s how:&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;1-make-it-listen&amp;#34;&amp;gt;1) Make it Listen&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Set (or change) the &amp;lt;code&amp;gt;Listen&amp;lt;/code&amp;gt; directive in your Apache configuration (probably &amp;lt;code&amp;gt;/etc/apache2/httpd.conf&amp;lt;/code&amp;gt;) to use IPv6 address syntax:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-apache&amp;#34; data-lang=&amp;#34;apache&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;Listen&amp;lt;/span&amp;gt; [::]:80
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;::&amp;lt;/code&amp;gt; means to bind on all available IPv6 addresses (akin to IPv4&amp;amp;rsquo;s 0.0.0.0). We have to wrap it in square brackets to distinguish the address portion from the colon preceding the port assignment. If you have your &amp;lt;code&amp;gt;NameVirtualHost&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;VirtualHost&amp;lt;/code&amp;gt; directives set to use &amp;lt;code&amp;gt;*:80&amp;lt;/code&amp;gt; then you shouldn&amp;amp;rsquo;t need any other changes. Restart Apache and it should be all good.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;2-add-hosts&amp;#34;&amp;gt;2) Add Hosts&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;You have to add the hosts you want Apache to serve to &amp;lt;code&amp;gt;/etc/hosts&amp;lt;/code&amp;gt; with IPv6 addresses so the browser gets routed properly. &amp;lt;code&amp;gt;::1&amp;lt;/code&amp;gt; is the default loopback address, so add them like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;::1 localhost
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;::1 wp30.local
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;::1 wp31.local
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;One thing to note is that it is required to put them on separate lines like that. With IPv4 addresses you could stack them on a single line, but for some reason that doesn&amp;amp;rsquo;t work with IPv6.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;To make sure the routing is working properly, ping the hosts using the IPv6 version of ping:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;jerod@mbp:~$ ping6 wp30.local
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;PING6(56=40&#43;8&#43;8 bytes) ::1 --&amp;amp;gt; ::1
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;16 bytes from ::1, icmp_seq=0 hlim=64 time=0.076 ms
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;3-browse-it-up&amp;#34;&amp;gt;3) Browse It Up&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;At this point you &amp;lt;strong&amp;gt;should&amp;lt;/strong&amp;gt; be able to access both Apache virtual hosts and Pow virtual hosts in your browser. Boom shakalaka&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;notes-and-drawbacks&amp;#34;&amp;gt;Notes and Drawbacks&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;A few things to note about this solution:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;First, Chrome doesn&amp;amp;rsquo;t seem to resolve the IPv6 hosts properly, which is strange because both Safari 5 and Firefox 4 do. I&amp;amp;rsquo;m on the dev channel, so maybe that has something to do with it.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Next, you must add the hosts to &amp;lt;code&amp;gt;/etc/hosts&amp;lt;/code&amp;gt;. Tools like my &amp;lt;a href=&amp;#34;http://detoursapp.com&amp;#34;&amp;gt;Detours&amp;lt;/a&amp;gt; application do not properly register the IPv6 addresses for lookup (I&amp;amp;rsquo;m going to see if I can fix that, more to come).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Finally, if IPv6 ever does get deployed into the mainstream, Pow may adopt it and we&amp;amp;rsquo;ll be back where we started. I don&amp;amp;rsquo;t think we have to worry about that for awhile.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;As always, YMMV. Enjoy.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>ActiveRecord Association Caching Gotcha</title>
    <link href="http://localhost:1313/2011/04/activerecord-association-caching-gotcha/"/>
    <id>http://localhost:1313/2011/04/activerecord-association-caching-gotcha/</id>
    <updated>2011-04-07T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Here&amp;amp;rsquo;s a quick bit of info that will hopefully save somebody some time. ActiveRecord&amp;amp;rsquo;s association methods are built around caching. This caching is disabled by default in &amp;lt;strong&amp;gt;development&amp;lt;/strong&amp;gt; mode, but enabled in &amp;lt;strong&amp;gt;test&amp;lt;/strong&amp;gt; and &amp;lt;strong&amp;gt;production&amp;lt;/strong&amp;gt; modes. If you&amp;amp;rsquo;re doing any kind of association updating in an ActiveRecord callback you may run into this caching and slam your head against your desk a few times.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Say we have a &amp;lt;code&amp;gt;Pledge&amp;lt;/code&amp;gt; class that belongs to a &amp;lt;code&amp;gt;Person&amp;lt;/code&amp;gt; class. People also have &amp;lt;code&amp;gt;Job&amp;lt;/code&amp;gt;s and we want to (re)set their &amp;lt;code&amp;gt;job_id&amp;lt;/code&amp;gt; when a &amp;lt;code&amp;gt;Pledge&amp;lt;/code&amp;gt; is saved. Enter a virtual attribute and a callback:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Person&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  has_many &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:pledges&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  belongs_to &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:job&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Pledge&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  belongs_to &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:person&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;attr_writer&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:job_id&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  after_save &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    person&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;update_attribute&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:job_id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@job_id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@job_id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;present?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This looks pretty straight forward. However, this simple test case will fail:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;should &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;assign virtual job_id attribute to its person after save&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@pledge&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;job_id &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;4&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@pledge&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;save
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  assert_equal &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;4&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@pledge&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;person&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;job_id
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The associated person&amp;amp;rsquo;s &amp;lt;code&amp;gt;job_id&amp;lt;/code&amp;gt; attribute never gets updated. After some experimentation, I realized that this code runs as expected in development mode. So, what gives? Caching gives, as I explained above.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Let&amp;amp;rsquo;s fix this up to work regardless of ActiveRecord caching by forcing a trip to the database:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;after_save &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  person&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;update_attribute&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:job_id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@job_id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;@job_id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;present?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Ahh, that&amp;amp;rsquo;s better. Read more on controlling ActiveRecord caching &amp;lt;a href=&amp;#34;http://guides.rubyonrails.org/association_basics.html#controlling-caching&amp;#34;&amp;gt;here&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>The Perfect Setup: Rails on Screen</title>
    <link href="http://localhost:1313/2011/02/the-perfect-setup-rails-on-screen/"/>
    <id>http://localhost:1313/2011/02/the-perfect-setup-rails-on-screen/</id>
    <updated>2011-02-25T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;If, like me, you prefer staying light on your feet, you probably use a powerful text editor coupled with multiple shell sessions to drive your &amp;lt;a href=&amp;#34;http://rubyonrails.org&amp;#34;&amp;gt;Rails&amp;lt;/a&amp;gt; development. Unfortunately, managing said shells &amp;lt;em&amp;gt;can&amp;lt;/em&amp;gt; get a bit unwieldy, but thankfully UNIX-based systems have a tool just for the job: &amp;lt;a href=&amp;#34;http://www.gnu.org/software/screen/&amp;#34;&amp;gt;GNU Screen&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This post isn&amp;amp;rsquo;t trying to sell you on &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt;. There are umpteen sites out there which do that. Instead, I&amp;amp;rsquo;d like to share with you how I&amp;amp;rsquo;ve engineered my setup such that it&amp;amp;rsquo;s a joy to use.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/rails-screen-20110225-204305.png&amp;#34; alt=&amp;#34;rails screen&amp;#34; title=&amp;#34;Rails on Screen&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-premise&amp;#34;&amp;gt;The Premise&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Each Rails project I work on has the same basic needs. I want each of those needs facilitated by a &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt; window, and I don&amp;amp;rsquo;t want to manually bootstrap the environment each time I return to a project. The things I want in each Rails app (currently) are:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;TextMate&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Autotest&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Development server&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Development Console&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;GitX&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;A spare Bash session&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;Ideally, I would be able to &amp;lt;code&amp;gt;cd&amp;lt;/code&amp;gt; to my application&amp;amp;rsquo;s root directory, execute a single command, and be up and running. But&amp;amp;hellip;&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-problem&amp;#34;&amp;gt;The Problem&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;There is no straight forward way (that I know of) to configure screen for multiple unrelated sessions. In other words, you can configure it to &amp;lt;em&amp;gt;always&amp;lt;/em&amp;gt; do certain things when it is invoked, but you can&amp;amp;rsquo;t configure it to &amp;lt;em&amp;gt;sometimes&amp;lt;/em&amp;gt; do certain things when it is invoked. WANT.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;my-solution&amp;#34;&amp;gt;My Solution&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Good news! Passing the &amp;lt;code&amp;gt;-c&amp;lt;/code&amp;gt; flag to &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt; specifies a configuration file to use. I leverage this feature to (sometimes) load in a custom, Rails-specific configuration. That plus a wrapper function does the job perfectly. Here&amp;amp;rsquo;s how:&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;1-create-a-custom-screenrc-just-for-rails&amp;#34;&amp;gt;1) Create a custom screenrc just for rails&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;In it I put everything required to get the session all set up. Mine looks like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;source $HOME/.screenrc
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;screen 0 bash
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;title &amp;amp;#34;tests&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;stuff &amp;amp;#34;autotest\015&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;screen 1 bash
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;title &amp;amp;#34;server&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;stuff &amp;amp;#34;rails server\015&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;screen 2 bash
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;title &amp;amp;#34;console&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;stuff &amp;amp;#34;rails console\015&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;screen 3 bash
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;stuff &amp;amp;#34;gitx &amp;amp;amp;&amp;amp;amp; mate .\015&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The first thing to note here is that this file will source my main &amp;lt;code&amp;gt;.screenrc&amp;lt;/code&amp;gt; file. That means I don&amp;amp;rsquo;t have to repeat any of those settings. Gotta love that!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Next, notice that for each separate window I have 3 lines. The first line indicates which &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt; window it will be in and starts a bash shell, the second line is obviously the title of the window, and the third line is the actual command to &amp;amp;ldquo;stuff&amp;amp;rdquo; into the window.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;notice&amp;#34;&amp;gt;I &amp;lt;em&amp;gt;could&amp;lt;/em&amp;gt; bypass the whole &amp;amp;ldquo;stuff&amp;amp;rdquo; thing by passing the command directly on the &amp;amp;ldquo;screen&amp;amp;rdquo; line instead of passing in &amp;amp;ldquo;bash&amp;amp;rdquo;, but that will exit the window when the process terminates, which is annoying.&amp;lt;/div&amp;gt;
&amp;lt;p&amp;gt;Finally, I should explain the &amp;lt;code&amp;gt;\015&amp;lt;/code&amp;gt; at the end of each &amp;amp;ldquo;stuff&amp;amp;rdquo; line. That is telling &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt; to enter a line feed (LF) character which will actually execute the command.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;2-a-screen-wrapper-function&amp;#34;&amp;gt;2) A screen wrapper function&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Now that I have a custom config file, I make it super-simple to invoke &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt; with it by adding this function to my &amp;lt;code&amp;gt;.bashrc&amp;lt;/code&amp;gt; file:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-bash&amp;#34; data-lang=&amp;#34;bash&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt; screen&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;super&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;`&amp;lt;/span&amp;gt;which screen&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;`&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;rails&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;then&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$super&amp;lt;/span&amp;gt; -S &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;`&amp;lt;/span&amp;gt;basename &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$PWD&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;`&amp;lt;/span&amp;gt; -c &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$HOME&amp;lt;/span&amp;gt;/.screenrailsrc
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;else&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$super&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$@&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;fi&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This should be pretty self-explanatory. It calls &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt; with the custom config if the first argument is &amp;amp;ldquo;rails&amp;amp;rdquo;, otherwise it punts.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;One noteworthy tidbit is that it also sets the &amp;lt;code&amp;gt;-S&amp;lt;/code&amp;gt; flag to the name of the directory holding the Rails application. That way if the session ever gets detached I can reattach it with the project name instead of some obscure session id.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;one-stone-many-birds&amp;#34;&amp;gt;One Stone, Many Birds&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;I like this system a lot. What is really nice about it is that I can easily extend it to many different scenarios by creating new custom config files and adding matchers to the wrapper function.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Is that perfect or what?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>jQuery: isInArray Boolean Sugar</title>
    <link href="http://localhost:1313/2011/01/jquery-isinarray-boolean-sugar/"/>
    <id>http://localhost:1313/2011/01/jquery-isinarray-boolean-sugar/</id>
    <updated>2011-01-31T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;jQuery has a utility function called &amp;lt;code&amp;gt;jQuery.inArray&amp;lt;/code&amp;gt; which confounds &amp;lt;a href=&amp;#34;http://forum.jquery.com/topic/inarray&amp;#34;&amp;gt;many people&amp;lt;/a&amp;gt; when they first stumble across it in the &amp;lt;a href=&amp;#34;http://api.jquery.com/jQuery.inArray/&amp;#34;&amp;gt;API docs&amp;lt;/a&amp;gt;. The name implies a boolean return, but the function is really just a proxy in front of &amp;lt;code&amp;gt;Array.indexOf&amp;lt;/code&amp;gt; to allow for cross-browser use. It returns the index of the value found in the array or -1 if the value is not found.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The bad news is the function name won&amp;amp;rsquo;t be changing anytime soon due to backwards-compatibility. The good news is it&amp;amp;rsquo;s a one-liner to add some syntactic sugar around it for your own use. I call it &amp;lt;code&amp;gt;isInArray&amp;lt;/code&amp;gt;. &amp;lt;code&amp;gt;arrayInclude&amp;lt;/code&amp;gt; or &amp;lt;code&amp;gt;arrayHas&amp;lt;/code&amp;gt; would work too, but they imply an array-first argument order which just adds to the confusion.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;jQuery&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;isInArray&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;jQuery&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;inArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;value&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Why waste precious time and bandwidth adding such functions? Because conditionals that look like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;inArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someValue&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;there you are!&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;inArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someValue&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;there you are not!&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;carry a lot more mental overhead than conditionals that look like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-javascript&amp;#34; data-lang=&amp;#34;javascript&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;isInArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someValue&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;there you are!&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;!&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;isInArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someValue&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;someArray&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;console&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;log&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;there you are not!&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The value is nominal when used minimally, but these kinds of niceties help keep your application logic semantic when used throughout larger code bases.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Bridging the Gap Between JavaScript&#39;s console.log and Cocoa&#39;s NSLog</title>
    <link href="http://localhost:1313/2010/12/bridging-the-gap-between-javascripts-console.log-and-cocoas-nslog/"/>
    <id>http://localhost:1313/2010/12/bridging-the-gap-between-javascripts-console.log-and-cocoas-nslog/</id>
    <updated>2010-12-27T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html&amp;#34;&amp;gt;Cocoa&amp;amp;rsquo;s WebViews&amp;lt;/a&amp;gt; provide a &amp;lt;a href=&amp;#34;http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebScriptObject_Class/Reference/Reference.html%23//apple_ref/doc/c_ref/WebScriptObject&amp;#34;&amp;gt;scripting object&amp;lt;/a&amp;gt; through which you can execute JavaScript from Objective-C and Objective-C from JavaScript.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Unfortunately, getting feedback from the JavaScript executed inside a &amp;lt;code&amp;gt;WebView&amp;lt;/code&amp;gt; is not totally straight forward. Exceptions are converted into &amp;lt;code&amp;gt;undefined&amp;lt;/code&amp;gt;s (more on that &amp;lt;a href=&amp;#34;http://www.thimbleby.net/script/&amp;#34;&amp;gt;here&amp;lt;/a&amp;gt;) and you can only get back a single return value to use for debugging.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Wouldn&amp;amp;rsquo;t it be neato if you could just continue using &amp;lt;code&amp;gt;console.log()&amp;lt;/code&amp;gt; calls from inside JavaScript like you&amp;amp;rsquo;re used to and have the output displayed in Xcode&amp;amp;rsquo;s Debugger Console? Good news, folks. You can! Here&amp;amp;rsquo;s how:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;First, set a &amp;lt;code&amp;gt;frameLoadDelegate&amp;lt;/code&amp;gt; for your &amp;lt;code&amp;gt;WebView&amp;lt;/code&amp;gt;. I&amp;amp;rsquo;ll just use the application delegate to keep the example simple.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#import &amp;amp;#34;MyAppDelegate.h&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;@implementation&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;MyAppDelegate&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;@synthesize&amp;lt;/span&amp;gt; webView&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; scriptObject&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;applicationDidFinishLaunching:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;NSNotification &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;aNotification&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;webView &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;setFrameLoadDelegate&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;webView &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;setMainFrameURL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;http://jerodsanto.net&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The delegate method to employ is &amp;lt;code&amp;gt;-webView:didFinishLoadForFrame&amp;lt;/code&amp;gt;. This will be called after each frame in the &amp;lt;code&amp;gt;WebView&amp;lt;/code&amp;gt; is loaded. Since you only want to set up the bridge once, check that the frame that was just loaded is named &amp;amp;ldquo;_top&amp;amp;rdquo; (&amp;lt;a href=&amp;#34;http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebFrame_Class/Reference/Reference.html%23//apple_ref/doc/c_ref/WebFrame&amp;#34;&amp;gt;more info&amp;lt;/a&amp;gt;).&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;webView:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;WebView &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;sender&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;didFinishLoadForFrame:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;WebFrame &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;frame&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;frame &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;frame &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;findFrameNamed&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;_top&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;])&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;// bridge code will go here
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Once inside the &amp;lt;code&amp;gt;if&amp;lt;/code&amp;gt; statement, the scripting environment is totally initialized. Get a reference to the scripting object:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;scriptObject &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;sender windowScriptObject&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now, register your object so its methods can be called from JavaScript:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;scriptObject &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;setValue&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;forKey&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;MyApp&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;At this point, the instance of &amp;lt;code&amp;gt;MyAppDelegate&amp;lt;/code&amp;gt; is accessible to JavaScript as &amp;lt;code&amp;gt;window.MyApp&amp;lt;/code&amp;gt; and its methods can be called from JavaScript! Well, not just yet&amp;amp;hellip;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;For safety reasons, you have to opt-in your Objective-C methods to be executable from JavaScript. First, add the method that will be called. It will simply take the message string from JavaScript and pass it to &amp;lt;code&amp;gt;NSLog&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;consoleLog:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;NSString &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;aMessage&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    NSLog&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;JSLog: %@&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; aMessage&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Okay, the method is defined. Now it has to be made explicitly available to JavaScript by implementing a class method called &amp;lt;code&amp;gt;isSelectorExcludedFromWebScript&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;BOOL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;isSelectorExcludedFromWebScript:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;SEL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;aSelector&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;aSelector &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;@selector&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;consoleLog&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:))&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;NO&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;YES&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;All that is left now is to define/override the &amp;lt;code&amp;gt;window.console&amp;lt;/code&amp;gt; object which will bridge its &amp;lt;code&amp;gt;log&amp;lt;/code&amp;gt; function to the exposed &amp;lt;code&amp;gt;MyAppDelegate&amp;lt;/code&amp;gt; object&amp;amp;rsquo;s &amp;lt;code&amp;gt;consoleLog&amp;lt;/code&amp;gt; method:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;scriptObject &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;evaluateWebScript&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;console = { log: function(msg) { MyApp.consoleLog_(msg); } }&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That&amp;amp;rsquo;s all there is to it! Here is the example &amp;lt;code&amp;gt;MyAppDelegate.m&amp;lt;/code&amp;gt; in its entirety:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objc&amp;#34; data-lang=&amp;#34;objc&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#import &amp;amp;#34;MyAppDelegate.h&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;@implementation&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;MyAppDelegate&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;@synthesize&amp;lt;/span&amp;gt; webView&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; scriptObject&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;applicationDidFinishLaunching:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;NSNotification &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;aNotification&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;webView &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;setFrameLoadDelegate&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;webView &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;setMainFrameURL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;http://jerodsanto.net&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;consoleLog:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;NSString &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;aMessage&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    NSLog&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;JSLog: %@&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; aMessage&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;BOOL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;isSelectorExcludedFromWebScript:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;SEL&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;aSelector&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;aSelector &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;@selector&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;consoleLog&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:))&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;NO&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;YES&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;void&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;webView:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;WebView &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;sender&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;didFinishLoadForFrame:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;WebFrame &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;frame&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;frame &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;frame &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;findFrameNamed&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;_top&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;])&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        scriptObject &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;sender windowScriptObject&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;scriptObject &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;setValue&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;self&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;forKey&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;MyApp&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;        &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;scriptObject &amp;lt;span style=&amp;#34;color:#900;font-weight:bold&amp;#34;&amp;gt;evaluateWebScript&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;@&amp;amp;#34;console = { log: function(msg) { MyApp.consoleLog_(msg); } }&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;];&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;@end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Once you have this set up you can use &amp;lt;code&amp;gt;console.log&amp;lt;/code&amp;gt;s to your heart&amp;amp;rsquo;s desire and get the feedback you need right there in Xcode. If there is an easier/better way, please do let me know. Hope this helps!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>The Tech Behind the New Grooveshark</title>
    <link href="http://localhost:1313/2010/12/the-tech-behind-the-new-grooveshark/"/>
    <id>http://localhost:1313/2010/12/the-tech-behind-the-new-grooveshark/</id>
    <updated>2010-12-15T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I recently enjoyed the opportunity to help &amp;lt;a href=&amp;#34;http://listen.grooveshark.com&amp;#34;&amp;gt;Grooveshark&amp;lt;/a&amp;gt; reinvent their web interface. There are many things I could say about this project, but if I were limited to a summary statement it would be that we stood on the shoulders of one giant open source community.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This post is my thanks to the authors and contributors of the software used. We probably &amp;lt;em&amp;gt;could have&amp;lt;/em&amp;gt; done it without you, but I&amp;amp;rsquo;m sure glad we didn&amp;amp;rsquo;t have to!&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;jquery&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;http://jquery.com&amp;#34;&amp;gt;jQuery&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://twitter.com/wycats&amp;#34;&amp;gt;Yehuda Katz&amp;lt;/a&amp;gt; recently quipped that &amp;lt;a href=&amp;#34;http://jquery.com&amp;#34;&amp;gt;jQuery&amp;lt;/a&amp;gt; is becoming the standard library of the web. And why shouldn&amp;amp;rsquo;t it? It makes otherwise arduous DOM manipulation a breeze, its API is mature, and it has been proven on major production sites.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;jQuery&amp;amp;rsquo;s other strength is its popularity. Some people dislike it for this reason, but I believe it is of real value. One of Grooveshark&amp;amp;rsquo;s goals for the rewrite was to improve designer/developer accessibility. Mission accomplished. There is no other JavaScript library on Earth that more people feel comfortable using.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In fact, Grooveshark had already chosen jQuery as a component before I joined the party. I didn&amp;amp;rsquo;t complain :)&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;jquery-ui&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;http://jqueryui.com&amp;#34;&amp;gt;jQuery UI&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;You may not notice &amp;lt;a href=&amp;#34;http://jqueryui.com&amp;#34;&amp;gt;jQuery UI&amp;lt;/a&amp;gt; in the mix at first glance, but it&amp;amp;rsquo;s in there.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/new-grooveshark-20101213-215629.jpg&amp;#34; alt=&amp;#34;the new Grooveshark&amp;#34; title=&amp;#34;The New Grooveshark&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The only widgets used were Autocomplete, Slider, and Datepicker, but we employed a bevy of its other features. It drives all drag and drop interaction on the site as well as enabling the use of another big component: SlickGrid (see below).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;One of jQuery UI&amp;amp;rsquo;s greatest advantages (besides its use of jQuery, of course) is that you can pick and choose just what you need. Page load speed was another driving force of the rewrite, so this was paramount for us.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;javascript-mvc&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;http://www.javascriptmvc.com/&amp;#34;&amp;gt;JavaScript MVC&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Grooveshark&amp;amp;rsquo;s Flash application was built with a &amp;lt;a href=&amp;#34;http://en.wikipedia.org/wiki/Model-View-Controller&amp;#34;&amp;gt;Model-View-Controller&amp;lt;/a&amp;gt; (MVC) architecture and they were keen on retaining that paradaigm with the JavaScript application. We looked at a few options for this and ultimately settled on &amp;lt;a href=&amp;#34;http://www.javascriptmvc.com/&amp;#34;&amp;gt;JavaScript MVC&amp;lt;/a&amp;gt; (JMVC).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;JMVC has a boatload of features (code generation, dependency resolution, documentation, etc.), but we ended up building just upon the core functionality it exposes. At its base is John Resig&amp;amp;rsquo;s &amp;lt;a href=&amp;#34;http://ejohn.org/blog/simple-javascript-inheritance/&amp;#34;&amp;gt;Simple Class inheritance&amp;lt;/a&amp;gt;, which is key. From there JMVC provides base Model and Controller classes from which you inherit. JMVC controllers are great and with full fledged classical inheritance at our disposal we could extend it to fit all of our needs.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;JMVC&amp;amp;rsquo;s default templating engine is &amp;lt;a href=&amp;#34;http://embeddedjs.com/getting_started.html&amp;#34;&amp;gt;EJS&amp;lt;/a&amp;gt;, which will look familiar to Ruby/Rails developers. Its similarity to vanilla HTML made it attractive right out of the gate (again, for developer accessibility) and powerful features like partials and view helpers means it can handle just about anything.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;slickgrid&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/mleibman/SlickGrid/wiki&amp;#34;&amp;gt;SlickGrid&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;A huge component of Grooveshark is the grid. Almost every content page has it, and it is busting at the seams with features (sorting, arbitrary row rendering, drag and drop, keyboard navigation, etc.).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&amp;#34;http://jerodsanto.net/drop/new-grooveshark-grid-20101214-164846.jpg&amp;#34; alt=&amp;#34;Grooveshark&amp;amp;rsquo;s Slick Grid&amp;#34; title=&amp;#34;Grooveshark&amp;#39;s Slick Grid&amp;#34;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Features aside, the main thing the grid needs is to perform well with thousands of rows. Thankfully, &amp;lt;a href=&amp;#34;https://github.com/mleibman/SlickGrid/wiki&amp;#34;&amp;gt;SlickGrid&amp;lt;/a&amp;gt; had crossed my radar a few months before the project began. Its adaptive virtual scrolling allows it to scale to hundreds of thousands of rows without losing responsiveness.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The library was a joy to work with. You should definitely check it out if you have advanced grid needs.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;jquery-hashchange&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;http://benalman.com/projects/jquery-hashchange-plugin/&amp;#34;&amp;gt;jQuery Hashchange&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Grooveshark is a single page application with many &amp;amp;ldquo;pages&amp;amp;rdquo; inside it. These pages have pretty URLs nested behind a hash (#) tag. We needed to preserve all of the publicly available URLs while providing back button and history support. Originally, we looked to &amp;lt;a href=&amp;#34;http://code.quirkey.com/sammy/&amp;#34;&amp;gt;Sammy JS&amp;lt;/a&amp;gt; for this functionality.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Sammy worked great for awhile, but we had some issues with back button support on older browsers. Also, Sammy provides a ton of functionality and we were only using a smidgeon of it. Instead, we switched to Ben Alman&amp;amp;rsquo;s &amp;lt;a href=&amp;#34;http://benalman.com/projects/jquery-hashchange-plugin/&amp;#34;&amp;gt;Hashchange plugin&amp;lt;/a&amp;gt; and never looked back. It works great and has a small footprint.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;storejs&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/marcuswestin/store.js&amp;#34;&amp;gt;Store.js&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Performance is a big deal to the Grooveshark team. We use local storage to persist user settings and libraries so they won&amp;amp;rsquo;t have to wait on the server to load up the application when they return. &amp;lt;a href=&amp;#34;https://github.com/marcuswestin/store.js&amp;#34;&amp;gt;Store.js&amp;lt;/a&amp;gt; is a local storage wrapper that consolidates all the browser quirks into a single API. Awesome stuff.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;jquery-localize&amp;#34;&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/coderifous/jquery-localize/&amp;#34;&amp;gt;jQuery-localize&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Grooveshark currently supports switching between 17 languages. When the language is switched all localized elements on the page (and future elements) need to be swapped out. Our localization technique started with the &amp;lt;a href=&amp;#34;https://github.com/coderifous/jquery-localize/&amp;#34;&amp;gt;jquery-localize&amp;lt;/a&amp;gt; plugin. We ended up extending it quite a bit to support some advanced string localizations, but the plugin definitely gave us a jumping off point.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;other-stuff&amp;#34;&amp;gt;Other Stuff&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Those are the big pieces of the application, but there are other players that are worth mentioning:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/phiggins42/bloody-jquery-plugins&amp;#34;&amp;gt;PubSub&amp;lt;/a&amp;gt; — communicating between disparate sections of the app&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/tzuryby/jquery.hotkeys&amp;#34;&amp;gt;jquery.hotkeys&amp;lt;/a&amp;gt; — keyboard shortcuts ftw&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://jursza.net/dev/jjmenu/&amp;#34;&amp;gt;jjmenu&amp;lt;/a&amp;gt; — context menus&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://www.json.org/&amp;#34;&amp;gt;JSON&amp;lt;/a&amp;gt; — pretty much the best thing ever, duh&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://documentcloud.github.com/underscore/&amp;#34;&amp;gt;Underscore&amp;lt;/a&amp;gt; — not used directly, but we yoinked a few functions from it&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://www.yaml.org/&amp;#34;&amp;gt;Yaml&amp;lt;/a&amp;gt; — dependency management and configuration&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://rake.rubyforge.org/&amp;#34;&amp;gt;Rake&amp;lt;/a&amp;gt; — build and deploy routines&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://code.google.com/closure/compiler/&amp;#34;&amp;gt;Closure Compiler&amp;lt;/a&amp;gt; — JavaScript minification&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://www.jslint.com/&amp;#34;&amp;gt;JSLint&amp;lt;/a&amp;gt; — keep our codes pretty&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;https://github.com/grosser/smusher&amp;#34;&amp;gt;Smusher&amp;lt;/a&amp;gt; — optimize images without installing ImageMagick&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;hr&amp;gt;
&amp;lt;p&amp;gt;If you authored or contributed to any of the projects listed above: &amp;lt;strong&amp;gt;THANKS!!&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;If you are interested in any of them or have questions about how we implemented other pieces of the application, please do ask.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Oh yeah, there is One More Thing®. If you&amp;amp;rsquo;re a Grooveshark user, &amp;lt;a href=&amp;#34;http://listen.grooveshark.com/#/user/jerodsanto/417270/&amp;#34;&amp;gt;friend&amp;lt;/a&amp;gt; me up. &amp;lt;a href=&amp;#34;http://listen.grooveshark.com/#/user/jerodsanto/417270/community/fans&amp;#34;&amp;gt;My community is weak&amp;lt;/a&amp;gt;!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Making Rails 3&#39;s Mail Gem and Paperclip Play Nice</title>
    <link href="http://localhost:1313/2010/12/making-rails-3s-mail-gem-and-paperclip-play-nice/"/>
    <id>http://localhost:1313/2010/12/making-rails-3s-mail-gem-and-paperclip-play-nice/</id>
    <updated>2010-12-09T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I have a Rails application that allows people to email in attachments that become documents in the system. I use the excellent &amp;lt;a href=&amp;#34;https://github.com/thoughtbot/paperclip&amp;#34;&amp;gt;Paperclip&amp;lt;/a&amp;gt; gem to handle the files attached to the documents. You know, like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Document&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  has_attached_file &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:data&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:url&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/system/docs/:id/:style/:filename&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# ... clip ...&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;I &amp;lt;em&amp;gt;was&amp;lt;/em&amp;gt; using the &amp;lt;a href=&amp;#34;http://tmail.rubyforge.org/&amp;#34;&amp;gt;TMail&amp;lt;/a&amp;gt; gem to parse the incoming emails and send the attachments to Paperclip. It looked a bit like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;email &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;TMail&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Mail&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;parse&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;incoming&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; email&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;has_attachments?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  email&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;attachments&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;attachment&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    d &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Document&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    d&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;data &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; attachment
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    d&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;save
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;That&amp;amp;rsquo;s pretty easy. But..&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;TMail has been deprecated (it seg faults Ruby 1.9) and replaced by the shiny new &amp;lt;a href=&amp;#34;https://github.com/mikel/mail&amp;#34;&amp;gt;Mail&amp;lt;/a&amp;gt; gem. I&amp;amp;rsquo;m not complaining, Mail is better than TMail in just about every way, but how it handles attachments doesn&amp;amp;rsquo;t jive with the old method of sending the data to Paperclip.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The reason is that Mail treats attachments just like any other message &amp;lt;code&amp;gt;Part&amp;lt;/code&amp;gt;, but Paperclip expects an I/O object from which it can derive the &amp;lt;code&amp;gt;original_filename&amp;lt;/code&amp;gt;, &amp;lt;code&amp;gt;content_type&amp;lt;/code&amp;gt;, and &amp;lt;code&amp;gt;size&amp;lt;/code&amp;gt;. TMail provides an object like this for each attachment, but we have to make Mail play nice. Here&amp;amp;rsquo;s how:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;module&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;Mail&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Part&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Message&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;PaperclipAttachment&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;StringIO&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;attr_accessor&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:original_filename&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:content_type&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;to_paperclip&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;nil&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; attachment?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      paperclip &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;PaperclipAttachment&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;body&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;decoded&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      paperclip&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;original_filename &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; filename&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;strip &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; filename&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;blank?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      paperclip&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;content_type &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; content_type&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/^(.*);/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      paperclip
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;What&amp;amp;rsquo;s goin on here is opening up Mail&amp;amp;rsquo;s &amp;lt;code&amp;gt;Mail::Part&amp;lt;/code&amp;gt; class and adding a new instance method called &amp;lt;code&amp;gt;to_paperclip&amp;lt;/code&amp;gt;. That method will take the known data on the message part and create a new &amp;lt;code&amp;gt;PaperclipAttachment&amp;lt;/code&amp;gt; object. The &amp;lt;code&amp;gt;PaperclipAttachment&amp;lt;/code&amp;gt; class is just Ruby&amp;amp;rsquo;s &amp;lt;code&amp;gt;StringIO&amp;lt;/code&amp;gt; class with two extra attributes that Paperclip needs.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The only tricky part is perhaps the regular expression being used to set &amp;lt;code&amp;gt;content_type&amp;lt;/code&amp;gt;. The reason for this is that attachment parts have more than just the content type in their &amp;lt;code&amp;gt;ContentType&amp;lt;/code&amp;gt; field. They usually look something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Content-Type: image/png; name=&amp;amp;#34;jms.png&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;We don&amp;amp;rsquo;t want the name in this case, so I&amp;amp;rsquo;m removing that portion. Please let me know if there is a better way of doing this (does Mail support it somehow?).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Now, revisiting the code to create new documents from email, except using our extended Mail instead of TMail:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;email &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Mail&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;incoming&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; email&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;has_attachments?
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  email&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;attachments&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;part&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    d &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Document&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    d&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;data &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; part&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_paperclip
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    d&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;save
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;And there you have it!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Testing Cappuccino Notifications</title>
    <link href="http://localhost:1313/2010/01/testing-cappuccino-notifications/"/>
    <id>http://localhost:1313/2010/01/testing-cappuccino-notifications/</id>
    <updated>2010-01-07T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Writing a web app using &amp;lt;a href=&amp;#34;http://cappuccino.org&amp;#34;&amp;gt;Cappuccino&amp;lt;/a&amp;gt; has a lot of benefits, one of which is a really nice message passing system wherein certain objects can register to observe events and take action when other objects post notifications of those events.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Here is a very basic way to test if your app is posting event notifications as you expect it to. First, create an Observer class inside a test helper file, which will be included into your tests:
~&amp;lt;/p&amp;gt;
&amp;lt;pre tabindex=&amp;#34;0&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objj&amp;#34; data-lang=&amp;#34;objj&amp;#34;&amp;gt;// this is TestHelper.j
@import &amp;amp;lt;Foundation/CPObject.j&amp;amp;gt;

@implementation Observer : CPObject
{
    CPArray postedNotifications;
}

- (id)init
{
    if (self = [super init])
    {
        postedNotifications   = [CPArray array];
    }
    return self;
}

- (void)startObserving:(CPString)aNotificationName
{
    [[CPNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(notificationPosted:)
                                                 name:aNotificationName
                                               object:nil];
}

- (void)notificationPosted:(id)sender
{
    [postedNotifications addObject:[sender name]];
}

- (BOOL)didObserve:(CPString)aNotificationName
{
    return [postedNotifications containsObject:aNotificationName];
}

@end
&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;p&amp;gt;This class can be configured to register for certain notifications via &amp;lt;code&amp;gt;-startObserving&amp;lt;/code&amp;gt; and when they are posted, it stores them in an array (postedNotifications). You can then ask it at any time if a notification has been observed using the &amp;lt;code&amp;gt;-didObserve&amp;lt;/code&amp;gt; method and it will respond with &amp;lt;code&amp;gt;YES&amp;lt;/code&amp;gt; or &amp;lt;code&amp;gt;NO&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So, to use this in your tests, do something like this:&amp;lt;/p&amp;gt;
&amp;lt;pre tabindex=&amp;#34;0&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-objj&amp;#34; data-lang=&amp;#34;objj&amp;#34;&amp;gt;// This is MyTest.j
@import &amp;amp;#34;TestHelper.j&amp;amp;#34;

@implementation MyTest : OJTestCase

- (void)setUp
{
    observer = [[Observer alloc] init];
}

- (void)testMyMethodDidPostNotification
{
    [observer startObserving:@&amp;amp;#34;MyMethodDidFinishExecution&amp;amp;#34;];
    // do stuff that you would expect to get the notification posted
    [self assertTrue:[observer didObserve:@&amp;amp;#34;MyMethodDidFinishExecution&amp;amp;#34;];
}

@end
&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;p&amp;gt;You could get more fancy with this (like allowing object observing and not just name observing), but the concept doesn&amp;amp;rsquo;t change. Hope this helps anybody thinking about how to test their Capp apps!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Rubular</title>
    <link href="http://localhost:1313/2009/12/rubular/"/>
    <id>http://localhost:1313/2009/12/rubular/</id>
    <updated>2009-12-02T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Most of the online regular expression testers I&amp;amp;rsquo;ve used just aren&amp;amp;rsquo;t that useful, but &amp;lt;a href=&amp;#34;http://rubular.com&amp;#34;&amp;gt;Rubular&amp;lt;/a&amp;gt; is the exception. It uses AJAX appropriately, has a clean aesthetic, and the quick reference at the bottom of the page is so useful it hurts. Plus, it has great features such as match extraction and the ability to create permalinks to your results.&amp;lt;/p&amp;gt;
&amp;lt;img class=&amp;#34;aligncenter size-full wp-image-812&amp;#34; title=&amp;#34;rubular&amp;#34; src=&amp;#34;/wp-content/uploads/2009/12/rubular.png&amp;#34; height=&amp;#34;279&amp;#34; alt=&amp;#34;rubular&amp;#34; width=&amp;#34;650&amp;#34; /&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://rubular.com&amp;#34;&amp;gt;Rubular&amp;lt;/a&amp;gt; is only for Ruby regexes. I wish somebody would make one for JavaScript. Jubular, anyone?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>280 Atlas Introductory Screencast</title>
    <link href="http://localhost:1313/2009/11/280-atlas-introductory-screencast/"/>
    <id>http://localhost:1313/2009/11/280-atlas-introductory-screencast/</id>
    <updated>2009-11-16T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;The much anticipated &amp;lt;a href=&amp;#34;https://atlas-beta.heroku.com/&amp;#34; rel=&amp;#34;external&amp;#34;&amp;gt;280 Atlas developer beta&amp;lt;/a&amp;gt; is under way and I recorded a brief screencast introducing the basic concepts of creating applications with Atlas.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In it I build a simplified version of the payment calculator from chapter 2 of &amp;lt;a href=&amp;#34;http://www.amazon.com/gp/product/0321535022?ie=UTF8&amp;amp;amp;tag=standadeviat-20&amp;amp;amp;linkCode=as2&amp;amp;amp;camp=1789&amp;amp;amp;creative=390957&amp;amp;amp;creativeASIN=0321535022&amp;#34;&amp;gt;Cocoa Design Patterns&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Topics covered include creating a Cib-based project, laying out an interface and binding outlets/actions to working code.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Hope it helps!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;object height=&amp;#34;360&amp;#34; width=&amp;#34;640&amp;#34;&amp;gt;&amp;lt;param name=&amp;#34;allowfullscreen&amp;#34; value=&amp;#34;true&amp;#34; /&amp;gt;&amp;lt;param name=&amp;#34;allowscriptaccess&amp;#34; value=&amp;#34;always&amp;#34; /&amp;gt;&amp;lt;param name=&amp;#34;movie&amp;#34; value=&amp;#34;http://vimeo.com/moogaloop.swf?clip_id=7646585&amp;amp;amp;server=vimeo.com&amp;amp;amp;show_title=1&amp;amp;amp;show_byline=1&amp;amp;amp;show_portrait=0&amp;amp;amp;color=00ADEF&amp;amp;amp;fullscreen=1&amp;#34; /&amp;gt;&amp;lt;embed allowfullscreen=&amp;#34;true&amp;#34; src=&amp;#34;http://vimeo.com/moogaloop.swf?clip_id=7646585&amp;amp;amp;server=vimeo.com&amp;amp;amp;show_title=1&amp;amp;amp;show_byline=1&amp;amp;amp;show_portrait=0&amp;amp;amp;color=00ADEF&amp;amp;amp;fullscreen=1&amp;#34; allowscriptaccess=&amp;#34;always&amp;#34; type=&amp;#34;application/x-shockwave-flash&amp;#34; height=&amp;#34;360&amp;#34; width=&amp;#34;640&amp;#34;&amp;gt;&amp;lt;/embed&amp;gt;&amp;lt;/object&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://vimeo.com/7646585&amp;#34;&amp;gt;280 Atlas Introductory Screencast&amp;lt;/a&amp;gt; from &amp;lt;a href=&amp;#34;http://vimeo.com/jerodsanto&amp;#34;&amp;gt;Jerod Santo&amp;lt;/a&amp;gt; on &amp;lt;a href=&amp;#34;http://vimeo.com&amp;#34;&amp;gt;Vimeo&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Related Posts:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;/2009/11/learning-cappuccino-a-linked-list&amp;#34;&amp;gt;Learning Cappuccino: Resource List&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;/2009/10/cappuccinoflow&amp;#34;&amp;gt;CappuccinoFlow&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Just Abort It</title>
    <link href="http://localhost:1313/2009/08/just-abort-it/"/>
    <id>http://localhost:1313/2009/08/just-abort-it/</id>
    <updated>2009-08-24T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;A lot of people end up writing Ruby methods that looks something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;stop_error&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;message&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;ERROR: &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;message&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;exit&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Which they call in their app like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;stop_error &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Oh noes, file doesn&amp;amp;#39;t exist!&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;exist?&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;file&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;I used to write that method a lot too. Did you know Ruby has a built-in method that provides just what we&amp;amp;rsquo;re all looking for?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;Kernel::abort&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;So, stop writing your own little method and just abort it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;abort&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Oh noes, file doesn&amp;amp;#39;t exist!&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;exist?&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;file&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;
    </content>
  </entry>
  
  <entry>
    <title>Self-Scheduling Ruby Scripts</title>
    <link href="http://localhost:1313/2009/08/self-scheduling-ruby-scripts/"/>
    <id>http://localhost:1313/2009/08/self-scheduling-ruby-scripts/</id>
    <updated>2009-08-20T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;%22http://github.com/javan/whenever/%22&amp;#34;&amp;gt;Whenever&amp;lt;/a&amp;gt; is an awesome library that:&amp;lt;/p&amp;gt;
&amp;lt;blockquote&amp;gt;
&amp;lt;p&amp;gt;&amp;amp;ldquo;provides a clean ruby syntax for defining messy cron jobs and running them Whenever.&amp;lt;/p&amp;gt;
&amp;lt;/blockquote&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;code&amp;gt;Whenever&amp;lt;/code&amp;gt; has become very popular for use with Rails apps and there are plenty of tutorials on how to use it. This &amp;lt;a href=&amp;#34;%22http://railscasts.com/episodes/164-cron-in-ruby%22&amp;#34;&amp;gt;RailsCast&amp;lt;/a&amp;gt; is a good place to get started if you&amp;amp;rsquo;re interested in that.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;However, I haven&amp;amp;rsquo;t seen too many people writing about using the library outside of Rails (or other web frameworks).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I have a lot of Ruby scripts running on different servers all scheduled via cron and it&amp;amp;rsquo;s quite easy to forget what script is scheduled when and how often. I decided to try using &amp;lt;code&amp;gt;Whenever&amp;lt;/code&amp;gt; to create the cron jobs instead of creating them manually. First, I set out to just slap arbitrary Ruby code inside of an &amp;lt;code&amp;gt;every&amp;lt;/code&amp;gt; block. You know, something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;every &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:hour&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;this is just some ruby that will execute every hour&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Unfortunately, it doesn&amp;amp;rsquo;t work like that. If it did, that would own because then we could simply wrap all our scripts inside an &amp;lt;code&amp;gt;every&amp;lt;/code&amp;gt; block and call it a day. Instead the library lets you define a few different kinds of tasks inside an &amp;lt;code&amp;gt;every&amp;lt;/code&amp;gt; block.&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;rake tasks&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;external commands&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;runner scripts (Rails)&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;So, we can use the &amp;lt;code&amp;gt;command&amp;lt;/code&amp;gt; method to execute our pre-existing scripts like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;every &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;day&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:at&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;4:30 am&amp;amp;#39;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  command &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/scripts/daily_backup.rb&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;So that&amp;amp;rsquo;s cool, but now we have to create a separate file that houses our schedule definitions and manage it as well as the scripts we want to run. What would be really cool, I thought, would be to include the schedule definitions at the top of each script. The big win in this case is easily accessible &amp;amp;amp; portable schedule documentation.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;One way of accomplishing this is to prepend all your Ruby scripts with a snippet similar to this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# filename: /scripts/weekly_backup.rb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;every &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:sunday&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:at&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;12pm&amp;amp;#39;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    command &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/scripts/weekly_backup.rb&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; defined?&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Whenever&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;return&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6a737d&amp;#34;&amp;gt;__FILE__&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;$PROGRAM_NAME&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;this is the start of my backup script&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;When this script is executed using the &amp;lt;code&amp;gt;whenever&amp;lt;/code&amp;gt; command (which you use to actually generate and install the cron jobs), the first &amp;lt;code&amp;gt;every&amp;lt;/code&amp;gt; block will be used and everything after the &amp;lt;code&amp;gt;return&amp;lt;/code&amp;gt; line will be ignored. When this script is executed directly, the &amp;lt;code&amp;gt;every&amp;lt;/code&amp;gt; block will be ignored and everything after the &amp;lt;code&amp;gt;return&amp;lt;/code&amp;gt; line will be executed.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Writing the crontab with this script will look like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;whenever -w -f /scripts/weekly_backup.rb
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Which will install a cron job that looks like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;0 12 * * 0 /scripts/weekly_backup.rb
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The major drawback to this method is we have to hard code the full path to the script instead of using the &amp;lt;code&amp;gt;__FILE__&amp;lt;/code&amp;gt; variable, which hurts portability. This is because &amp;lt;code&amp;gt;Whenever&amp;lt;/code&amp;gt; &amp;lt;code&amp;gt;evals&amp;lt;/code&amp;gt; the content of the file read in and in this case &amp;lt;code&amp;gt;__FILE__&amp;lt;/code&amp;gt; is useless. There is access to the calling file path via &amp;lt;code&amp;gt;Whenever::CommandLine.default_identifier&amp;lt;/code&amp;gt; but this is currently a protected method.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This is just my first attempt at embedding scheduling information inside the script being scheduled, so there are probably easier/better ways of getting this done. Know any?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Amending Git Commits</title>
    <link href="http://localhost:1313/2009/08/amending-git-commits/"/>
    <id>http://localhost:1313/2009/08/amending-git-commits/</id>
    <updated>2009-08-16T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I recently learned that you can fix you&amp;amp;rsquo;re previous commit (modify commit message, add more files, etc.) quite easily with git. An example:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;You&amp;amp;rsquo;re in early stages of developing a Rails app and you decide that you want to go back and add some indexes to your tables. No need to create a new migration at this point, just add the indexes to the old migrations and run them again. After making the changes, you create a commit&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;git commit -a -m &amp;amp;#34;Added missing indexes to tables&amp;amp;#34;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Next you re-run all your migrations to get the indexes in there.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;rake db:migrate:reset
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;At this point, you check git status and remember that now your schema file has changed. This probably should have been included in the last commit! Piece of cake.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;git commit db/schema.rb --amend
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;You&amp;amp;rsquo;ll be prompted to optionally change the commit message.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;At this point git status will tell you that your working directory is clean and the changes to your schema were tracked in the same commit as the migration changes.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Butter.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Ad Hoc Rails Console Logging</title>
    <link href="http://localhost:1313/2009/07/ad-hoc-rails-console-logging/"/>
    <id>http://localhost:1313/2009/07/ad-hoc-rails-console-logging/</id>
    <updated>2009-07-18T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I recently found a couple of cool &amp;lt;a href=&amp;#34;%22http://toolmantim.com/articles/logging_rails_activity_in_script_console%22&amp;#34;&amp;gt;old&amp;lt;/a&amp;gt; &amp;lt;a href=&amp;#34;%22http://toolmantim.com/articles/system_wide_script_console_logging%22&amp;#34;&amp;gt;tricks&amp;lt;/a&amp;gt; for logging Rails activity directly to the console, but these solutions are pretty static once you&amp;amp;rsquo;re inside a console session. In my experience, sometimes logging to the console is cool and most of the time it isn&amp;amp;rsquo;t.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;If you want to be able to toggle your development log between the default Rails logger and the console, just add this method to your &amp;lt;code&amp;gt;~/.irbrc&amp;lt;/code&amp;gt;:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;rails_log_to_console&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;toggle&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;logger &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; toggle &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;==&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;?&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Logger&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;STDOUT&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;RAILS_DEFAULT_LOGGER&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  reload!
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now, you can start logging to the console at any time by doing:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;amp;gt;&amp;amp;gt; rails_log_to_console &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;true&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Reloading...
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;=&amp;amp;gt; true
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;And turn it back off as simply as:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;amp;gt;&amp;amp;gt; rails_log_to_console &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;false&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Reloading...
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;=&amp;amp;gt; true
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Really, passing any argument &amp;lt;em&amp;gt;except&amp;lt;/em&amp;gt; true to the method will switch the logging back to the default.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Are there any better ways to achieve this (like without having to call &amp;lt;code&amp;gt;reload!&amp;lt;/code&amp;gt;)? If you know of one, holler back in the comments.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Sass Never Forgets</title>
    <link href="http://localhost:1313/2009/07/sass-never-forgets/"/>
    <id>http://localhost:1313/2009/07/sass-never-forgets/</id>
    <updated>2009-07-09T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Some CSS techniques require me to Google about like a chicken with its head cut off. One such technique is placing a div in the dead center of a page (vertically and horizontally). Since I&amp;amp;rsquo;m using &amp;lt;a href=&amp;#34;http://sass-lang.com&amp;#34;&amp;gt;Sass&amp;lt;/a&amp;gt; pretty much exclusively these days, I decided to define this technique as a mixin so I don&amp;amp;rsquo;t have to look it up anymore.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Hopefully this can be of use to others. YMMV:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The mixin definition:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-sass&amp;#34; data-lang=&amp;#34;sass&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;=dead-center&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;!height&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;,!&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;width&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;  :&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;height&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;!height&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;  :&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;margin-top&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;!height&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;/&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:top&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;50&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;%&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;  :&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;width&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;!width&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;  :&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;margin-left&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#953800&amp;#34;&amp;gt;!width&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;/&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;2&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:left&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;50&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#f6f8fa;background-color:#82071e&amp;#34;&amp;gt;%&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:position&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;absolute&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:text-align&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;center&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;To use it on an element:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-css&amp;#34; data-lang=&amp;#34;css&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;#&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#24292e&amp;#34;&amp;gt;centered&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;dead-center&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;200px&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;500px&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now I&amp;amp;rsquo;ll never forget how. Thanks Sass!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>jQuery Tools 101: Nested Tabs</title>
    <link href="http://localhost:1313/2009/07/jquery-tools-101-nested-tabs/"/>
    <id>http://localhost:1313/2009/07/jquery-tools-101-nested-tabs/</id>
    <updated>2009-07-01T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://flowplayer.org/tools/index.html&amp;#34;&amp;gt;jQuery Tools&amp;lt;/a&amp;gt; is the new kid on the block when it comes to jQuery-based user interface libraries. What it offers is a solid foundation of widgets at an extremely small file size (5.8 KB minified).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I decided to ditch &amp;lt;a href=&amp;#34;http://jqueryui.com&amp;#34;&amp;gt;jQuery UI&amp;lt;/a&amp;gt; on a recent project when I couldn&amp;amp;rsquo;t get tabs &amp;amp;amp; accordions to play nice together (also, their site was down when I needed it so I took that as a sign). This was a great opportunity to try jQuery Tools and I have been very impressed thus far.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;To use the minimal tabs interface you can simply &amp;lt;a href=&amp;#34;http://flowplayer.org/tools/demos/tabs/index.html&amp;#34;&amp;gt;follow the instructions on their site&amp;lt;/a&amp;gt;, but if you want to nest tabs inside one another you&amp;amp;rsquo;ll need to change things slightly. I&amp;amp;rsquo;ll demonstrate below:&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-mark-up&amp;#34;&amp;gt;the Mark Up&amp;lt;/h2&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-html&amp;#34; data-lang=&amp;#34;html&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ul&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;tabs main&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;href&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;#1&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;main&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;Main Tab 1&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;href&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;#1&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;main&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;Main Tab 2&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ul&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;panes main&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;this is main tab 1 content. it includes another set of tabs
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ul&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;tabs nested&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;href&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;#2&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;nested&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;Nested Tab 1&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;href&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;#2&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;nested&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;Nested Tab 2&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;li&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ul&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;panes nested&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;this is my nested tab 1 content&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;this is my nested tab 2 content&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;this is my main tab 2 content&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;div&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The key in this sequence is that the seemingly arbitrary href attribute on the tab anchors has different content for the main tabs (#1) than the nested tabs (#2). This is required or your nested tabs will keep returning to the main tabs when you click on a tab link.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-javascript&amp;#34;&amp;gt;the JavaScript&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;To configure the nested tabs, you can define the JavaScript as simply as this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-js&amp;#34; data-lang=&amp;#34;js&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;document&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;ul.main.tabs&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;tabs&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;div.main.panes &amp;amp;gt; div&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;tabs&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;a.main&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;ul.nested.tabs&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;tabs&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;div.nested.panes &amp;amp;gt; div&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;tabs&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;a.nested&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;the &amp;lt;code&amp;gt;tabs()&amp;lt;/code&amp;gt; function is called on a jQuery selector that matches the unordered list and it takes as its first argument a selector for where to find the tab&amp;amp;rsquo;s content panes. It&amp;amp;rsquo;s second argument is a single option that tells &amp;lt;code&amp;gt;tabs()&amp;lt;/code&amp;gt; which elements to use as links for the tabs. The default is &amp;lt;code&amp;gt;a&amp;lt;/code&amp;gt;, but to differentiate the main tabs from the nested tabs, it needs to be passed explicitly with the correct class for the anchor.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-style&amp;#34;&amp;gt;the Style&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Of course, to make these look cool you&amp;amp;rsquo;ll need some nice CSS applied to the elements at play. I&amp;amp;rsquo;ll leave that to you, but you can get a decent start from the &amp;lt;a href=&amp;#34;http://flowplayer.org/tools/tabs.html&amp;#34;&amp;gt;demo page&amp;lt;/a&amp;gt; for the library.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Enjoy!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Let Capistrano Compile Ruby 1.9 For You</title>
    <link href="http://localhost:1313/2009/06/let-capistrano-compile-ruby-1.9-for-you/"/>
    <id>http://localhost:1313/2009/06/let-capistrano-compile-ruby-1.9-for-you/</id>
    <updated>2009-06-02T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;A Capistrano task to install Ruby 1.9.1 to &amp;lt;code&amp;gt;/opt/ruby-1.9.1&amp;lt;/code&amp;gt; on Debian:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;APTGET&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;apt-get install -qqy&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;RUBY19&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;ruby-1.9.1-p129&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;SRC&amp;lt;/span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/usr/local/src&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;WGET&amp;lt;/span&amp;gt;   &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;wget -q&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;namespace &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:ruby&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  desc &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;download and compile Ruby 1.9&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  task &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:install_19&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    deps    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%w&amp;amp;#39;zlib1g-dev libopenssl-ruby1.9&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    version &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;RUBY19&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;gsub&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/-p\d&#43;$/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# remove patch level&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;APTGET&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;deps&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;join&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39; &amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    cmd &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;cd &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;SRC&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;WGET&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; ftp://ftp.ruby-lang.org/pub/ruby/1.9/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;RUBY19&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;.tar.gz&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;tar zxvf &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;RUBY19&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;.tar.gz&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;cd &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;RUBY19&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;./configure --prefix=/opt/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;version&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; --enable-shared&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;make&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;make install&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;].&amp;lt;/span&amp;gt;join&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34; &amp;amp;amp;&amp;amp;amp; &amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      run cmd
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;With this task, you can quickly upgrade all your Debian machines to Ruby 1.9.1 without having to go through the process each time. Just:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;cap ruby:install_19
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;
    </content>
  </entry>
  
  <entry>
    <title>Dead Simple Rails Deployment</title>
    <link href="http://localhost:1313/2009/05/dead-simple-rails-deployment/"/>
    <id>http://localhost:1313/2009/05/dead-simple-rails-deployment/</id>
    <updated>2009-05-31T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Deploying a Rails app used to suck. Reverse proxies, Mongrel clusters, Monit, etc. &amp;lt;a href=&amp;#34;http://www.capify.org/&amp;#34;&amp;gt;Capistrano&amp;lt;/a&amp;gt; helped out a lot (once you set it up the first time), but all in all the process was still pretty painful.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Thankfully, a couple of technologies have come along and made my deployment process a whole lot easier.&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://modrails.com/&amp;#34;&amp;gt;Passenger&amp;lt;/a&amp;gt;
This was the big one. The &amp;lt;a href=&amp;#34;http://www.phusion.nl/&amp;#34;&amp;gt;Phusion&amp;lt;/a&amp;gt; guys&amp;amp;rsquo; &amp;amp;ldquo;Hello World&amp;amp;rdquo; app (as they called it) has really had a positive impact on the Rails community, and me personally. Suddenly my Rails (and Rack) web apps are first class citizens to Apache (and Nginx), which means I can just point a virtual host at the public directory and go. I had almost forgotten how good it feels to just drop some files in a directory and have Apache serve them.&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://git-scm.com&amp;#34;&amp;gt;Git&amp;lt;/a&amp;gt;
Ok, so maybe Subversion allows a similar workflow, but for some reason Git is one of those tools that is so much fun to use that it makes me think of &amp;lt;a href=&amp;#34;/2009/05/git-informed-when-your-site-is-hacked/&amp;#34;&amp;gt;different ways&amp;lt;/a&amp;gt; I can use it.&amp;lt;/p&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;h2 id=&amp;#34;my-flow&amp;#34;&amp;gt;My Flow&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;How I deploy these days (when I&amp;amp;rsquo;m not deploying to &amp;lt;a href=&amp;#34;/2009/05/3-reasons-why-heroku-is-a-game-changer/&amp;#34;&amp;gt;Heroku&amp;lt;/a&amp;gt;) is dead simple. I host my private Git repos using &amp;lt;a href=&amp;#34;http://eagain.net/gitweb/?p=gitosis.git;a=summary&amp;#34;&amp;gt;Gitosis&amp;lt;/a&amp;gt;, but the same would work with &amp;lt;a href=&amp;#34;http://github.com&amp;#34;&amp;gt;GitHub&amp;lt;/a&amp;gt; or any Git server.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;initial-setup&amp;#34;&amp;gt;Initial Setup&amp;lt;/h2&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;Clone the repository on production server.&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Create database.yml and any other production-specific configs&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Configure an Apache virtual host pointing to &amp;amp;ldquo;public&amp;amp;rdquo; folder of the repository&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;h2 id=&amp;#34;deploys&amp;#34;&amp;gt;Deploys&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;locally:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;jerod@mbp:~$ git push origin master
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;remotely:&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-console&amp;#34; data-lang=&amp;#34;console&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;jerod@mbp:~$ git pull origin master &amp;amp;amp;&amp;amp;amp; touch tmp/restart.txt
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;I know what you&amp;amp;rsquo;re thinking, &amp;amp;ldquo;Wow, that &amp;lt;em&amp;gt;is&amp;lt;/em&amp;gt; dead simple&amp;amp;rdquo;. It&amp;amp;rsquo;s even easier by using Capistrano to execute the remote commands. Here is an example Capistrano task from one of my Rails apps:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;task &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:deploy&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:roles&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:production&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;system&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;git push origin master&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  cmd &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;cd &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;root_dir&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;git pull&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;touch tmp/restart.txt&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  run cmd&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;join&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34; &amp;amp;amp;&amp;amp;amp; &amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This task can be extended to automatically install required gems, update Git submodules, migrate the database, and so on.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;other-benefits&amp;#34;&amp;gt;Other Benefits&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Besides the simplicity and ease of deployment in this process, I have also enjoyed the ability to make edits in production and pull them back in to my development environment. And because my production environment has a complete history of code changes, it is trivial to revert commits that cause major problems.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This work flow is by no means a panacea. How do you handle deployment?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Create Arbitrarily Sized Files In Less Than 15 Lines of Ruby</title>
    <link href="http://localhost:1313/2009/05/create-arbitrarily-sized-files-in-less-than-15-lines-of-ruby/"/>
    <id>http://localhost:1313/2009/05/create-arbitrarily-sized-files-in-less-than-15-lines-of-ruby/</id>
    <updated>2009-05-22T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Ok, so I&amp;amp;rsquo;m having fun with this &amp;amp;ldquo;in less than 15 lines of Ruby&amp;amp;rdquo; idea, but this time I turn my attention away from Twitter (I know, that&amp;amp;rsquo;s hard to do right now) and toward file generation.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Sometimes you just need a 1GB file. Or a 350MB file. Or a 1MB file. It doesn&amp;amp;rsquo;t matter what is in that file, but size does matter (heh).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;With this little Ruby script, you can arbitrarily generate files of any size (using 1MB increments).&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-script&amp;#34;&amp;gt;The Script&amp;lt;/h2&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;print&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;Enter file size (MB): &amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;the_size &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;gets&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;chomp
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;fail&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;bad file size&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; the_size &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=~&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/^\d&#43;$/&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;file_size &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;string    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;abcdefghijklmnopqrstuvwxyz123456&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;open&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;the_size &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;MB&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;w&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;f&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;while&amp;lt;/span&amp;gt; file_size &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; the_size&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;to_i &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;*&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1048576&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# bytes in 1MB&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    f&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;print string
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    file_size &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; string&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;size
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The resulting file will be named &amp;amp;ldquo;&amp;lt;strong&amp;gt;[X]MB&amp;lt;/strong&amp;gt;&amp;amp;rdquo; where &amp;lt;strong&amp;gt;X&amp;lt;/strong&amp;gt; is the size you requested.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;a-note&amp;#34;&amp;gt;A Note&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;This script is derived from one I found awhile ago somewhere on the internet (don&amp;amp;rsquo;t remember where). It didn&amp;amp;rsquo;t work correctly (file sizes were off) and was much more verbose.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Enjoy!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>jQuery: Open External Links In New Window/Tab</title>
    <link href="http://localhost:1313/2009/05/jquery-open-external-links-in-new-window/tab/"/>
    <id>http://localhost:1313/2009/05/jquery-open-external-links-in-new-window/tab/</id>
    <updated>2009-05-18T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;The common technique to force links to open a new window or tab is to add a &amp;lt;code&amp;gt;target&amp;lt;/code&amp;gt; attribute like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-html&amp;#34; data-lang=&amp;#34;html&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;href&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://hulu.com&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;target&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;_blank&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;check it out&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;This works just fine but is not actually valid markup. Fortunately, we can use jQuery to add the target attribute so it doesn&amp;amp;rsquo;t muck up the HTML.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-js&amp;#34; data-lang=&amp;#34;js&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;document&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;a[rel=&amp;amp;#34;external&amp;amp;#34;]&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;click&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(){&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;this&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;attr&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;target&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;_blank&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Change that invalid link to look like this instead:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-html&amp;#34; data-lang=&amp;#34;html&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;href&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://hulu.com&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;rel&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;external&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;check it out&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now the link forces browsers to open a new window/tab and the markup is still valid. Easy cheesy.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Expand Your Twitter Network In Less Than 15 Lines of Ruby</title>
    <link href="http://localhost:1313/2009/05/expand-your-twitter-network-in-less-than-15-lines-of-ruby/"/>
    <id>http://localhost:1313/2009/05/expand-your-twitter-network-in-less-than-15-lines-of-ruby/</id>
    <updated>2009-05-17T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;A great way to meet new people on Twitter is by checking out the people your friends are interacting with. We can assume that if many of your friends follow somebody, that person has a high likelihood of being interesting to you (or it is &amp;lt;a href=&amp;#34;http://twitter.com/aplusk&amp;#34;&amp;gt;Ashton Kutcher&amp;lt;/a&amp;gt;). Let&amp;amp;rsquo;s use Ruby to generate a list of people highly followed by our friends.&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;the-flow&amp;#34;&amp;gt;The Flow&amp;lt;/h2&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;fetch the ids of all the people you follow&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;use those ids to fetch the ids of all the people they follow&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;remove any ids in both groups (sound familiar?)&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;tally the occurrences of each unique id in the list&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;sort them by most occurrences&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;iterate the top 10 and print the user information&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;h2 id=&amp;#34;the-script&amp;#34;&amp;gt;The Script&amp;lt;/h2&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;rubygems&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;twitter&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;base        &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Twitter&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Twitter&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;HTTPAuth&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;username&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;password&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;my_friends  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; base&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;friend_ids
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;candidates  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; my_friends&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;inject&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;Array&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;array&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; array &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Twitter&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;friend_ids&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;);&amp;lt;/span&amp;gt; array &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;candidates &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-=&amp;lt;/span&amp;gt; my_friends
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;tallied     &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; candidates&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;inject&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Hash&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;))&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;hash&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; can&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;hash&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;can&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;hash&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;ordered     &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; tallied&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;sort &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;x&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;y&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; y&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;=&amp;amp;gt;&amp;lt;/span&amp;gt; x&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;ordered&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;..&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;9&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;].&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;array&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  user &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; base&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;user&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;array&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;0&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;user&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;screen_name&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; is followed by &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;array&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;1&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; of people you follow.&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;some-explanation&amp;#34;&amp;gt;Some Explanation&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;The only &amp;amp;ldquo;tricky&amp;amp;rdquo; thing I&amp;amp;rsquo;m doing is making good use of Ruby&amp;amp;rsquo;s &amp;lt;a href=&amp;#34;http://www.ruby-doc.org/core/classes/Enumerable.html#M003171&amp;#34;&amp;gt;Enumerable#inject&amp;lt;/a&amp;gt; method. Twice. This method iterates an enumerable object similar to how &amp;lt;code&amp;gt;each&amp;lt;/code&amp;gt; does except it takes an argument and passes it through the block with the object it is iterating. The variable passed can be modified and is returned by the method. For a good write-up on &amp;lt;code&amp;gt;inject&amp;lt;/code&amp;gt;, &amp;lt;a href=&amp;#34;http://buddingrubyist.com/2008/02/05/why-i-like-to-inject/&amp;#34;&amp;gt;see this blog post by The Budding Rubyist.&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;h2 id=&amp;#34;a-limitation&amp;#34;&amp;gt;A Limitation&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Unfortunately, this script is hindered by Twitter&amp;amp;rsquo;s 100 API calls per hour. If you follow more than 100 people on Twitter you&amp;amp;rsquo;re going to need a workaround. I&amp;amp;rsquo;ll leave these as an exercise for whoever is interested, but a few ideas are:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;sleep the script between API hits&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;toggle between multiple accounts for requests&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;http://twitter.com/help/request_whitelisting&amp;#34;&amp;gt;request whitelisting&amp;lt;/a&amp;gt; from Twitter&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;h2 id=&amp;#34;a-challenge&amp;#34;&amp;gt;A Challenge&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Can you can make this script smaller, more readable, or more robust? I put it on &amp;lt;a href=&amp;#34;http://github.com&amp;#34;&amp;gt;GitHub&amp;lt;/a&amp;gt; so you can &amp;lt;a href=&amp;#34;http://gist.github.com/113270&amp;#34;&amp;gt;fork my gist&amp;lt;/a&amp;gt; and put a link to your version in the comments!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>See Which Twitterers Don&#39;t Follow You Back In Less Than 15 Lines of Ruby</title>
    <link href="http://localhost:1313/2009/05/see-which-twitterers-dont-follow-you-back-in-less-than-15-lines-of-ruby/"/>
    <id>http://localhost:1313/2009/05/see-which-twitterers-dont-follow-you-back-in-less-than-15-lines-of-ruby/</id>
    <updated>2009-05-12T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;The asynchronous nature of Twitter is one of its keys to success. No friend requests. &amp;lt;strong&amp;gt;Awesome.&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;A lot of the people I follow on Twitter have no business following me. I didn&amp;amp;rsquo;t get upset when &amp;lt;a href=&amp;#34;http://twitter.com/dhh&amp;#34;&amp;gt;DHH&amp;lt;/a&amp;gt;, &amp;lt;a href=&amp;#34;http://twitter.com/_why&amp;#34;&amp;gt;_why&amp;lt;/a&amp;gt;, and &amp;lt;a href=&amp;#34;http://twitter.com/alexalbrecht&amp;#34;&amp;gt;alexalbrecht&amp;lt;/a&amp;gt; did not reciprocate interest. Why would they? They don&amp;amp;rsquo;t know me from Adam (even though I&amp;amp;rsquo;m waayyy cooler than that dude&amp;amp;hellip;).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;However, sometimes &amp;lt;em&amp;gt;it is&amp;lt;/em&amp;gt; interesting to see all the &amp;lt;strike&amp;gt;jerks&amp;lt;/strike&amp;gt; people who you follow that do not follow you back. There&amp;amp;rsquo;s probably a web application out there that does this, but who needs a web app when this is a perfectly good excuse to play with Ruby?&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The &amp;lt;a href=&amp;#34;http://github.com/jnunemaker/twitter/tree/master&amp;#34;&amp;gt;twitter gem&amp;lt;/a&amp;gt; by &amp;lt;a href=&amp;#34;http://railstips.org/&amp;#34;&amp;gt;John Nunemaker&amp;lt;/a&amp;gt; makes this task so easy it&amp;amp;rsquo;s retarded. First, get the gem if you don&amp;amp;rsquo;t already have it:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-bash&amp;#34; data-lang=&amp;#34;bash&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;jerod@mbp:~$ gem install twitter
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now. The script:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;rubygems&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;twitter&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;auth   &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Twitter&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;HTTPAuth&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;username&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;password&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;base   &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Twitter&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;new&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;auth&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;guilty &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; base&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;friend_ids &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;-&amp;lt;/span&amp;gt; base&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;follower_ids
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;guilty&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;size&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; people you follow don&amp;amp;#39;t follow you back&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;guilty&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;user_id&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  user &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; base&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;user&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;user_id&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;user&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;name&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; follows &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;user&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;friends_count&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;       &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34; and has &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;user&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;followers_count&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; followers.&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Isn&amp;amp;rsquo;t that simple? Are you with me on the retarded comment now? How it works:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The &amp;lt;code&amp;gt;friend_ids&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;follower_ids&amp;lt;/code&amp;gt; methods each return an array of ids and we subtract the followers array from the friends array. All that is left over after subtraction are the ids of users in your friends list (people you follow) that are not in your followers list. Then we loop over the new array of &amp;amp;ldquo;guilty&amp;amp;rdquo; parties and fetch their user account information based on their user_id, printing the details each time.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Just replace &amp;lt;code&amp;gt;username&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;password&amp;lt;/code&amp;gt; with your own information and you&amp;amp;rsquo;re off to the races. Run the script from your command line and you should see output similar to this:&amp;lt;/p&amp;gt;
&amp;lt;img class=&amp;#34;aligncenter size-full wp-image-296&amp;#34; title=&amp;#34;no_follows&amp;#34; src=&amp;#34;/wp-content/uploads/2009/05/no_follows.png&amp;#34; height=&amp;#34;212&amp;#34; alt=&amp;#34;no_follows&amp;#34; width=&amp;#34;475&amp;#34; /&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;NOTE:&amp;lt;/strong&amp;gt; Twitter only allows (currently) 100 API requests per hour. Each user account lookup requires an API request, so if your &amp;amp;ldquo;guilty&amp;amp;rdquo; array is quite large, you&amp;amp;rsquo;ll probably get an error before the script terminates (Maybe its time to un-follow a few peeps!).&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;What other cool tricks can we do using the Twitter gem?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>jQuery: Set Mouse Focus On Page Load</title>
    <link href="http://localhost:1313/2009/05/jquery-set-mouse-focus-on-page-load/"/>
    <id>http://localhost:1313/2009/05/jquery-set-mouse-focus-on-page-load/</id>
    <updated>2009-05-09T00:00:00Z</updated>
    <content type="html">
      &amp;lt;h2 id=&amp;#34;first-input&amp;#34;&amp;gt;First Input:&amp;lt;/h2&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-js&amp;#34; data-lang=&amp;#34;js&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;document&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;input:text:first&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;focus&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;h2 id=&amp;#34;first-empty-input&amp;#34;&amp;gt;First Empty Input:&amp;lt;/h2&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-js&amp;#34; data-lang=&amp;#34;js&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;document&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;ready&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;function&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;()&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;input:text[value=&amp;amp;#34;&amp;amp;#34;]:first&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;).&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;focus&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;();&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;});&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;
    </content>
  </entry>
  
  <entry>
    <title>Extending TMail::Mail for HTML and plaintext only</title>
    <link href="http://localhost:1313/2009/02/extending-tmailmail-for-html-and-plaintext-only/"/>
    <id>http://localhost:1313/2009/02/extending-tmailmail-for-html-and-plaintext-only/</id>
    <updated>2009-02-21T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;A project I&amp;amp;rsquo;m working on required a little more from Ruby&amp;amp;rsquo;s TMail library than it offers out of the box. One of the things that make Ruby great is how you can dynamically extend classes.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;TMail can parse a raw email and provide you with the headers, subject, body, etc. But what it doesn&amp;amp;rsquo;t do is parse the body and pull out the html and/or plaintext from multi-part emails. Well, now it can.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I found a great little piece of code on &amp;lt;a href=&amp;#34;http://code.google.com&amp;#34;&amp;gt;Google Code&amp;lt;/a&amp;gt; called &amp;lt;a href=&amp;#34;http://code.google.com/p/tmail-html-body-extractor/&amp;#34;&amp;gt;tmail-html-body-extractor&amp;lt;/a&amp;gt;. It was written by &amp;lt;a href=&amp;#34;http://fernandoguillen.info&amp;#34;&amp;gt;Fernando Guillen&amp;lt;/a&amp;gt; and released under the Apache License 2.0.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Fernando&amp;amp;rsquo;s code was great, but its intent was returning just the html from the email body. For my current project, I am more interested in just the plaintext from the email body, so I added this functionality.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Thanks to the openness of the &amp;lt;a href=&amp;#34;http://www.apache.org/licenses/LICENSE-2.0&amp;#34;&amp;gt;Apache License 2.0&amp;lt;/a&amp;gt;, I was able to extend his script and re-release it on GitHub with my modifications.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Now its trivial to return just the html from an email body, or just the plaintext:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;rubygems&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;action_mailer&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;tmail_mail_extension&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;mail &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;TMail&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Mail&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;parse&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;raw_email&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;mail&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;body_html  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# returns just html if available or nil&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;mail&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;body_plain &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# returns just plaintext if available or nil&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;You can get the source on &amp;lt;a href=&amp;#34;http://github.com/jerodsanto/tmail_body_extractors/tree/master&amp;#34;&amp;gt;GitHub&amp;lt;/a&amp;gt;!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>A simple Ruby method to send email</title>
    <link href="http://localhost:1313/2009/02/a-simple-ruby-method-to-send-email/"/>
    <id>http://localhost:1313/2009/02/a-simple-ruby-method-to-send-email/</id>
    <updated>2009-02-17T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I have tried many different Ruby mailers and they all have their problems. The &amp;lt;a href=&amp;#34;http://github.com/adamwiggins/pony/tree/master&amp;#34;&amp;gt;Pony gem&amp;lt;/a&amp;gt; by Adam Wiggins is right up my alley but even that has given me a hard time sending emails. Plus, sometimes you just don&amp;amp;rsquo;t want your little Ruby script having to require rubygems.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;I always end up reverting to a simple method I wrote awhile back and it just works. Feel free to use it and adjust to your needs:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;net/smtp&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;send_email&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;to&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{})&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:server&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;localhost&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:from&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;        &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;email@example.com&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:from_alias&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;Example Emailer&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:subject&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;     &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;You need to see this&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:body&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;        &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;||=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Important stuff!&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  msg &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;&amp;amp;lt;END_OF_MESSAGE
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;From&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#{opts[:from_alias]} &amp;amp;lt;#{opts[:from]}&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;To&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#{to}&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;Subject&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#{opts[:subject]}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#{opts[:body]}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;END_OF_MESSAGE&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Net&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;SMTP&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;start&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:server&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;smtp&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    smtp&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;send_message msg&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:from&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; to
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Everything but the &amp;lt;code&amp;gt;to&amp;lt;/code&amp;gt; argument is optional. You can invoke the method like so:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;send_email &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;admnistrator@example.com&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:body&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;This was easy to send&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;
    </content>
  </entry>
  
  <entry>
    <title>Date Range Goodies in Rails</title>
    <link href="http://localhost:1313/2008/08/date-range-goodies-in-rails/"/>
    <id>http://localhost:1313/2008/08/date-range-goodies-in-rails/</id>
    <updated>2008-08-27T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Sometimes Rails just blows me away, and it just happened a few moments ago. When it comes to dealing with dates and their formats between different databases, Ruby, time zones, etc, etc…it can get pretty nasty. I can’t believe the amount of help Rails delivers in this arena.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Let’s assume I’m trying to track phone calls across time ranges; daily, monthly, yearly. This can usually become troublesome as I’ll have to query the database to find only records inside those ranges. I will spare you all the lame ways I tried to implement this by hand and just show you the code of how to create a named scope and call it using Rails 2.1.0.&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# in call.rb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;class&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;Call&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;ActiveRecord&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Base&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  named_scope &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:by_month&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;lambda&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;d&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:conditions&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:date&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; d&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;beginning_of_month&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;..&amp;lt;/span&amp;gt;d&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;end_of_month &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;What this does is create a new scope called &amp;lt;code&amp;gt;by_month&amp;lt;/code&amp;gt; that lets me query the database…by month :) and pass in a Date object as a single parameter. Rails/ActiveRecord will take the Date object and pass it to the lambda block, which calls the two Rails helpers ( &amp;lt;code&amp;gt;beginning_of_month&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;end_of_month&amp;lt;/code&amp;gt; ) to find the date range for the month my Date object is in. It then queries the database using that date range!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Awesome.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Now I can access the records I want like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;this_months_calls &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Call&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;by_month &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Date&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;today
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;And Rails will return all the calls that were recorded during the current month. Love it.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Easy Configuration with Ruby and Yaml</title>
    <link href="http://localhost:1313/2008/08/easy-configuration-with-ruby-and-yaml/"/>
    <id>http://localhost:1313/2008/08/easy-configuration-with-ruby-and-yaml/</id>
    <updated>2008-08-19T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Even trivial apps need to be configured. I used to simply define my app config somewhere near the top of the file, as many others do.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;However, this becomes troublesome in a few common scenarios:&amp;lt;/p&amp;gt;
&amp;lt;ol&amp;gt;
&amp;lt;li&amp;gt;You want to share your source code with somebody else, but not your super-secret password&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Your application becomes more complex and multiple areas need access to configuration variables&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;
&amp;lt;p&amp;gt;Abstracting configuration out of your Ruby app and into a separate &amp;lt;a href=&amp;#34;http://www.yaml.org/&amp;#34;&amp;gt;Yaml&amp;lt;/a&amp;gt; file is super-simple. Here’s some codey code to use as an example:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# this is &amp;amp;#39;myapp.rb&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;yaml&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;CONFIG&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Yaml&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;load_file&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;config.yml&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; defined? &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;CONFIG&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Your super-secret password is &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;CONFIG&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;password&amp;amp;#39;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Can it get any easier than that? I submit that it, in fact, cannot get any easier. You probably want to know what the &amp;lt;code&amp;gt;config.yml&amp;lt;/code&amp;gt; file looks like, huh:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# this is my &amp;amp;#39;config.yml&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;username&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; jerodsanto
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;password&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;:&amp;lt;/span&amp;gt; awesome
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now if you want to share your source with a friend, perhaps via git, you can just add &amp;lt;code&amp;gt;config.yml&amp;lt;/code&amp;gt; to the &amp;lt;code&amp;gt;.gitignore&amp;lt;/code&amp;gt; file in your repository and create a &amp;lt;code&amp;gt;config-sample.yml&amp;lt;/code&amp;gt; which holds dummy values.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Any questions?&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Ruby to the Rescue</title>
    <link href="http://localhost:1313/2008/08/ruby-to-the-rescue/"/>
    <id>http://localhost:1313/2008/08/ruby-to-the-rescue/</id>
    <updated>2008-08-18T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Ruby makes handling exceptions super simple. Lets assume you’re about to run a sketchy bit of code, like requesting a remote web site. It might look something like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;open-uri&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;url &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://slashdot.org/&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;doc &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;open&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now, what if &amp;lt;a href=&amp;#34;http://slashdot.org/&amp;#34;&amp;gt;SlashDot&amp;lt;/a&amp;gt; is down for maintenance, overloaded with traffic, or has blocked your IP for scraping their site every 30 seconds? This code nugget will fail and your program will explode like a piñata during Puerto Rico Days. Let’s account for this and terminate our program gracefully:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;open-uri&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;url &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;http://slashdot.org/&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;begin&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;   doc &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;open&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;rescue&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;   &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;The request for a page at &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; timed out...exiting.&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;exit&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Ahh, that’s better! But what if we’re iterating a list of url’s and scraping pages? Maybe we don’t want to exit the program at all, but continue with the next url in the list. I’ll demo with 3 urls:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;open-uri&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;urls &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%w[ http://slashdot.org/ http://news.ycombinator.com/ http://www.techmeme.com/ ]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;urls&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;begin&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    doc &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;open&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;rescue&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;The request for a page at &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; timed out...skipping.&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;next&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now we safely output the offending error and continue with the next value in the urls array. That’s naace!&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The truth is that this will not catch all exceptions. The problem is that when using the open-uri class you can receive an &amp;lt;code&amp;gt;OpenURI::Error&amp;lt;/code&amp;gt; if the site you’re trying to access returns a 404, 403, 500 or other “not good” response, and you can receive a &amp;lt;code&amp;gt;Timeout::Error&amp;lt;/code&amp;gt; if the site simply doesn’t respond at all and the request times out. Let’s modify our nugget to handle both scenarios:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;require&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;open-uri&amp;amp;#39;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;urls &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%w[ http://slashdot.org/ http://news.ycombinator.com/ http://www.techmeme.com/ ]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;urls&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;begin&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    doc &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;open&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;rescue&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Timeout&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Error&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;The request for a page at &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; timed out...skipping.&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;next&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;rescue&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;OpenURI&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Error&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; e
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;The request for a page at &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;url&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; returned an error. &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;e&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;message&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;next&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;You can use multiple &amp;lt;code&amp;gt;rescue&amp;lt;/code&amp;gt; blocks to handle multiple exception classes. Now we should have a bullet-proof code nugget. See any chinks in the armor? Let me know in the comments.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>jQuery Wizard Redux</title>
    <link href="http://localhost:1313/2008/08/jquery-wizard-redux/"/>
    <id>http://localhost:1313/2008/08/jquery-wizard-redux/</id>
    <updated>2008-08-09T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I was interested in creating a step-by-step form wizard for a Rails app I’ve been working on, so naturally I began searching for a jQuery plugin or tutorial. The best thing I could find was a ‘plugin’ written back in June of 2007 on &amp;lt;a href=&amp;#34;http://worcesterwideweb.com/2007/06/04/jquery-wizard-plugin/&amp;#34;&amp;gt;this blog&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The &amp;lt;a href=&amp;#34;http://worcesterwideweb.com/jquery/wizard/&amp;#34;&amp;gt;demo&amp;lt;/a&amp;gt; was quite attractive so I immediately began trying to work this implementation into my app. Upon reviewing the source code, I became a little less excited because the markup and styling left a lot to be desired. So instead of just complaining about it in the comments of the blog post (as had become my unfortunate custom), I figured I’d just re-write the thang until I was happy with it.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;A few of my redesign goals:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;Eliminate redundant step titles and descriptions&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Remove unneeded styles from &amp;lt;a href=&amp;#34;http://codylindley.com/CSS/325/css-step-menu&amp;#34;&amp;gt;Cody Lindley’s CSS step menu&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;More jQuery, less HTML&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Use valid markup&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Reduce LOC dramatically&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;Comment code well to increase learning/understanding potential&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;p&amp;gt;So How’d it turn out? I validated the markup, removed all redundancy, reduced the HTML required from 84 to 21 LOC, the CSS from 191 to 108, and made the JavaScript unobtrusive. As far as the commenting and quality of the JavaScript used, I’ll leave that for you to judge.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;To see the wizard in action, follow &amp;lt;a href=&amp;#34;http://jerodsanto.net/src/wizard/demo/&amp;#34;&amp;gt;this link&amp;lt;/a&amp;gt;. You can also download all the source files as a &amp;lt;a href=&amp;#34;http://jerodsanto.net/src/wizard/wizard.zip&amp;#34;&amp;gt;zip&amp;lt;/a&amp;gt; or &amp;lt;a href=&amp;#34;http://jerodsanto.net/src/wizard/wizard.tgz&amp;#34;&amp;gt;tarball&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Feel free to give suggestions in the comments section. Or do as I did and modify my version to make it even better!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Pass Optional Arguments to Ruby Method</title>
    <link href="http://localhost:1313/2008/07/pass-optional-arguments-to-ruby-method/"/>
    <id>http://localhost:1313/2008/07/pass-optional-arguments-to-ruby-method/</id>
    <updated>2008-07-24T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;This is the &amp;lt;em&amp;gt;Ruby way&amp;lt;/em&amp;gt; of passing optional arguments with default values into a method:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;def&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;awesomeness&amp;lt;/span&amp;gt; options &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#sensible defaults&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  opts &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;   &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:name&amp;lt;/span&amp;gt;   &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Jerod&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;   &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:handle&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;jerodsanto&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;   &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:blog&amp;lt;/span&amp;gt;   &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Standard Deviations&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;merge options
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  opts&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;each &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;{&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt;key&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt;value&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;|&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;key&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; = &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;value&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;When called sans arguments this function will print the following:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;awesomeness
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;handle &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; jerodsanto
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Jerod&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;blog &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Standard&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Deviations&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;When called with arguments this function will merge them into the opts variable and print the following:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;awesomeness &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:name&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Santo&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;handle &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; jerodsanto
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;name&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Santo&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;blog &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Standard&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Deviations&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The defaults are used unless you specify an override in the method call, in which case the override is merged into the opts hash.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Rails &#43; Screen = Awesome</title>
    <link href="http://localhost:1313/2008/07/rails--screen-awesome/"/>
    <id>http://localhost:1313/2008/07/rails--screen-awesome/</id>
    <updated>2008-07-24T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Unix’s &amp;lt;code&amp;gt;screen&amp;lt;/code&amp;gt; utility is like pow-pow-power wheels for remote shells. I created a short screencast awhile back showing how to use screen to ease your Rails development.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;The server that was hosted on is gonzo so I am reposting it here for your enjoyment:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;a href=&amp;#34;http://jerodsanto.net/embed/screen.swf&amp;#34;&amp;gt;Link to Embedded Screencast&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Traversing Directories with Ruby</title>
    <link href="http://localhost:1313/2008/07/traversing-directories-with-ruby/"/>
    <id>http://localhost:1313/2008/07/traversing-directories-with-ruby/</id>
    <updated>2008-07-15T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;If you want to shove filenames of all files in a directory into an array, do:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# (absolute path)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;files &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dir&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/Users/jerod/src/**&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# (relative path)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;files &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dir&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;expand_path&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;~/src&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/**&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# (in ENV[&amp;amp;#34;PWD&amp;amp;#34;], aka current directory)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;files &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dir&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;**&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;If you want to shove filenames of all files in a directory &amp;lt;strong&amp;gt;recursively&amp;lt;/strong&amp;gt; into an array, do:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# (absolute path)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;files &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dir&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/Users/jerod/src/**/**&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# (relative path)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;files &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dir&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;expand_path&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;~/src&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&#43;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/**/**&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# (in ENV[&amp;amp;#34;PWD&amp;amp;#34;], aka current directory)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;files &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Dir&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;**/**&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;It doesn’t get much easier than that.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Capify - public key deployment</title>
    <link href="http://localhost:1313/2008/07/capify-public-key-deployment/"/>
    <id>http://localhost:1313/2008/07/capify-public-key-deployment/</id>
    <updated>2008-07-11T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;I’ve been playing with &amp;lt;a href=&amp;#34;http://capify.org/&amp;#34;&amp;gt;Capistrano&amp;lt;/a&amp;gt; a lot lately and loving it. Here is an example of how easy it is to write tasks and use them on multiple remote servers.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;This task installs your SSH public key on the remote machine to allow key-based authentication:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;set &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:key_file&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;Capistrano&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;::&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;CLI&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;ui&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;ask &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;enter public key to push: &amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;desc &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;configures key-based SSH administration&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;task &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:push_key&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:roles&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:all&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  key_location &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;expand_path&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;key_file&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;unless&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;exist?&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;key_location&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;and&amp;lt;/span&amp;gt; key_file&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;match&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/\.pub$/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;puts&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;Couldn&amp;amp;#39;t locate public key. Try again&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;exit&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  key_file_name &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;File&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;basename&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;key_location&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  upload key_location&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;/tmp/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;key_file_name&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;if [ ! -e ~/.ssh ];then mkdir ~/.ssh; fi&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;cat /tmp/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;key_file_name&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; &amp;amp;gt;&amp;amp;gt; ~/.ssh/authorized_keys&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;rm /tmp/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;key_file_name&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;chmod 600 ~/.ssh/authorized_keys&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Silky smooth.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>Rails: Nested Layouts</title>
    <link href="http://localhost:1313/2008/06/rails-nested-layouts/"/>
    <id>http://localhost:1313/2008/06/rails-nested-layouts/</id>
    <updated>2008-06-20T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;Sometimes one layout (application.html.erb) just doesn’t cut it, but you don’t want a separate layout for each controller in your app. You can use the following technique to nest your Rails app’s layouts:&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;In this example, there are two controllers for a simple todo list manager; &amp;lt;code&amp;gt;lists&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;tasks&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;#  application.html.erb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;html&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;head&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;title&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;TODO&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%= yield(:title) || &amp;amp;#34;Get things done!&amp;amp;#34; %&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;    &amp;amp;lt;/title&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;    &amp;amp;lt;%=&amp;lt;/span&amp;gt; stylesheet_link_tag &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#39;todo&amp;amp;#39;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;  &amp;amp;lt;/head&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;body&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;div &amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;id&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;container&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;      &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;p&amp;lt;/span&amp;gt; style&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;color: green&amp;amp;#34;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%= flash[:notice] %&amp;amp;gt;&amp;amp;lt;/p&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;      &amp;amp;lt;%=&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;yield&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:main&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;    &amp;amp;lt;/div&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/body&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;/&amp;lt;/span&amp;gt;html&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;The key here is the &amp;lt;code&amp;gt;yield :main&amp;lt;/code&amp;gt; which means we can use &amp;lt;code&amp;gt;content_for&amp;lt;/code&amp;gt; to put our nested layouts’ output inside the yield. Here is the &amp;lt;code&amp;gt;lists&amp;lt;/code&amp;gt; layout:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#57606a&amp;#34;&amp;gt;# lists.html.erb&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;% content_for &amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:main&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;  &amp;amp;lt;div id=&amp;amp;#34;lists_container&amp;amp;#34;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;&amp;amp;lt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;%= yield %&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;  &amp;amp;lt;/div&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;% end %&amp;amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;lt;%=&amp;lt;/span&amp;gt; render &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:file&amp;lt;/span&amp;gt;  &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;amp;gt;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;layouts/application.html.erb&amp;amp;#34;&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;%&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Now your view gets rendered inside this layout’s &amp;lt;code&amp;gt;yield&amp;lt;/code&amp;gt; and its all good in the hood. Cheers!&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
  <entry>
    <title>git clone &amp; pull without changing directories</title>
    <link href="http://localhost:1313/2008/05/git-clone-pull-without-changing-directories/"/>
    <id>http://localhost:1313/2008/05/git-clone-pull-without-changing-directories/</id>
    <updated>2008-05-19T00:00:00Z</updated>
    <content type="html">
      &amp;lt;p&amp;gt;If you’re trying to configure git commands in a directory that isn’t &amp;lt;code&amp;gt;pwd&amp;lt;/code&amp;gt;, you’ll have to deal with &amp;lt;code&amp;gt;clone&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;pull&amp;lt;/code&amp;gt; a little differently. Clone works like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-bash&amp;#34; data-lang=&amp;#34;bash&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;git clone &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#6639ba&amp;#34;&amp;gt;source&amp;lt;/span&amp;gt; location&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;[&amp;lt;/span&amp;gt;destination location&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;]&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;An example clone into my application&amp;amp;rsquo;s vendor directory:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-bash&amp;#34; data-lang=&amp;#34;bash&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;clone git://github.com/rails/rails.git ~/rails/myapp/vendor/rails
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Pull works like this:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-bash&amp;#34; data-lang=&amp;#34;bash&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;git-dir&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;/path/to/destination/.git pull
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;An example pull in the already initiated local rails repository:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-bash&amp;#34; data-lang=&amp;#34;bash&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;git-dir&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt;~/rails/myapp/vendor/rails/.git pull
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;Using these approaches, you can simplify your &amp;lt;a href=&amp;#34;http://capify.org/&amp;#34;&amp;gt;capistrano&amp;lt;/a&amp;gt; recipes. here is an example snippet:&amp;lt;/p&amp;gt;
&amp;lt;div class=&amp;#34;highlight&amp;#34;&amp;gt;&amp;lt;pre tabindex=&amp;#34;0&amp;#34; style=&amp;#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&amp;#34;&amp;gt;&amp;lt;code class=&amp;#34;language-ruby&amp;#34; data-lang=&amp;#34;ruby&amp;#34;&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;set &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:rails_source&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;git://github.com/rails/rails.git&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;desc &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;git the latest rails&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;task &amp;lt;span style=&amp;#34;color:#032f62&amp;#34;&amp;gt;:git_rails&amp;lt;/span&amp;gt; &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;do&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;mkdir -p &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;shared_path&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/vendor&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  result &amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;=&amp;lt;/span&amp;gt; run_and_return &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;ls &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;shared_path&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/vendor&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;if&amp;lt;/span&amp;gt; result&amp;lt;span style=&amp;#34;color:#0550ae&amp;#34;&amp;gt;.&amp;lt;/span&amp;gt;match&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/rails/&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#1f2328&amp;#34;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;git --git-dir=&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;shared_path&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/vendor/rails/.git pull&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;else&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;    run &amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;&amp;amp;#34;git clone &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;rails_source&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt; &amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;#{&amp;lt;/span&amp;gt;shared_path&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;}&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;color:#0a3069&amp;#34;&amp;gt;/vendor/rails&amp;amp;#34;&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;  &amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;span style=&amp;#34;display:flex;&amp;#34;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span style=&amp;#34;color:#cf222e&amp;#34;&amp;gt;end&amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;See &amp;lt;code&amp;gt;man git-clone&amp;lt;/code&amp;gt; and &amp;lt;code&amp;gt;man git-pull&amp;lt;/code&amp;gt; for more details.&amp;lt;/p&amp;gt;

    </content>
  </entry>
  
</feed>