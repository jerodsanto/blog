<!DOCTYPE html>



 <html class="no-js"> 
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Jerod Santo">
    <meta property="og:site_name" content="Jerod Santo">
    
    <meta name="description" content="">
    <meta property="st:title" content="Sysadmin">
    <meta property="og:title" content="Sysadmin">
    <meta property="og:description" content="">
    <meta property="og:type" content="article">
    
    <meta property="og:image" content="/icon.png">
    
    
    <title>
      Sysadmin | Jerod Santo
    </title>

    <link rel="icon" href="/icon.png" sizes="256x256" type="image/png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" media="all" href="/styles.css">
    <script>
       
      window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!(!t.document.createElementNS||!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),o=function(o){var r=t.document.createElement("link"),a=t.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=e[o&&n?0:o?1:2],a.parentNode.insertBefore(r,a)},r=new t.Image;r.onerror=function(){o(!1)},r.onload=function(){o(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}};
      grunticon(["/icons/icons.data.svg.css", "/icons/icons.data.png.css", "/icons/icons.fallback.css"]);
    </script>

    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400italic,400' rel='stylesheet' type='text/css'>
    <script src="//use.typekit.net/ozg5mvx.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
    <script src="/js/modernizr-custom.js"></script>

    

    <link rel="alternate" type="application/atom+xml" href="/index.xml" />
  </head>
  <body class="">
    
    <div class="main-header">
      <h1>
        <a href="/" title="Home">
          <span class="big-dot">&middot;</span> Jerod Santo <span class="big-dot">&middot;</span>
        </a>
      </h1>
      <a href="javascript:void(0);" title="Moar" class="main-header-more">+</a>
      <a href="/archives/" title="View Blog Archives" class="main-header-archive">Archives</a>
      <a href="mailto:jerod.santo@gmail.com" title="Contact Jerod" class="main-header-contact">Contact</a>
      <a href="/search/" title="Search the site" class="main-header-search">Search</a>
    </div>
    

    
<section class="main-wrapper excerpt-list">
  <header class="section-header">
    <h1>Sysadmin</h1>
    
  </header>

  
    <article class="excerpt">
  <a href="http://localhost:1313/2013/04/be-careful-when-you-create-a-unified-ssl-certificate-for-nginx/">
    <h1 class="excerpt-header">Be Careful When You Create a Unified SSL Certificate for Nginx</h1>
    <p class="excerpt-date">April 8, 2013</p>
    <p class="excerpt-text"><p>If one of the files doesn&rsquo;t have a newline at the end and you create the unified certificate (as instructed for <a href="http://www.startssl.com/?app=42">StartSSL</a> certs) like so:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">cat ssl.crt sub.class1.server.ca.pem ca.pem &gt; /etc/nginx/conf/ssl-unified.crt
</span></span></span></code></pre></div><p>Then you will end up with an error that looks like this:</p>
<blockquote>
<p>SSL_CTX_use_certificate_chain_file failed (SSL: error:0906D066:PEM routines:PEM_read_bio:bad end line error:140DC009:SSL routines:SSL_CTX_use_certificate_chain_file:PEM lib)</p>
</blockquote>
<p>Check out your <code>ssl-unified.crt</code> and you&rsquo;ll see that there is no newline between one or more of the certificates, like this:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2012/11/creating-an-ssh-tunnel-to-a-remote-service/">
    <h1 class="excerpt-header">Creating an SSH Tunnel to a Remote Service</h1>
    <p class="excerpt-date">November 28, 2012</p>
    <p class="excerpt-text"><p>File this under <strong>just-blog-it-already-so-you-can-stop-googling-it</strong></p>
<p>Imagine having Nagios/Resque Web/Monit/Cacti/MySQL/etc all set up on one of your servers. You want to access it from your local machine, but you don&rsquo;t want to make it listen on a public interface and set up a firewall and all that junk.</p>
<p>Instead, you can use SSH to tunnel your local client to the remote server&rsquo;s service. The command looks like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">ssh user@remotehost -N -L localhost:localport:remotehost:remoteport
</span></span></span></code></pre></div><p>For example, let&rsquo;s say that <a href="https://github.com/defunkt/resque-web">Resque Web</a> is listening on port <strong>5678</strong> on my <strong>jerodsanto.net</strong> server and I want to access it via port <strong>9999</strong> in my local browser.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2012/06/3-tools-i-install-on-every-server/">
    <h1 class="excerpt-header">3 Tools I Install on Every Server</h1>
    <p class="excerpt-date">June 14, 2012</p>
    <p class="excerpt-text"><p>Over the years, I&rsquo;ve found a few tools so invaluable for managing *nix servers that I end up installing them on every machine under my employ.</p>
<p>They are, in no particular order:</p>
<h2 id="htop">htop</h2>
<p><code>htop</code> is what <code>top</code> looks like after she puts on her dancing shoes on a Friday night. Basically <code>htop</code> turns this:</p>
<p><img src="http://jerodsanto.net/drop/top-20120614-160039.png" alt="top"></p>
<p>into this:</p>
<p><img src="http://jerodsanto.net/drop/htop-20120614-155945.png" alt="htop"></p>
<p>It&rsquo;s such an improvement over plain ole&rsquo; <code>top</code> — with no known downsides — that I have an alias in my shell:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2012/05/tee-for-two/">
    <h1 class="excerpt-header">Tee for Two</h1>
    <p class="excerpt-date">May 16, 2012</p>
    <p class="excerpt-text"><p><a href="http://en.wikipedia.org/wiki/Tee_(command)">Tee</a> is one of those commands so simple, so basic that you&rsquo;ve either been using it for years (and turn your nose up at me for writing about something so obvious) or you&rsquo;ll wish you had been (and sing my praises for writing about something so useful).</p>
<p>Sometimes you want to send a program&rsquo;s output to two locations. The most obvious case (and really the only one that I use) is when you want to display logging/debugging information in your shell and also capture it on disk for later analysis. Tee makes it dead simple. For example, an uploader Ruby script that logs to STDOUT:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2012/03/get-firehol-off-of-rsyslogs-lawn/">
    <h1 class="excerpt-header">Get FireHOL off of RSyslog&#39;s lawn</h1>
    <p class="excerpt-date">March 27, 2012</p>
    <p class="excerpt-text"><p><a href="http://firehol.sourceforge.net/">FireHOL</a> is the best tool I&rsquo;ve used for configuring Linux firewalls. But it can really spew its logs all over your <code>kern.log</code> and <code>syslog</code>. Getting it to stop this is non-obvious so hopefully this saves you some time.</p>
<div class="notice">This tutorial is for Debian 6 running rsyslog. As always, YMMV.</div>
<h2 id="install-firehol">Install FireHOL</h2>
<p>This is the easy part.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">aptitude install firehol
</span></span></span></code></pre></div><h2 id="make-sure-it-can-start">Make sure it can start</h2>
<p>Debian&rsquo;s FireHOL package has it disabled by default. Edit <code>/etc/default/firehol</code> and set:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2011/01/quickly-determine-your-current-heroku-database-size/">
    <h1 class="excerpt-header">Quickly Determine Your Current Heroku Database Size</h1>
    <p class="excerpt-date">January 26, 2011</p>
    <p class="excerpt-text"><p>Heroku&rsquo;s free offering includes a 5MB shared database. After your database grows past that, you&rsquo;ll have to upgrade to their (as of now) $15 per month shared database which can grow up to 20GB.</p>
<p>5MB ain&rsquo;t much, but it will get you started. But how do you know where your app currently stands? Heroku does not expose the current database size of your application via their web interface or command-line tool, but it&rsquo;s pretty easy to get at.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/11/managing-broken-symlinks/">
    <h1 class="excerpt-header">Managing Broken Symlinks</h1>
    <p class="excerpt-date">November 5, 2009</p>
    <p class="excerpt-text"><p>I just added two new functions to my <a href="http://github.com/jerodsanto/dotfiles/blob/master/bashrc">bashrc</a> which make it super-simple to find &amp; remove broken symbolic links on your system.</p>
<p>They&rsquo;re simple wrappers around the ever-useful &ldquo;find&rdquo; utility:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#cf222e">function</span> find_broken_symlinks<span style="color:#0550ae">()</span> <span style="color:#0550ae">{</span> find -x -L <span style="color:#0a3069">&#34;</span><span style="color:#0a3069">${</span><span style="color:#953800">1</span><span style="color:#1f2328">-.</span><span style="color:#0a3069">}</span><span style="color:#0a3069">&#34;</span> -type l<span style="color:#1f2328">;</span> <span style="color:#0550ae">}</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">function</span> rm_broken_symlinks<span style="color:#0550ae">()</span> <span style="color:#0550ae">{</span> find -x -L <span style="color:#0a3069">&#34;</span><span style="color:#0a3069">${</span><span style="color:#953800">1</span><span style="color:#1f2328">-.</span><span style="color:#0a3069">}</span><span style="color:#0a3069">&#34;</span> -type l -exec rm <span style="color:#0550ae">{}</span> +<span style="color:#1f2328">;</span> <span style="color:#0550ae">}</span>
</span></span></code></pre></div><p>You can call the functions with a specific path:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">jerod@mbp:~$ find_broken_symlinks /usr/local/bin
</span></span></span></code></pre></div><p>Or you can call them sans argument to search your current working directory:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/06/php5-with-readline-support-on-os-x/">
    <h1 class="excerpt-header">PHP5 with readline support on OS X</h1>
    <p class="excerpt-date">June 6, 2009</p>
    <p class="excerpt-text"><p>OS X ships with PHP5 installed but it does not have <code>readline()</code> support compiled in. Anybody using PHP from the command-line will want this, as it allows handy things such as tab completion and scrolling through command history using the up arrow.</p>
<p>Thankfully, <a href="http://www.macports.org/">MacPorts</a> has a readline variant that can be easily installed:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">sudo port install php5 +readline
</span></span></span></code></pre></div><p>If you execute the command above, apache2 will come along for the ride because it&rsquo;s a default variant for the PHP5 port. If you don&rsquo;t want apache2 (OS X ships with apache2 anyways), modify the command to look like this:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/05/rename-a-gitosis-repository/">
    <h1 class="excerpt-header">Rename A Gitosis Repository</h1>
    <p class="excerpt-date">May 28, 2009</p>
    <p class="excerpt-text"><p>I use <a href="http://eagain.net/gitweb/?p=gitosis.git;a=summary">gitosis</a> for private git repository hosting (and it&rsquo;s awesome). If you are interested, this<a href="http://scie.nti.st/2007/11/14/hosting-git-repositories-the-easy-and-secure-way"> great tutorial</a> will walk you through setting it up yourself.</p>
<p>I recently needed to rename one of my repositories and couldn&rsquo;t find any info on how to do it, so here is a walk-thru. I will demonstrate the steps of renaming a repository called &ldquo;<strong>tk</strong>&rdquo; to &ldquo;<strong>show-time</strong>&rdquo;.</p>
<p>Rename project in gitosis.conf</p>
<p>Before:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">[group main]
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">writable = tk
</span></span></span></code></pre></div><p>After:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/05/avoid-sore-fingers-while-sshing-around/">
    <h1 class="excerpt-header">Avoid Sore Fingers While SSHing Around</h1>
    <p class="excerpt-date">May 14, 2009</p>
    <p class="excerpt-text"><p>If you&rsquo;re anything like me, you&rsquo;ve gotten accustomed to commands like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>jerod@mbp:~$ ssh <span style="color:#0550ae">[</span>user<span style="color:#0550ae">]</span>@<span style="color:#0550ae">[</span>remote.server.com<span style="color:#0550ae">]</span>
</span></span></code></pre></div><p>If you find yourself connecting to the same machines repeatedly, save a few keystrokes by creating a handy alias for them. Create (or edit) &ldquo;<strong>~/.ssh/config</strong>&rdquo; and add as many of these as your little heart desires:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Host <span style="color:#0550ae">[</span>the alias<span style="color:#0550ae">]</span>
</span></span><span style="display:flex;"><span>HostName <span style="color:#0550ae">[</span>domain name or IP address<span style="color:#0550ae">]</span>
</span></span><span style="display:flex;"><span>User <span style="color:#0550ae">[</span>the account to login as<span style="color:#0550ae">]</span>
</span></span></code></pre></div><p>Now you don&rsquo;t have to use the full command to access the machine, just use the alias! For example, here is how I access one of my DreamHost servers:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/03/21/">
    <h1 class="excerpt-header">2&gt;&amp;1</h1>
    <p class="excerpt-date">March 17, 2009</p>
    <p class="excerpt-text"><p>A common practice when adding entries to crontab is to end the entry like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt;/dev/null 2&gt;<span style="color:#1f2328">&amp;</span><span style="color:#0550ae">1</span>
</span></span></code></pre></div><p>The purpose of this is to suppress any output from the command itself, because we&rsquo;re not interested. I picked up this syntax years ago because it just works, but I never knew what the <code>2&gt;&amp;1</code> actually meant, until today.</p>
<p>The first part:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt;/dev/null
</span></span></code></pre></div><p>Means redirect <code>STDOUT</code> (the standard output stream) to <code>/dev/null</code> (which is basically a blackhole for bits). That&rsquo;s easy enough.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/03/rsnapshot-rsync-gotcha/">
    <h1 class="excerpt-header">Rsnapshot (Rsync) Gotcha</h1>
    <p class="excerpt-date">March 9, 2009</p>
    <p class="excerpt-text"><p>If you&rsquo;re trying to backup a remote host using <a href="http://rsnapshot.org/">rsnapshot</a> (or rsync by itself) and run into one of the following ambiguous errors:</p>
<p><strong>rsnapshot version:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">ERROR: /usr/bin/rsync returned 12 while processing ...
</span></span></span></code></pre></div><p><strong>rsync version:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#1f2328">rsync error: error in rsync protocol data stream (code 12)
</span></span></span></code></pre></div><p>It&rsquo;s probably because you don&rsquo;t have rsync installed on the remote host (doh!)</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/02/bash-array-and-loops-in-firehol-configuration/">
    <h1 class="excerpt-header">Bash array and loops in FireHOL configuration</h1>
    <p class="excerpt-date">February 26, 2009</p>
    <p class="excerpt-text"><p>IPTables is a powerful but cryptic firewall solution. <a href="http://firehol.sourceforge.net/">FireHOL</a> is an IPTables configurator that flat out rocks. One of FireHOL&rsquo;s strengths is that it uses standard <a href="http://www.gnu.org/software/bash/bash.html">BASH</a> syntax inside its configuration file, so you get all the power of BASH to configure your firewall.</p>
<p>Let&rsquo;s see how a BASH array and for loop can help clean up our FireHOL config:</p>
<p>You have 3 machines that need SSH access to the server. First, you can setup variable names to reference the IP addresses (or DNS names) of the machines. Put these declarations at the top of your FireHOL config for easy maintenance.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/02/getting-ready-for-lenny/">
    <h1 class="excerpt-header">Getting ready for Lenny</h1>
    <p class="excerpt-date">February 16, 2009</p>
    <p class="excerpt-text"><p>You don&rsquo;t need to fire up an editor to switch your APT repositories from Debian 4 (Etch) to Debian 5 (Lenny):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>ruby <span style="color:#0550ae">-</span>i <span style="color:#0550ae">-</span>pe <span style="color:#0a3069">&#39;$_.gsub!(&#34;etch&#34;,&#34;lenny&#34;)&#39;</span> <span style="color:#0a3069">/etc/</span>apt<span style="color:#0550ae">/</span>sources<span style="color:#0550ae">.</span>lst
</span></span></code></pre></div></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2009/02/great-article-on-aptitude-vs-apt-get/">
    <h1 class="excerpt-header">Great Article on Aptitude vs Apt-Get</h1>
    <p class="excerpt-date">February 16, 2009</p>
    <p class="excerpt-text"><p>If you need some convincing to start using aptitude for all your Debian/Ubuntu software management needs, Aaron Toponce&rsquo;s article will do the job. It&rsquo;s a few years old (at the time of this post) but still relevant.</p>
<p>Don&rsquo;t take my word for it. <a href="http://pthree.org/2007/08/12/aptitude-vs-apt-get/">Read it for yourself.</a></p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/09/fix-your-debian-vmware-images-network-after-offline-copy/">
    <h1 class="excerpt-header">fix your Debian VMware image&#39;s network after offline copy</h1>
    <p class="excerpt-date">September 17, 2008</p>
    <p class="excerpt-text"><p>If you copy and move a VMware virtual machine that runs Debian, you’ll find that the network adapter is no longer available, which sucks.</p>
<p>I implemented a simple fix using Ruby. Just make it start at boot by adding it to your <code>/etc/rc.local</code> and it should be all good.</p>
<p><strong>NOTICE:</strong> automatically reboots machine</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#57606a"># 2&gt;&amp;1 redirects stderr to stdout so we can capture it</span>
</span></span><span style="display:flex;"><span>if_status <span style="color:#0550ae">=</span> <span style="color:#0a3069">`ifconfig eth0 2&gt;&amp;1`</span>
</span></span><span style="display:flex;"><span>config_file <span style="color:#0550ae">=</span> <span style="color:#0a3069">&#34;/etc/udev/rules.d/z25_persistent-net.rules&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">if</span> if_status <span style="color:#0550ae">=~</span> <span style="color:#0a3069">/Device not found/</span>
</span></span><span style="display:flex;"><span>  config_text <span style="color:#0550ae">=</span> <span style="color:#6639ba">Array</span><span style="color:#0550ae">.</span>new
</span></span><span style="display:flex;"><span>  <span style="color:#0550ae">File</span><span style="color:#0550ae">.</span>open<span style="color:#1f2328">(</span>config_file<span style="color:#1f2328">,</span><span style="color:#0a3069">&#34;r&#34;</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span> <span style="color:#0550ae">|</span>file<span style="color:#0550ae">|</span> config_text <span style="color:#0550ae">=</span> file<span style="color:#0550ae">.</span>readlines <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>  relevant_text <span style="color:#0550ae">=</span> config_text<span style="color:#0550ae">.</span>select <span style="color:#1f2328">{</span> <span style="color:#0550ae">|</span>line<span style="color:#0550ae">|</span> line <span style="color:#0550ae">=~</span> <span style="color:#0a3069">/^SUBSYSTEM==/</span> <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>  output <span style="color:#0550ae">=</span> relevant_text<span style="color:#0550ae">.</span>last<span style="color:#0550ae">.</span>gsub<span style="color:#1f2328">(</span><span style="color:#0a3069">/ethd/</span><span style="color:#1f2328">,</span><span style="color:#0a3069">&#34;eth0&#34;</span><span style="color:#1f2328">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#0550ae">File</span><span style="color:#0550ae">.</span>open<span style="color:#1f2328">(</span>config_file<span style="color:#1f2328">,</span><span style="color:#0a3069">&#34;w&#34;</span><span style="color:#1f2328">){</span> <span style="color:#0550ae">|</span>file<span style="color:#0550ae">|</span> file<span style="color:#0550ae">.</span>puts output <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#6639ba">system</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;reboot&#34;</span><span style="color:#1f2328">)</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">end</span>
</span></span></code></pre></div><p><a href="http://jerodsanto.net/src/ruby/vm_mac_fixer.rb">Download</a> and use it if you’d like.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/09/starting-asterisk-on-boot-in-debian/">
    <h1 class="excerpt-header">Starting Asterisk on Boot in Debian</h1>
    <p class="excerpt-date">September 3, 2008</p>
    <p class="excerpt-text"><p>Here’s a quickie. You just compiled <a href="http://asterisk.org/">Asterisk</a> on your <a href="http://debian.org/">Debian</a> server and you want to make sure it starts when you reboot. Here’s how:</p>
<p>Look in the <code>/contrib/init.d</code> folder of your Asterisk source directory. You’ll see a file called <code>rc.debian.asterisk</code>. If you installed Asterisk to the default location, don’t worry about editing this file. If you installed to a different location (eg - /usr/local), change the following line in the file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#953800">DAEMON</span><span style="color:#0550ae">=</span>/usr/sbin/asterisk
</span></span></code></pre></div><p>Point this at your Asterisk binary. Not sure where it is? Just type <code>which asterisk</code> from the command line and it will show you the full path.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/08/configure-network-time-protocol-ntp-in-debian/">
    <h1 class="excerpt-header">Configure Network Time Protocol (NTP) in Debian</h1>
    <p class="excerpt-date">August 27, 2008</p>
    <p class="excerpt-text"><p>Ok, this bugs the crap out of me. I set up a shiny new Debian 4.0 base install and go on my merry way, meanwhile the system time is off by a long shot! I only notice when it starts to hurt…</p>
<p>Here’s how to synchronize your Debian system’s time with network time servers, in a few simple steps (use sudo as needed):</p>
<ol>
<li>Install the necessary packages:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apt-get install ntp ntpdate
</span></span></code></pre></div><ol start="2">
<li>Stop the NTP daemon for now (apt-get will start the service upon successful installation):</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/etc/init.d/ntp stop
</span></span></code></pre></div><ol start="3">
<li>Manually synchronize the system clock to the NTP server pool:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ntpdate pool.ntp.org
</span></span></code></pre></div><p>3.5) An explanation: the NTP server daemon will fail to sync with the NTP servers if the system time is too far from the NTP servers time so its best to manually synchronize once to get your system time close enough.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/08/debian-etch-default-repositories/">
    <h1 class="excerpt-header">Debian Etch: Default Repositories</h1>
    <p class="excerpt-date">August 22, 2008</p>
    <p class="excerpt-text"><p>In case you muck up your <code>/etc/apt/sources.list</code> and want to set it back to the defaults, just copy and paste this in:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>deb http://ftp.debian.org/debian/ etch main
</span></span><span style="display:flex;"><span>deb-src http://ftp.debian.org/debian/ etch main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>deb http://security.debian.org/ etch/updates main contrib
</span></span><span style="display:flex;"><span>deb-src http://security.debian.org/ etch/updates main contrib
</span></span></code></pre></div></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/08/debian-quickie-mailutils/">
    <h1 class="excerpt-header">Debian Quickie: MailUtils</h1>
    <p class="excerpt-date">August 12, 2008</p>
    <p class="excerpt-text"><p>All (except for one RHEL4 box) of the servers I run use <a href="http://debian.org/">Debian</a>. I have become accustomed to using the default mail client <code>/usr/bin/mail</code> that ships with the O/S for reading local email coming in from cron jobs.</p>
<p>Well, it turns out that this handy little tool doesn’t <em>actually</em> ship with a base Debian Etch install.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bash: mail: <span style="color:#6639ba">command</span> not found
</span></span></code></pre></div><p>Grrrr!</p>
<p>Turns out you have to have mailutils installed to get <code>/usr/bin/mail</code>. I always forget this package name so I figured I’d post it here for easy access.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/07/symlink-your-samba-shares/">
    <h1 class="excerpt-header">Symlink Your Samba Shares</h1>
    <p class="excerpt-date">July 23, 2008</p>
    <p class="excerpt-text"><p>Lets face it, oftentimes a symbolic link is just the quickest/easiest solution to the task at hand.</p>
<p>To configure <a href="http://www.samba.org">Samba</a> to allow symlinking directories/files into your shared directories, add the following three lines to the global section of <code>smb.conf</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>follow <span style="color:#953800">symlinks</span> <span style="color:#0550ae">=</span> yes
</span></span><span style="display:flex;"><span>wide <span style="color:#953800">symlinks</span> <span style="color:#0550ae">=</span> yes
</span></span><span style="display:flex;"><span>unix <span style="color:#953800">extensions</span> <span style="color:#0550ae">=</span> no
</span></span></code></pre></div><p>Easy peasy lemon squeezy.</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/06/slicehost--debian--firehol-gotchas/">
    <h1 class="excerpt-header">SliceHost &#43; Debian &#43; FireHOL gotchas</h1>
    <p class="excerpt-date">June 20, 2008</p>
    <p class="excerpt-text"><p>Securing your <a href="http://www.slicehost.com">slice</a> with <a href="http://firehol.sourceforge.net">FireHOL</a> is a really, really good move. Here are a few notes that may save you some time:</p>
<p>FireHOL requires a kernel config to know which modules to load, SliceHost uses Xen, so to get the kernel configuration in the right place, execute the following commands:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/proc/config.gz ~ <span style="color:#0550ae">&amp;&amp;</span> <span style="color:#6639ba">cd</span> ~
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gunzip config.gz <span style="color:#0550ae">&amp;&amp;</span> mv config /boot/config-<span style="color:#0a3069">`</span>uname -r<span style="color:#0a3069">`</span>
</span></span></code></pre></div><p>FireHOL ships with a safety net configured in <code>/etc/defaults/firehol</code>. It will not start until you edit this file and change this:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/06/htop-like-top-but-awesome/">
    <h1 class="excerpt-header">htop: like top, but awesome</h1>
    <p class="excerpt-date">June 3, 2008</p>
    <p class="excerpt-text"><p>If you’ve been hacking at your linux CLI for a little while, you’re probably familiar with the pic below. If not, just type <code>top</code> and your terminal will spring to life with an ever-updating process and usage display.</p>
<p><img src="/wp-content/uploads/2008/06/top.jpg" alt="top"></p>
<p>While very useful, <code>top</code>’s output is oogly. It’s the 21st century already! Let’s use some colors!!</p>
<p>Thankfully, <code>htop</code> is here to save the day. To install on a Debian-based linux, simply type:</p></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/05/debian-disable-sytem-beep/">
    <h1 class="excerpt-header">Debian: Disable Sytem Beep</h1>
    <p class="excerpt-date">May 19, 2008</p>
    <p class="excerpt-text"><p>Here’s how to turn off that annoying system beep at your Debian CLI:</p>
<p>Just edit <code>/etc/modprobe.d/blacklist</code> and append this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>blacklist pcspkr
</span></span></code></pre></div><p>Then reboot. Can’t wait for reboot? type this command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo rmmod pcspkr
</span></span></code></pre></div></p>
  </a>
</article>
  
    <article class="excerpt">
  <a href="http://localhost:1313/2008/05/mysql-backup-and-restore/">
    <h1 class="excerpt-header">MySQL backup and restore</h1>
    <p class="excerpt-date">May 19, 2008</p>
    <p class="excerpt-text"><h2 id="create-the-backup">Create the backup</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mysqldump --add-drop-table -h <span style="color:#0550ae">[</span>host<span style="color:#0550ae">]</span> -u <span style="color:#0550ae">[</span>user<span style="color:#0550ae">]</span> <span style="color:#0a3069">\
</span></span></span><span style="display:flex;"><span><span style="color:#0a3069"></span>-p <span style="color:#0550ae">[</span>databasename<span style="color:#0550ae">]</span> &gt; <span style="color:#0550ae">[</span>backupfile<span style="color:#0550ae">]</span>.sql
</span></span></code></pre></div><p><strong>Optionally</strong></p>
<p>Specify a table -</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> ...<span style="color:#0550ae">[</span>databasename<span style="color:#0550ae">]</span> <span style="color:#0550ae">(</span>tablename tablename tablename<span style="color:#0550ae">)</span> ...
</span></span></code></pre></div><p>Add compression -</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> ...<span style="color:#0550ae">[</span>databasename<span style="color:#0550ae">]</span> <span style="color:#1f2328">|</span> bzip2 -c &gt; backupfile.sql.bz2
</span></span></code></pre></div><h2 id="restore-from-backup">Restore from backup</h2>
<p>Create database if it doesn&rsquo;t already exist (from inside mysql client)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mysql&gt; create database <span style="color:#0550ae">[</span>databasename<span style="color:#0550ae">]</span>
</span></span></code></pre></div><p>Run the restore</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mysql -h <span style="color:#0550ae">[</span>host<span style="color:#0550ae">]</span> -u <span style="color:#0550ae">[</span>user<span style="color:#0550ae">]</span> -p <span style="color:#0550ae">[</span>databasename<span style="color:#0550ae">]</span> &lt; <span style="color:#0550ae">[</span>backupfile<span style="color:#0550ae">]</span>.sql
</span></span></code></pre></div><p><strong>Optionally</strong></p>
<p>Uncompress before restoring -</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bzip2 -d backupfile.sql.bz2
</span></span></code></pre></div></p>
  </a>
</article>
  
</section>


    <footer class="main-footer">
  <p>
    Copyright &copy; 2008&mdash;2025 Jerod Santo
  </p>
</footer>

    
    <script src="/js/compiled.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-3287978-16', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>