<!DOCTYPE html>



 <html class="no-js"> 
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Jerod Santo">
    <meta property="og:site_name" content="Jerod Santo">
    
    <meta name="description" content="One unfortunate drawback of how AngularJS&rsquo;s dependency injection works is that it breaks when your code is minified. The reason it fails is that minification renames variables that Angular uses to resolve the dependencies.
So the natural way of injecting dependencies into a controller doesn&rsquo;t work:
app.controller(&#34;MyCtrl&#34;, function($scope, $http, MyService) {});
The minifier renames $scope, $http, and MyService (in order to, ahem, minify them) and the injection breaks.
The old answer to this problem (which you will still see people promoting) is to &ldquo;annotate&rdquo; your injections. At every injection point you pass in an array that resolves the variable/injection pair manually.">
    <meta property="st:title" content="You don&#39;t have to annotate your AngularJS injections anymore">
    <meta property="og:title" content="You don&#39;t have to annotate your AngularJS injections anymore">
    <meta property="og:description" content="One unfortunate drawback of how AngularJS&rsquo;s dependency injection works is that it breaks when your code is minified. The reason it fails is that minification renames variables that Angular uses to resolve the dependencies.
So the natural way of injecting dependencies into a controller doesn&rsquo;t work:
app.controller(&#34;MyCtrl&#34;, function($scope, $http, MyService) {});
The minifier renames $scope, $http, and MyService (in order to, ahem, minify them) and the injection breaks.
The old answer to this problem (which you will still see people promoting) is to &ldquo;annotate&rdquo; your injections. At every injection point you pass in an array that resolves the variable/injection pair manually.">
    <meta property="og:type" content="article">
    
    <meta property="og:image" content="/icon.png">
    
    
    <title>
      You don&#39;t have to annotate your AngularJS injections anymore | Jerod Santo
    </title>

    <link rel="icon" href="/icon.png" sizes="256x256" type="image/png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" media="all" href="/styles.css">
    <script>
       
      window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!(!t.document.createElementNS||!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),o=function(o){var r=t.document.createElement("link"),a=t.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=e[o&&n?0:o?1:2],a.parentNode.insertBefore(r,a)},r=new t.Image;r.onerror=function(){o(!1)},r.onload=function(){o(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}};
      grunticon(["/icons/icons.data.svg.css", "/icons/icons.data.png.css", "/icons/icons.fallback.css"]);
    </script>

    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400italic,400' rel='stylesheet' type='text/css'>
    <script src="//use.typekit.net/ozg5mvx.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
    <script src="/js/modernizr-custom.js"></script>

    

    <link rel="alternate" type="application/atom+xml" href="/index.xml" />
  </head>
  <body class="">
    
    <div class="main-header">
      <h1>
        <a href="/" title="Home">
          <span class="big-dot">&middot;</span> Jerod Santo <span class="big-dot">&middot;</span>
        </a>
      </h1>
      <a href="javascript:void(0);" title="Moar" class="main-header-more">+</a>
      <a href="/archives/" title="View Blog Archives" class="main-header-archive">Archives</a>
      <a href="mailto:jerod.santo@gmail.com" title="Contact Jerod" class="main-header-contact">Contact</a>
      <a href="/search/" title="Search the site" class="main-header-search">Search</a>
    </div>
    

    
<article class="post">
  <header class="post-header">
    <h1>You don&#39;t have to annotate your AngularJS injections anymore</h1>
    
    <p class="post-date">
      August 2, 2013
    </p>
  </header>

  

  <div class="post-content">
    <p>One unfortunate drawback of how <a href="http://angularjs.org">AngularJS&rsquo;s</a> dependency injection works is that it breaks when your code is minified. The reason it fails is that minification renames variables that Angular uses to resolve the dependencies.</p>
<p>So the natural way of injecting dependencies into a controller doesn&rsquo;t work:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#1f2328">app</span><span style="color:#1f2328">.</span><span style="color:#1f2328">controller</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;MyCtrl&#34;</span><span style="color:#1f2328">,</span> <span style="color:#cf222e">function</span><span style="color:#1f2328">(</span><span style="color:#1f2328">$scope</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">$http</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">MyService</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{});</span>
</span></span></code></pre></div><p>The minifier renames <code>$scope</code>, <code>$http</code>, and <code>MyService</code> (in order to, ahem, minify them) and the injection breaks.</p>
<p>The old answer to this problem (which you will still see people promoting) is to &ldquo;annotate&rdquo; your injections. At every injection point you pass in an array that resolves the variable/injection pair manually.</p>
<p>The above code changes to this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#1f2328">app</span><span style="color:#1f2328">.</span><span style="color:#1f2328">controller</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;MyCtrl&#34;</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">[</span><span style="color:#0a3069">&#34;$scope&#34;</span><span style="color:#1f2328">,</span> <span style="color:#0a3069">&#34;$http&#34;</span><span style="color:#1f2328">,</span> <span style="color:#0a3069">&#34;MyService&#34;</span><span style="color:#1f2328">,</span> <span style="color:#cf222e">function</span><span style="color:#1f2328">(</span><span style="color:#1f2328">$scope</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">$http</span><span style="color:#1f2328">,</span> <span style="color:#1f2328">MyService</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{}]);</span>
</span></span></code></pre></div><p>I&rsquo;m sorry but that code is just crazy town.</p>
<p>Thankfully, there is no longer a good reason to manually annotate your injections. Just make the computer do it for you by utilizing Brian Ford&rsquo;s excellent <a href="https://github.com/btford/ngmin">ngmin</a>.</p>
<p>The tool is available as a grunt task via <a href="https://github.com/btford/grunt-ngmin">grunt-ngmin</a> and in Rails&rsquo; asset pipeline via <a href="http://rubygems.org/gems/ngmin-rails">ngmin-rails</a> so you can integrate it easily into your build process and avoid the headache and ugliness that is manual dependency injection annotations.</p>
<p>So please do.</p>

  </div>

  <ul class="post-share-buttons">
    <li class="service_twitter post-share-1">
      <a class="icon-twitter" href="https://twitter.com/intent/tweet?url=http%3a%2f%2flocalhost%3a1313%2f2013%2f08%2fyou-dont-have-to-annotate-your-angularjs-injections-anymore%2f&via=jerodsanto&text=You%20don%27t%20have%20to%20annotate%20your%20AngularJS%20injections%20anymore" title="Tweet">
        <span>Tweet</span>
      </a>
    </li>
    <li class="service_rss post-share-2">
      <a class="icon-rss" href="/index.xml" title="Subscribe to the feed!">
        <span>RSS</span>
      </a>
    </li>
    <li class="service_hackernews post-share-3">
      <a class="icon-hackernews" href="http://news.ycombinator.com/submitlink?u=http%3a%2f%2flocalhost%3a1313%2f2013%2f08%2fyou-dont-have-to-annotate-your-angularjs-injections-anymore%2f&t=You%20don%27t%20have%20to%20annotate%20your%20AngularJS%20injections%20anymore" title="Post to Hacker News">
        <span>Hacker News</span>
      </a>
    </li>
    <li class="service_instapaper post-share-4">
      <a class="icon-instapaper" href="http://www.instapaper.com/hello2?url=http%3a%2f%2flocalhost%3a1313%2f2013%2f08%2fyou-dont-have-to-annotate-your-angularjs-injections-anymore%2f&title=You%20don%27t%20have%20to%20annotate%20your%20AngularJS%20injections%20anymore" title="Read later">
        <span>Instapaper</span>
      </a>
    </li>
  </ul>

  
  

  <div id="disqus_thread"></div>
  <script>
    var disqus_url   = "http:\/\/localhost:1313\/2013\/08\/you-dont-have-to-annotate-your-angularjs-injections-anymore\/";
    var disqus_title = "You don\u0027t have to annotate your AngularJS injections anymore";
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'https://blogt0sk1.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script src="//platform.twitter.com/widgets.js"></script>
</article>


    <footer class="main-footer">
  <p>
    Copyright &copy; 2008&mdash;2025 Jerod Santo
  </p>
</footer>

    
    <script src="/js/compiled.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-3287978-16', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>