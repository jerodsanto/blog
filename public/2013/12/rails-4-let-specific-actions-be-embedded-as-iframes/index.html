<!DOCTYPE html>



 <html class="no-js"> 
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Jerod Santo">
    <meta property="og:site_name" content="Jerod Santo">
    
    <meta name="description" content="Rails 4 added a default X-Frame-Options HTTP header value of SAMEORIGIN. This is good for security, because browsers use this header to decide whether or not your site can be iframed by other sites.
However, sometimes you do want a particular action to be embeddable in another site. If you know the site which embeds the action, you can simply change the header to explicitly allow it:
class MyController &lt; ApplicationController
  def my_embeddable_widget
    response.headers[&#34;X-FRAME-OPTIONS&#34;] = &#34;ALLOW-FROM http://example.com&#34;
    render
  end
end
If, instead, you want the action to be embeddable by any site on the web, just delete the header:">
    <meta property="st:title" content="Rails 4: let specific actions be embedded as iframes">
    <meta property="og:title" content="Rails 4: let specific actions be embedded as iframes">
    <meta property="og:description" content="Rails 4 added a default X-Frame-Options HTTP header value of SAMEORIGIN. This is good for security, because browsers use this header to decide whether or not your site can be iframed by other sites.
However, sometimes you do want a particular action to be embeddable in another site. If you know the site which embeds the action, you can simply change the header to explicitly allow it:
class MyController &lt; ApplicationController
  def my_embeddable_widget
    response.headers[&#34;X-FRAME-OPTIONS&#34;] = &#34;ALLOW-FROM http://example.com&#34;
    render
  end
end
If, instead, you want the action to be embeddable by any site on the web, just delete the header:">
    <meta property="og:type" content="article">
    
    <meta property="og:image" content="/icon.png">
    
    
    <title>
      Rails 4: let specific actions be embedded as iframes | Jerod Santo
    </title>

    <link rel="icon" href="/icon.png" sizes="256x256" type="image/png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" media="all" href="/styles.css">
    <script>
       
      window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!(!t.document.createElementNS||!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),o=function(o){var r=t.document.createElement("link"),a=t.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=e[o&&n?0:o?1:2],a.parentNode.insertBefore(r,a)},r=new t.Image;r.onerror=function(){o(!1)},r.onload=function(){o(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}};
      grunticon(["/icons/icons.data.svg.css", "/icons/icons.data.png.css", "/icons/icons.fallback.css"]);
    </script>

    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400italic,400' rel='stylesheet' type='text/css'>
    <script src="//use.typekit.net/ozg5mvx.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
    <script src="/js/modernizr-custom.js"></script>

    

    <link rel="alternate" type="application/atom+xml" href="/index.xml" />
  </head>
  <body class="">
    
    <div class="main-header">
      <h1>
        <a href="/" title="Home">
          <span class="big-dot">&middot;</span> Jerod Santo <span class="big-dot">&middot;</span>
        </a>
      </h1>
      <a href="javascript:void(0);" title="Moar" class="main-header-more">+</a>
      <a href="/archives/" title="View Blog Archives" class="main-header-archive">Archives</a>
      <a href="mailto:jerod.santo@gmail.com" title="Contact Jerod" class="main-header-contact">Contact</a>
      <a href="/search/" title="Search the site" class="main-header-search">Search</a>
    </div>
    

    
<article class="post">
  <header class="post-header">
    <h1>Rails 4: let specific actions be embedded as iframes</h1>
    
    <p class="post-date">
      December 4, 2013
    </p>
  </header>

  

  <div class="post-content">
    <p>Rails 4 added a default <code>X-Frame-Options</code> HTTP header value of <code>SAMEORIGIN</code>. This is good <a href="http://en.wikipedia.org/wiki/Clickjacking">for security</a>, because browsers use this header to decide whether or not your site can be <code>iframe</code>d by other sites.</p>
<p>However, sometimes you <em>do</em> want a particular action to be embeddable in another site. If you know the site which embeds the action, you can simply change the header to explicitly allow it:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MyController</span> <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">ApplicationController</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">def</span> <span style="color:#6639ba">my_embeddable_widget</span>
</span></span><span style="display:flex;"><span>    response<span style="color:#0550ae">.</span>headers<span style="color:#0550ae">[</span><span style="color:#0a3069">&#34;X-FRAME-OPTIONS&#34;</span><span style="color:#0550ae">]</span> <span style="color:#0550ae">=</span> <span style="color:#0a3069">&#34;ALLOW-FROM http://example.com&#34;</span>
</span></span><span style="display:flex;"><span>    render
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">end</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">end</span>
</span></span></code></pre></div><p>If, instead, you want the action to be embeddable by any site on the web, just delete the header:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MyController</span> <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">ApplicationController</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">def</span> <span style="color:#6639ba">my_embeddable_widget</span>
</span></span><span style="display:flex;"><span>    response<span style="color:#0550ae">.</span>headers<span style="color:#0550ae">.</span>delete <span style="color:#0a3069">&#34;X-Frame-Options&#34;</span>
</span></span><span style="display:flex;"><span>    render
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">end</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">end</span>
</span></span></code></pre></div><p>For a single controller action, inlining these changes makes sense. If you&rsquo;re gonna allow multiple actions to be <code>iframe</code>d, you can put the logic in a method and call it from an <code>after_filter</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ApplicationController</span> <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">ActionController</span><span style="color:#0550ae">::</span><span style="color:#0550ae">Base</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">private</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">def</span> <span style="color:#6639ba">allow_iframe</span>
</span></span><span style="display:flex;"><span>    response<span style="color:#0550ae">.</span>headers<span style="color:#0550ae">.</span>delete <span style="color:#0a3069">&#34;X-Frame-Options&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">end</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MyController</span> <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">ApplicationController</span>
</span></span><span style="display:flex;"><span>  after_filter <span style="color:#032f62">:allow_iframe</span><span style="color:#1f2328">,</span> <span style="color:#032f62">only</span><span style="color:#1f2328">:</span> <span style="color:#032f62">:my_embeddable_widget</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">def</span> <span style="color:#6639ba">my_embeddable_widget</span>
</span></span><span style="display:flex;"><span>    render
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">end</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">end</span>
</span></span></code></pre></div><p>You can get even fancier if you want, but in my experience YAGNI.</p>

  </div>

  <ul class="post-share-buttons">
    <li class="service_twitter post-share-1">
      <a class="icon-twitter" href="https://twitter.com/intent/tweet?url=http%3a%2f%2flocalhost%3a1313%2f2013%2f12%2frails-4-let-specific-actions-be-embedded-as-iframes%2f&via=jerodsanto&text=Rails%204%3a%20let%20specific%20actions%20be%20embedded%20as%20iframes" title="Tweet">
        <span>Tweet</span>
      </a>
    </li>
    <li class="service_rss post-share-2">
      <a class="icon-rss" href="/index.xml" title="Subscribe to the feed!">
        <span>RSS</span>
      </a>
    </li>
    <li class="service_hackernews post-share-3">
      <a class="icon-hackernews" href="http://news.ycombinator.com/submitlink?u=http%3a%2f%2flocalhost%3a1313%2f2013%2f12%2frails-4-let-specific-actions-be-embedded-as-iframes%2f&t=Rails%204%3a%20let%20specific%20actions%20be%20embedded%20as%20iframes" title="Post to Hacker News">
        <span>Hacker News</span>
      </a>
    </li>
    <li class="service_instapaper post-share-4">
      <a class="icon-instapaper" href="http://www.instapaper.com/hello2?url=http%3a%2f%2flocalhost%3a1313%2f2013%2f12%2frails-4-let-specific-actions-be-embedded-as-iframes%2f&title=Rails%204%3a%20let%20specific%20actions%20be%20embedded%20as%20iframes" title="Read later">
        <span>Instapaper</span>
      </a>
    </li>
  </ul>

  
  

  <div id="disqus_thread"></div>
  <script>
    var disqus_url   = "http:\/\/localhost:1313\/2013\/12\/rails-4-let-specific-actions-be-embedded-as-iframes\/";
    var disqus_title = "Rails 4: let specific actions be embedded as iframes";
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'https://blogt0sk1.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script src="//platform.twitter.com/widgets.js"></script>
</article>


    <footer class="main-footer">
  <p>
    Copyright &copy; 2008&mdash;2025 Jerod Santo
  </p>
</footer>

    
    <script src="/js/compiled.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-3287978-16', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>