<!DOCTYPE html>



 <html class="no-js"> 
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Jerod Santo">
    <meta property="og:site_name" content="Jerod Santo">
    
    <meta name="description" content="I watched The Truman Show again recently. I always loved Truman&rsquo;s romanticization of Fiji. He believed it was exactly half way around the world from his little town.
That got me thinking. What is half way around the world from me?
Static Showdown
When I heard about Static Showdown, Yet another 48 hour programming competition, but with a static twist, I used it as an excuse to build my little Fiji Finder 1.
">
    <meta property="st:title" content="Find Your Fiji">
    <meta property="og:title" content="Find Your Fiji">
    <meta property="og:description" content="I watched The Truman Show again recently. I always loved Truman&rsquo;s romanticization of Fiji. He believed it was exactly half way around the world from his little town.
That got me thinking. What is half way around the world from me?
Static Showdown
When I heard about Static Showdown, Yet another 48 hour programming competition, but with a static twist, I used it as an excuse to build my little Fiji Finder 1.
">
    <meta property="og:type" content="article">
    
    <meta property="og:image" content="/icon.png">
    
    
    <title>
      Find Your Fiji | Jerod Santo
    </title>

    <link rel="icon" href="/icon.png" sizes="256x256" type="image/png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" media="all" href="/styles.css">
    <script>
       
      window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!(!t.document.createElementNS||!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),o=function(o){var r=t.document.createElement("link"),a=t.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=e[o&&n?0:o?1:2],a.parentNode.insertBefore(r,a)},r=new t.Image;r.onerror=function(){o(!1)},r.onload=function(){o(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}};
      grunticon(["/icons/icons.data.svg.css", "/icons/icons.data.png.css", "/icons/icons.fallback.css"]);
    </script>

    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400italic,400' rel='stylesheet' type='text/css'>
    <script src="//use.typekit.net/ozg5mvx.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
    <script src="/js/modernizr-custom.js"></script>

    

    <link rel="alternate" type="application/atom+xml" href="/index.xml" />
  </head>
  <body class="">
    
    <div class="main-header">
      <h1>
        <a href="/" title="Home">
          <span class="big-dot">&middot;</span> Jerod Santo <span class="big-dot">&middot;</span>
        </a>
      </h1>
      <a href="javascript:void(0);" title="Moar" class="main-header-more">+</a>
      <a href="/archives/" title="View Blog Archives" class="main-header-archive">Archives</a>
      <a href="mailto:jerod.santo@gmail.com" title="Contact Jerod" class="main-header-contact">Contact</a>
      <a href="/search/" title="Search the site" class="main-header-search">Search</a>
    </div>
    

    
<article class="post">
  <header class="post-header">
    <h1>Find Your Fiji</h1>
    
    <p class="post-date">
      January 26, 2015
    </p>
  </header>

  

  <div class="post-content">
    <p>I watched The <a href="http://www.imdb.com/title/tt0120382/">Truman Show</a> again recently. I always loved Truman&rsquo;s romanticization of Fiji. He believed it was exactly half way around the world from his little town.</p>
<p>That got me thinking. What is half way around the world from <em>me</em>?</p>
<h2 id="static-showdown">Static Showdown</h2>
<p>When I heard about <a href="http://2015.staticshowdown.com">Static Showdown</a>, Yet another 48 hour programming competition, but with a <a href="http://www.staticapps.org">static</a> twist, I used it as an excuse to build my little <a href="http://fiji.jerodsanto.net">Fiji Finder</a> <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p><a href="http://fiji.jerodsanto.net"><img src="http://jerodsanto.net/drop/fyf-screencap.jpg" alt="That&rsquo;s Pandloi, India, btw"></a></p>
<h2 id="constraints">Constraints</h2>
<p>There&rsquo;s not much to it. Use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation">Geolocation API</a> to find out where people are and then find the point half way around the world. The math isn&rsquo;t even all that interesting. So I set a few constraints for myself:</p>
<ol>
<li><a href="http://vanilla-js.com">Vanilla JS</a> — I would keep it lean and mean. No jQuery, even.</li>
<li>No libraries — I would write every line of code.</li>
<li>Regular Life — I wouldn&rsquo;t skip get-togethers, church, playing with the kids, etc.</li>
</ol>
<h2 id="challenges">Challenges</h2>
<p>There were a couple of challenges, though. The biggest one is that the Earth&rsquo;s surface is 71% water. That means most of our Fijis (mine included) would be pretty boring. I needed to detect water and adjust.</p>
<p>This would be easy if Google&rsquo;s Maps API would include some kind of <code>terrain</code> attribute. Or even better, an <code>isWater</code> flag! Sadly, there&rsquo;s no such thing which means we&rsquo;re left to hack together solutions. I found some pretty bizarre advice  on Stack Overflow<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup> like checking for elevation and declaring anything under sea level as water. Terrible, terrible idea.</p>
<p>Finally I came across <a href="https://tech.bellycard.com/blog/where-d-the-water-go-google-maps-water-pixel-detection-with-canvas/">this awesome hack</a> which I ended up modifying and using. Here&rsquo;s how it works:</p>
<ol>
<li>Take the latitude/longitude that you&rsquo;re trying to detect water from</li>
<li>Use the <a href="https://developers.google.com/maps/documentation/staticmaps/">Static Maps API</a> to get a small image of the location</li>
<li>Disable all features of the map <em>except</em> water, which is set to green</li>
<li>Download the image of the map and add it to an in-memory <code>canvas</code> element</li>
<li>Read the image data from the <code>canvas</code> element and check if it&rsquo;s green</li>
<li>Green = water, anything else = land</li>
</ol>
<p>Crazy, huh? Here&rsquo;s the function I ended up with:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#cf222e">function</span> <span style="color:#1f2328">detectWater</span><span style="color:#1f2328">(</span><span style="color:#1f2328">ll</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">var</span> <span style="color:#1f2328">water</span> <span style="color:#0550ae">=</span> <span style="color:#cf222e">new</span> <span style="color:#1f2328">Image</span><span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">water</span><span style="color:#1f2328">.</span><span style="color:#1f2328">crossOrigin</span> <span style="color:#0550ae">=</span> <span style="color:#0a3069">&#34;http://maps.googleapis.com/crossdomain.xml&#34;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">water</span><span style="color:#1f2328">.</span><span style="color:#1f2328">src</span> <span style="color:#0550ae">=</span> <span style="color:#0a3069">&#34;http://maps.googleapis.com/maps/api/staticmap?&amp;center=&#34;</span> <span style="color:#0550ae">+</span> <span style="color:#1f2328">ll</span><span style="color:#1f2328">.</span><span style="color:#1f2328">toUrlValue</span><span style="color:#1f2328">()</span> <span style="color:#0550ae">+</span> <span style="color:#0a3069">&#34;&amp;zoom=13&amp;size=100x100&amp;sensor=false&amp;visual_refresh=true&amp;style=element:labels|visibility:off&amp;style=feature:water|color:0x00FF00&amp;style=feature:transit|visibility:off&amp;style=feature:poi|visibility:off&amp;style=feature:road|visibility:off&amp;style=feature:administrative|visibility:off&#34;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">var</span> <span style="color:#1f2328">waterCanvas</span> <span style="color:#0550ae">=</span> <span style="color:#6639ba">document</span><span style="color:#1f2328">.</span><span style="color:#1f2328">createElement</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;canvas&#34;</span><span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">waterCanvas</span><span style="color:#1f2328">.</span><span style="color:#1f2328">setAttribute</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;width&#34;</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">100</span><span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">waterCanvas</span><span style="color:#1f2328">.</span><span style="color:#1f2328">setAttribute</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;height&#34;</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">100</span><span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">waterCanvas</span> <span style="color:#0550ae">=</span> <span style="color:#1f2328">waterCanvas</span><span style="color:#1f2328">.</span><span style="color:#1f2328">getContext</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;2d&#34;</span><span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">water</span><span style="color:#1f2328">.</span><span style="color:#1f2328">onload</span> <span style="color:#0550ae">=</span> <span style="color:#cf222e">function</span><span style="color:#1f2328">()</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">waterCanvas</span><span style="color:#1f2328">.</span><span style="color:#1f2328">drawImage</span><span style="color:#1f2328">(</span><span style="color:#1f2328">water</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">100</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">100</span><span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">var</span> <span style="color:#1f2328">bytes</span> <span style="color:#0550ae">=</span> <span style="color:#1f2328">waterCanvas</span><span style="color:#1f2328">.</span><span style="color:#1f2328">getImageData</span><span style="color:#1f2328">(</span><span style="color:#0550ae">50</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">50</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">).</span><span style="color:#1f2328">data</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span><span style="color:#1f2328">bytes</span><span style="color:#1f2328">[</span><span style="color:#0550ae">1</span><span style="color:#1f2328">]</span> <span style="color:#0550ae">===</span> <span style="color:#0550ae">254</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">ll</span><span style="color:#1f2328">.</span><span style="color:#1f2328">isLand</span> <span style="color:#0550ae">=</span> <span style="color:#cf222e">false</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">ll</span><span style="color:#1f2328">.</span><span style="color:#1f2328">isLand</span> <span style="color:#0550ae">=</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">};</span>
</span></span></code></pre></div><p>So when I find your Fiji and detect that it&rsquo;s water, I head due north 500 km and detect another one. Rinse and repeat until we hit land. It ain&rsquo;t perfect<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>, but it is good enough.</p>
<p>The other challenge, oddly enough, was adding a few decent looking modal dialog boxes. I use libraries for those all of the time and I felt like quite the neophyte trying to implement it on my own. In fact, I was quickly running out of time <sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup> so I hacked together a butt-nasty solution.</p>
<h2 id="takeaways">Takeaways</h2>
<p>It&rsquo;s fun to conceive an idea and be able to bring it to life in just a couple of days. I&rsquo;m often disappointed when I do hackathons because project scopes are often too large for the time allotted. This was just enough work to challenge me while still being able to finish.</p>
<p>The end product is by no means perfect, but just like Fiji, it&rsquo;s less about the final destination and more about how far you have to travel to get there.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>I had no illusion of winning the contest, but I was working alone so I thought <em>maybe</em> I&rsquo;d be in the running for the solo prize. Then I saw <a href="http://2015.staticshowdown.com/teams/spacetme">this entry</a>, which destroyed all hope for me.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>As you do&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p>It will skip over islands that are smaller than 500 km. But it was either that or fire off way too many Static Maps API calls (Google was throttling me).&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4">
<p>Not competition time. I had plenty of that. But I had to go to my parents&rsquo; for dinner soon!&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  </div>

  <ul class="post-share-buttons">
    <li class="service_twitter post-share-1">
      <a class="icon-twitter" href="https://twitter.com/intent/tweet?url=http%3a%2f%2flocalhost%3a1313%2f2015%2f01%2ffind-your-fiji%2f&via=jerodsanto&text=Find%20Your%20Fiji" title="Tweet">
        <span>Tweet</span>
      </a>
    </li>
    <li class="service_rss post-share-2">
      <a class="icon-rss" href="/index.xml" title="Subscribe to the feed!">
        <span>RSS</span>
      </a>
    </li>
    <li class="service_hackernews post-share-3">
      <a class="icon-hackernews" href="http://news.ycombinator.com/submitlink?u=http%3a%2f%2flocalhost%3a1313%2f2015%2f01%2ffind-your-fiji%2f&t=Find%20Your%20Fiji" title="Post to Hacker News">
        <span>Hacker News</span>
      </a>
    </li>
    <li class="service_instapaper post-share-4">
      <a class="icon-instapaper" href="http://www.instapaper.com/hello2?url=http%3a%2f%2flocalhost%3a1313%2f2015%2f01%2ffind-your-fiji%2f&title=Find%20Your%20Fiji" title="Read later">
        <span>Instapaper</span>
      </a>
    </li>
  </ul>

  
  

  <div id="disqus_thread"></div>
  <script>
    var disqus_url   = "http:\/\/localhost:1313\/2015\/01\/find-your-fiji\/";
    var disqus_title = "Find Your Fiji";
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'https://blogt0sk1.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script src="//platform.twitter.com/widgets.js"></script>
</article>


    <footer class="main-footer">
  <p>
    Copyright &copy; 2008&mdash;2025 Jerod Santo
  </p>
</footer>

    
    <script src="/js/compiled.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-3287978-16', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>